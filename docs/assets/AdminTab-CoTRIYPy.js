const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/matches-DamJWCot.js","assets/dataManager-C8rOmH55.js"])))=>i.map(i=>d[i]);
import{s as F,_ as X,u as I,r as A,j as e,z as $,t as me,a as Q,L as ue,b as ye}from"./main-U9Zj8t1i.js";import{B as U}from"./banTypes-DuNOJEIt.js";import{d as Y}from"./dataManager-C8rOmH55.js";const xe="alcoholCalculatorValues",ee="1.0",W=()=>({aekPlayer:"",realPlayer:"",aekGoals:0,realGoals:0,mode:"manual",gameDay:new Date().toISOString().split("T")[0],beerCount:{aek:0,real:0},alexanderShots:{cl40:0,cl20:0},philipShots:{cl40:0,cl20:0},cumulativeShots:{aek:0,real:0,total:0,lastMatchId:null,lastUpdated:null},lastUpdated:new Date().toISOString(),drinkingStartTime:null,version:ee}),ne=()=>{try{const l=localStorage.getItem(xe);if(!l)return W();const t=JSON.parse(l);if(!t.version||t.version!==ee)return console.log("Alcohol calculator: Version mismatch, using defaults"),W();const s=W();return{...s,...t,beerCount:{...s.beerCount,...t.beerCount||{}},alexanderShots:{...s.alexanderShots,...t.alexanderShots||{}},philipShots:{...s.philipShots,...t.philipShots||{}},cumulativeShots:{...s.cumulativeShots,...t.cumulativeShots||{}}}}catch(l){return console.error("Error loading alcohol calculator values:",l),W()}},ve=l=>{try{const t={...l,lastUpdated:new Date().toISOString(),version:ee};return localStorage.setItem(xe,JSON.stringify(t)),typeof window<"u"&&window.dispatchEvent(new CustomEvent("alcoholCalculatorValuesChanged",{detail:t})),!0}catch(t){return console.error("Error saving alcohol calculator values:",t),!1}},je=(l,t)=>{const s={...t,...l,lastUpdated:new Date().toISOString()};return l.beerCount&&(s.beerCount={...t.beerCount,...l.beerCount}),l.cumulativeShots&&(s.cumulativeShots={...t.cumulativeShots,...l.cumulativeShots}),ve(s),s},he=(l,t=null)=>{try{const s=t||ne();if(!l||typeof l!="object")return console.warn("Invalid match object provided to addShotsFromNewMatch"),s;const a=l.goalsa||0,i=l.goalsb||0,u=Math.floor(i/2)*2,x=Math.floor(a/2)*2;return je({cumulativeShots:{aek:s.cumulativeShots.aek+u,real:s.cumulativeShots.real+x,total:s.cumulativeShots.total+u+x,lastMatchId:l.id,lastUpdated:new Date().toISOString()}},s)}catch(s){return console.error("Error adding shots from new match:",s),t||ne()}};typeof window<"u"&&(window.updateAlcoholCalculatorFromMatch=l=>{try{he(l)}catch(t){console.warn("Failed to update alcohol calculator from match:",t)}});class le{static async submitMatch(t){const{date:s,teama:a="AEK",teamb:i="Real",goalsa:u,goalsb:x,goalslista:g=[],goalslistb:v=[],ownGoalsA:d=0,ownGoalsB:r=0,yellowa:h=0,reda:S=0,yellowb:k=0,redb:c=0,manofthematch:f,editId:C=null}=t;try{const{prizeaek:z,prizereal:w,winner:n,loser:y}=this.calculatePrizeMoney(u,x,h,S,k,c);C&&await this.deleteMatchTransactions(C);const o=[...g],b=[...v];d>0&&b.push({count:d,player:"Eigentore_AEK"}),r>0&&o.push({count:r,player:"Eigentore_Real"});const E={date:s,teama:a,teamb:i,goalsa:parseInt(u)||0,goalsb:parseInt(x)||0,goalslista:g,goalslistb:v,yellowa:parseInt(h)||0,reda:parseInt(S)||0,yellowb:parseInt(k)||0,redb:parseInt(c)||0,manofthematch:f||null,prizeaek:z,prizereal:w},D=await F.insert("matches",E);if(D.error)throw new Error(`Match insert failed: ${D.error.message}`);const B=D.data.id,R=new Date().toISOString().slice(0,10);if(o.length>0){const P=o.filter(K=>typeof K=="object"&&K.player?!K.player.startsWith("Eigentore_"):!K.startsWith("Eigentore_"));await this.updatePlayersGoals(P,"AEK")}if(b.length>0){const P=b.filter(K=>typeof K=="object"&&K.player?!K.player.startsWith("Eigentore_"):!K.startsWith("Eigentore_"));await this.updatePlayersGoals(P,"Real")}f&&await this.updatePlayerOfTheMatchStats(f),await this.processFinancialTransactions({matchId:B,date:R,prizeaek:z,prizereal:w,manofthematch:f,winner:n,loser:y}),await this.decrementBansAfterMatch();try{he({id:B,goalsa:parseInt(u)||0,goalsb:parseInt(x)||0,date:s})}catch(P){console.warn("Failed to update alcohol calculator:",P)}return{success:!0,matchId:B,message:`Match ${a} vs ${i} (${u}:${x}) erfolgreich hinzugefÃ¼gt`}}catch(z){throw console.error("Error in submitMatch:",z),new Error(`Fehler beim Speichern des Matches: ${z.message}`)}}static calculatePrizeMoney(t,s,a,i,u,x){let g=0,v=0,d=null,r=null;return t>s?(d="AEK",r="Real"):t<s&&(d="Real",r="AEK"),d&&r&&(d==="AEK"?(g=1e6-s*5e4-a*2e4-i*5e4,v=-(5e5+t*5e4+u*2e4+x*5e4)):(v=1e6-t*5e4-u*2e4-x*5e4,g=-(5e5+s*5e4+a*2e4+i*5e4))),{prizeaek:g,prizereal:v,winner:d,loser:r}}static async updatePlayersGoals(t,s){const a={};if(t.length>0&&typeof t[0]=="object"&&t[0].player!==void 0)t.forEach(i=>{i.player&&!i.player.startsWith("Eigentore_")&&(a[i.player]=(a[i.player]||0)+(i.count||1))});else for(const i of t)!i||!i.trim()||i.startsWith("Eigentore_")||(a[i]=(a[i]||0)+1);for(const[i,u]of Object.entries(a))try{const x=await F.select("players","id, goals",{eq:{name:i,team:s}});if(x.data&&x.data.length>0){const g=x.data[0],v=(g.goals||0)+u;await F.update("players",{goals:v},g.id)}}catch(x){console.warn(`Failed to update goals for player ${i}:`,x)}}static async updatePlayerOfTheMatchStats(t){try{const s=await F.select("players","team",{eq:{name:t}});if(!s.data||s.data.length===0){console.warn(`Player ${t} not found for SdS stats`);return}const a=s.data[0].team,i=await F.select("spieler_des_spiels","*",{eq:{name:t,team:a}});if(i.data&&i.data.length>0){const u=i.data[0];await F.update("spieler_des_spiels",{count:u.count+1},u.id)}else await F.insert("spieler_des_spiels",{name:t,team:a,count:1})}catch(s){console.warn(`Failed to update SdS stats for ${t}:`,s)}}static async processFinancialTransactions({matchId:t,date:s,prizeaek:a,prizereal:i,manofthematch:u,winner:x,loser:g}){const v=await this.getTeamFinance("AEK"),d=await this.getTeamFinance("Real");let r=v.balance||0,h=d.balance||0;const S=u?await this.getSdSBonus(u,"AEK"):0,k=u?await this.getSdSBonus(u,"Real"):0;S>0&&(r+=S,await this.insertTransaction({date:s,type:"SdS Bonus",team:"AEK",amount:S,match_id:t,info:"SdS Bonus"}),await this.updateTeamBalance("AEK",r)),k>0&&(h+=k,await this.insertTransaction({date:s,type:"SdS Bonus",team:"Real",amount:k,match_id:t,info:"SdS Bonus"}),await this.updateTeamBalance("Real",h)),a!==0&&(r+=a,r<0&&(r=0),await this.insertTransaction({date:s,type:"Preisgeld",team:"AEK",amount:a,match_id:t,info:"Preisgeld"}),await this.updateTeamBalance("AEK",r)),i!==0&&(h+=i,h<0&&(h=0),await this.insertTransaction({date:s,type:"Preisgeld",team:"Real",amount:i,match_id:t,info:"Preisgeld"}),await this.updateTeamBalance("Real",h)),x&&g&&await this.processEchtgeldAusgleich({date:s,matchId:t,winner:x,loser:g,aekBalance:r,realBalance:h,prizeaek:a,prizereal:i,sdsBonusAek:S>0?1:0,sdsBonusReal:k>0?1:0,manofthematch:u})}static async getTeamFinance(t){const s=await F.select("finances","*",{eq:{team:t}});return s.data&&s.data.length>0?s.data[0]:{balance:0,debt:0}}static async getSdSBonus(t,s){const a=await F.select("players","team",{eq:{name:t}});return a.data&&a.data.length>0&&a.data[0].team===s?1e5:0}static async insertTransaction(t){return await F.insert("transactions",t)}static async updateTeamBalance(t,s){const a=await F.select("finances","id",{eq:{team:t}});return a.data&&a.data.length>0?await F.update("finances",{balance:s},a.data[0].id):await F.insert("finances",{team:t,balance:s,debt:0})}static async processEchtgeldAusgleich({date:t,matchId:s,winner:a,loser:i,aekBalance:u,realBalance:x,prizeaek:g,prizereal:v,sdsBonusAek:d,sdsBonusReal:r,manofthematch:h}){const S=await this.getTeamFinance("AEK"),k=await this.getTeamFinance("Real"),c={AEK:S.debt||0,Real:k.debt||0},f=(R,P,K)=>{let _=R;K&&(_+=1e5);let V=(Math.abs(P)-_)/1e5;return V<0&&(V=0),5+Math.round(V)},C=f(u,g,d),z=f(x,v,r),w=i==="AEK"?C:z,n=c[a],y=c[i],o=Math.min(n,w*1),b=Math.max(0,n-o),E=w*1-o,D=y+Math.max(0,E),B=await F.select("finances","id",{eq:{team:a}});if(B.data&&B.data.length>0&&await F.update("finances",{debt:b},B.data[0].id),E>0){await this.insertTransaction({date:t,type:"Echtgeld-Ausgleich",team:i,amount:Math.max(0,E),match_id:s,info:"Echtgeld-Ausgleich"});const R=await F.select("finances","id",{eq:{team:i}});R.data&&R.data.length>0&&await F.update("finances",{debt:D},R.data[0].id)}o>0&&await this.insertTransaction({date:t,type:"Echtgeld-Ausgleich (getilgt)",team:a,amount:-o,match_id:s,info:"Echtgeld-Ausgleich (getilgt)"})}static async deleteMatchTransactions(t){try{const{deleteMatch:s}=await X(async()=>{const{deleteMatch:a}=await import("./matches-DamJWCot.js");return{deleteMatch:a}},__vite__mapDeps([0,1]));await s(t)}catch(s){throw console.error(`Failed to delete match ${t} comprehensively:`,s),s}}static async decrementBansAfterMatch(){try{const t=await F.select("bans","*");if(!t.data)return;for(const s of t.data)if(s.matchesserved<s.totalgames){const a=s.matchesserved+1;await F.update("bans",{matchesserved:a},s.id)}}catch(t){console.warn("Failed to decrement bans:",t)}}}function Ne(){const{data:l}=I("players","*"),[t,s]=A.useState(!1),[a,i]=A.useState({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),[u,x]=A.useState(!1),g=(n,y,o)=>n.reduce((E,D)=>E+D.count,0)+o,v=n=>{i(y=>{const o={...y,...n};o.goalsa=g(o.goalslista,o.ownGoalsA,o.ownGoalsB),o.goalsb=g(o.goalslistb,o.ownGoalsB,o.ownGoalsA);const{prizeaek:b,prizereal:E}=le.calculatePrizeMoney(o.goalsa,o.goalsb,o.yellowa,o.reda,o.yellowb,o.redb);return o.prizeaek=b,o.prizereal=E,o})},d=(n,y)=>{v({[n]:y})},r=async n=>{n.preventDefault(),x(!0);try{const y=await le.submitMatch({date:a.date,teama:a.teama.trim(),teamb:a.teamb.trim(),goalsa:a.goalsa,goalsb:a.goalsb,goalslista:a.goalslista,goalslistb:a.goalslistb,ownGoalsA:a.ownGoalsA,ownGoalsB:a.ownGoalsB,yellowa:parseInt(a.yellowa)||0,reda:parseInt(a.reda)||0,yellowb:parseInt(a.yellowb)||0,redb:parseInt(a.redb)||0,manofthematch:a.manofthematch||null});i({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),s(!1),$.success(y.message),me("match-created",{date:a.date,teama:a.teama,teamb:a.teamb,goalsa:a.goalsa,goalsb:a.goalsb,manofthematch:a.manofthematch})}catch(y){console.error("Match submission error:",y),$.error(y.message||"Fehler beim HinzufÃ¼gen des Spiels")}finally{x(!1)}},h=()=>!(!a.date||a.goalsa===a.goalsb||!a.manofthematch||a.manofthematch.trim()===""),S=n=>l?l.filter(y=>y.team===n):[],k=()=>l?a.motmTeamFilter==="all"?l:l.filter(n=>n.team===a.motmTeamFilter):[],c=(n,y)=>{const o=n==="AEK"?"goalslista":"goalslistb";v({[o]:a[o].map(b=>b.player===y?{...b,count:b.count+1}:b).concat(a[o].find(b=>b.player===y)?[]:[{player:y,count:1}])})},f=(n,y)=>{const o=n==="AEK"?"goalslista":"goalslistb";v({[o]:a[o].map(b=>b.player===y?{...b,count:Math.max(0,b.count-1)}:b).filter(b=>b.count>0)})},C=(n,y)=>{const o=n==="AEK"?"ownGoalsA":"ownGoalsB",b=Math.max(0,a[o]+y);v({[o]:b})},z=(n,y)=>{if(!y)return;const o=n==="AEK"?"goalslista":"goalslistb",b=a[o].find(E=>E.player===y);v(b?{[o]:a[o].map(E=>E.player===y?{...E,count:E.count+1}:E)}:{[o]:[...a[o],{player:y,count:1}]})},w=(n,y)=>{const o=n==="AEK"?"goalslista":"goalslistb";v({[o]:a[o].filter(b=>b.player!==y)})};return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neues Spiel hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"FÃ¼gen Sie ein neues Spiel zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"âš½"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Spiel hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um ein neues Spiel zu erfassen."}),e.jsxs("button",{onClick:()=>s(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neues Spiel erfassen"]})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-2 sm:p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg w-full max-w-lg modal-content match-modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neues Spiel"}),e.jsx("button",{onClick:()=>s(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:u,children:"Ã—"})]}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"âš½ Spielpaarung"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium",children:"AEK Athen"}),e.jsx("div",{className:"text-gray-500 font-bold text-xl",children:"vs"}),e.jsx("div",{className:"bg-red-100 text-red-800 px-4 py-2 rounded-lg font-medium",children:"Real Madrid"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:a.date,onChange:n=>d("date",n.target.value),className:"form-input",required:!0,disabled:u})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"âš½ Live Torwertung"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-700",children:[a.goalsa," : ",a.goalsb]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["AEK Athen ",a.goalsa," - ",a.goalsb," Real Madrid"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-blue-600 mb-3",children:"âš½ AEK Athen TorschÃ¼tzen"})}),e.jsx("div",{className:"space-y-2",children:a.goalslista.map((n,y)=>e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:n.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n.count," Tor",n.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>f("AEK",n.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:u,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:n.count}),e.jsx("button",{type:"button",onClick:()=>c("AEK",n.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:u,children:"+"}),e.jsx("button",{type:"button",onClick:()=>w("AEK",n.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:u,title:"TorschÃ¼tze entfernen",children:"âœ•"})]})]},`aek-${n.player}-${y}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:n=>{n.target.value&&(z("AEK",n.target.value),n.target.value="")},className:"w-full form-input bg-blue-100 border-blue-300 text-blue-800",disabled:u,children:[e.jsx("option",{value:"",children:"+ TorschÃ¼tze hinzufÃ¼gen"}),S("AEK").map(n=>e.jsxs("option",{value:n.name,children:[n.name," (",n.position,")"]},n.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"ZÃ¤hlen fÃ¼r Real Madrid"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>C("AEK",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:u||a.ownGoalsA===0,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:a.ownGoalsA}),e.jsx("button",{type:"button",onClick:()=>C("AEK",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:u,children:"+"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-red-600 mb-3",children:"âš½ Real Madrid TorschÃ¼tzen"})}),e.jsx("div",{className:"space-y-2",children:a.goalslistb.map((n,y)=>e.jsxs("div",{className:"flex items-center justify-between bg-red-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:n.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n.count," Tor",n.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>f("Real",n.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:u,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:n.count}),e.jsx("button",{type:"button",onClick:()=>c("Real",n.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:u,children:"+"}),e.jsx("button",{type:"button",onClick:()=>w("Real",n.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:u,title:"TorschÃ¼tze entfernen",children:"âœ•"})]})]},`real-${n.player}-${y}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:n=>{n.target.value&&(z("Real",n.target.value),n.target.value="")},className:"w-full form-input bg-red-100 border-red-300 text-red-800",disabled:u,children:[e.jsx("option",{value:"",children:"+ TorschÃ¼tze hinzufÃ¼gen"}),S("Real").map(n=>e.jsxs("option",{value:n.name,children:[n.name," (",n.position,")"]},n.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"ZÃ¤hlen fÃ¼r AEK Athen"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>C("Real",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:u||a.ownGoalsB===0,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:a.ownGoalsB}),e.jsx("button",{type:"button",onClick:()=>C("Real",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:u,children:"+"})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"ðŸŸ¨ðŸŸ¥ Karten"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Heimteam"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¨ Gelbe Karten"}),e.jsx("input",{type:"number",min:"0",value:a.yellowa,onChange:n=>d("yellowa",n.target.value),onFocus:n=>n.target.select(),className:"form-input",disabled:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¥ Rote Karten"}),e.jsx("input",{type:"number",min:"0",value:a.reda,onChange:n=>d("reda",n.target.value),onFocus:n=>n.target.select(),className:"form-input",disabled:u})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Gastteam"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¨ Gelbe Karten"}),e.jsx("input",{type:"number",min:"0",value:a.yellowb,onChange:n=>d("yellowb",n.target.value),onFocus:n=>n.target.select(),className:"form-input",disabled:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¥ Rote Karten"}),e.jsx("input",{type:"number",min:"0",value:a.redb,onChange:n=>d("redb",n.target.value),onFocus:n=>n.target.select(),className:"form-input",disabled:u})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"â­ Spieler des Spiels"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-text-muted mb-2",children:"Team Filter:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>d("motmTeamFilter","all"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${a.motmTeamFilter==="all"?"bg-gray-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:u,children:"Alle"}),e.jsx("button",{type:"button",onClick:()=>d("motmTeamFilter","AEK"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${a.motmTeamFilter==="AEK"?"bg-blue-600 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,disabled:u,children:"AEK"}),e.jsx("button",{type:"button",onClick:()=>d("motmTeamFilter","Real"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${a.motmTeamFilter==="Real"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,disabled:u,children:"Real"})]})]}),e.jsxs("select",{value:a.manofthematch,onChange:n=>d("manofthematch",n.target.value),className:"form-input",disabled:u,children:[e.jsx("option",{value:"",children:"Keinen Spieler auswÃ¤hlen"}),k().map(n=>e.jsxs("option",{value:n.name,children:[n.name," (",n.team," - ",n.position,")"]},n.id))]}),!l||l.length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler verfÃ¼gbar. Bitte fÃ¼gen Sie erst Spieler hinzu."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"ðŸ’° Preisgelder (automatisch berechnet)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld AEK (â‚¬)"}),e.jsx("input",{type:"number",value:a.prizeaek,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld Real (â‚¬)"}),e.jsx("input",{type:"number",value:a.prizereal,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Basierend auf Ergebnis und Karten: Gewinner 1Mâ‚¬ - (Verlierer-Tore Ã— 50kâ‚¬) - (Karten Ã— 20kâ‚¬/50kâ‚¬)"})]}),a.goalsa===a.goalsb&&(a.goalsa>0||a.goalsb>0)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-600 mr-2",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-800",children:"Unentschieden nicht erlaubt"}),e.jsx("p",{className:"text-sm text-red-700",children:"Ein Team muss gewinnen. Unentschieden sind in dieser App nicht mÃ¶glich."})]})]})}),!a.manofthematch&&(a.goalsa>0||a.goalsb>0)&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-yellow-600 mr-2",children:"â­"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-yellow-800",children:"Spieler des Spiels erforderlich"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Bitte wÃ¤hlen Sie einen Spieler des Spiels aus, bevor Sie das Match speichern."})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>s(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:u,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!h()||u,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})})]})}const O=[{value:"AEK",label:"AEK Athen",color:"blue",icon:"ðŸ”µ"},{value:"Real",label:"Real Madrid",color:"red",icon:"ðŸ”´"},{value:"Ehemalige",label:"Ehemalige",color:"gray",icon:"âš«"}],q=l=>{const t=O.find(s=>s.value===l);return t?`${t.icon} ${t.label}`:l};function we(){const{data:l}=I("players","*"),[t,s]=A.useState(!1),[a,i]=A.useState(""),[u,x]=A.useState({player_id:"",type:"",reason:"",customDuration:1}),[g,v]=A.useState(!1),d=(c,f)=>{x(C=>({...C,[c]:f})),c==="team"&&x(C=>({...C,player_id:""}))},r=()=>!l||!a?[]:l.filter(c=>c.team===a),h=async c=>{var f;c.preventDefault(),v(!0);try{const C=l==null?void 0:l.find(b=>b.id===parseInt(u.player_id)),z=U.find(b=>b.value===u.type);if(!C)throw new Error("Spieler nicht gefunden");if(!z)throw new Error("Sperrart nicht gefunden");const n=(f=(await F.select("bans","*",{eq:{player_id:C.id}})).data)==null?void 0:f.find(b=>(b.matchesserved||0)<(b.totalgames||0));if(n)throw new Error(`Spieler "${C.name}" ist bereits gesperrt (${n.totalgames-n.matchesserved} Spiele verbleibend)`);const y=z.fixedDuration?z.duration:u.customDuration,o=await F.insert("bans",{player_id:C.id,team:C.team,type:z.value,totalgames:y,matchesserved:0,reason:u.reason||z.value});if(o.error)throw new Error(`Ban insert failed: ${o.error.message}`);x({player_id:"",type:"",reason:"",customDuration:1}),i(""),s(!1),$.success(`Sperre fÃ¼r "${C.name}" erfolgreich hinzugefÃ¼gt!`)}catch(C){console.error("Ban submission error:",C),$.error(C.message||"Fehler beim HinzufÃ¼gen der Sperre")}finally{v(!1)}},S=a&&u.player_id&&u.type,k=U.find(c=>c.value===u.type);return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Sperre hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erstellen Sie eine neue Spielersperre in der Datenbank."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸš«"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Sperre hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Spielersperre zu erfassen."}),e.jsxs("button",{onClick:()=>s(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Sperre erfassen"]})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Sperre"}),e.jsx("button",{onClick:()=>s(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:g,children:"Ã—"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:a,onChange:c=>{i(c.target.value),x(f=>({...f,player_id:""}))},className:"form-input",required:!0,disabled:g,children:[e.jsx("option",{value:"",children:"Team wÃ¤hlen"}),O.filter(c=>c.value!=="Ehemalige").map(c=>e.jsx("option",{value:c.value,children:q(c.value)},c.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spieler *"}),e.jsxs("select",{value:u.player_id,onChange:c=>d("player_id",c.target.value),className:"form-input",required:!0,disabled:g||!a,children:[e.jsx("option",{value:"",children:a?"Spieler wÃ¤hlen":"Bitte zuerst Team wÃ¤hlen"}),r().map(c=>e.jsxs("option",{value:c.id,children:[c.name," (",c.position,")"]},c.id))]}),a&&r().length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler im gewÃ¤hlten Team verfÃ¼gbar."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Sperrart *"}),e.jsxs("select",{value:u.type,onChange:c=>d("type",c.target.value),className:"form-input",required:!0,disabled:g,children:[e.jsx("option",{value:"",children:"Sperrart wÃ¤hlen"}),U.map(c=>e.jsxs("option",{value:c.value,children:[c.icon," ",c.label,c.fixedDuration?` (${c.duration} Spiel${c.duration!==1?"e":""})`:` (1-${c.maxDuration} Spiele)`]},c.value))]})]}),k&&!k.fixedDuration&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Spiele *"}),e.jsx("select",{value:u.customDuration,onChange:c=>d("customDuration",parseInt(c.target.value)),className:"form-input",required:!0,disabled:g,children:Array.from({length:k.maxDuration},(c,f)=>f+1).map(c=>e.jsxs("option",{value:c,children:[c," Spiel",c!==1?"e":""]},c))}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["WÃ¤hlen Sie zwischen ",k.minDuration," und ",k.maxDuration," Spielen"]})]}),k&&k.fixedDuration&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"Gelb-Rote Karten haben immer eine feste Sperre von 1 Spiel."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"ZusÃ¤tzlicher Grund (optional)"}),e.jsx("input",{type:"text",value:u.reason,onChange:c=>d("reason",c.target.value),className:"form-input",placeholder:"Weitere Details zur Sperre...",disabled:g})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>s(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:g,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!S||g||!l||l.length===0,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Sperrarten"}),e.jsx("div",{className:"space-y-2",children:U.map(c=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:c.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:c.label})]}),e.jsx("span",{className:"text-sm text-text-muted",children:c.fixedDuration?`${c.duration} Spiel${c.duration!==1?"e":""} (fest)`:`1-${c.maxDuration} Spiele (variabel)`})]},c.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-yellow-50 border-yellow-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-yellow-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Nach dem HinzufÃ¼gen kÃ¶nnen Sie die Sperre in der Sperren-Ãœbersicht einsehen und verwalten."})]})]})})]})}const ie=[{value:"TH",label:"Torwart (TH)"},{value:"IV",label:"Innenverteidiger (IV)"},{value:"AV",label:"AuÃŸenverteidiger (AV)"},{value:"ZM",label:"Zentrales Mittelfeld (ZM)"},{value:"OM",label:"Offensives Mittelfeld (OM)"},{value:"ST",label:"StÃ¼rmer (ST)"}];function Se(){const[l,t]=A.useState(!1),[s,a]=A.useState({name:"",team:"",position:"",goals:0,value:0}),[i,u]=A.useState(!1),x=(d,r)=>{a(h=>({...h,[d]:r}))},g=async d=>{d.preventDefault(),u(!0);try{const r=await F.select("players","*",{eq:{name:s.name.trim(),team:s.team.trim()}});if(r.data&&r.data.length>0)throw new Error(`Spieler "${s.name}" existiert bereits im Team "${s.team}"`);const h=await F.insert("players",{name:s.name.trim(),team:s.team.trim(),position:s.position.trim().toUpperCase(),goals:parseInt(s.goals)||0,value:parseFloat(s.value)||0});if(h.error)throw new Error(`Player insert failed: ${h.error.message}`);a({name:"",team:"",position:"",goals:0,value:0}),t(!1),$.success(`Spieler "${s.name}" erfolgreich hinzugefÃ¼gt!`)}catch(r){console.error("Player submission error:",r),$.error(r.message||"Fehler beim HinzufÃ¼gen des Spielers")}finally{u(!1)}},v=s.name&&s.team&&s.position&&s.value!=="";return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neuen Spieler hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"FÃ¼gen Sie einen neuen Spieler zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ‘¤"}),e.jsxs("h4",{className:"text-lg font-medium text-text-primary mb-2",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"Spieler hinzufÃ¼gen"]}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um einen neuen Spieler zu erfassen."}),e.jsxs("button",{onClick:()=>t(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neuen Spieler erfassen"]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neuer Spieler"}),e.jsx("button",{onClick:()=>t(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:i,children:"Ã—"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spielername *"}),e.jsx("input",{type:"text",value:s.name,onChange:d=>x("name",d.target.value),className:"form-input",placeholder:"z.B. Max Mustermann",required:!0,disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:s.team,onChange:d=>x("team",d.target.value),className:"form-input",required:!0,disabled:i,children:[e.jsx("option",{value:"",children:"Team wÃ¤hlen"}),O.map(d=>e.jsx("option",{value:d.value,children:q(d.value)},d.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Position *"}),e.jsxs("select",{value:s.position,onChange:d=>x("position",d.target.value),className:"form-input",required:!0,disabled:i,children:[e.jsx("option",{value:"",children:"Position wÃ¤hlen"}),ie.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Marktwert (Millionen â‚¬) *"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:s.value,onChange:d=>x("value",d.target.value),onFocus:d=>d.target.select(),className:"form-input",placeholder:"0.0",disabled:i}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Marktwert in Millionen Euro (z.B. 1.5 fÃ¼r 1.5M â‚¬)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Tore"}),e.jsx("input",{type:"number",min:"0",value:s.goals,onChange:d=>x("goals",d.target.value),onFocus:d=>d.target.select(),className:"form-input",placeholder:"0",disabled:i})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>t(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:i,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!v||i,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Teams"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:O.map(d=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("span",{className:`font-medium ${d.color==="blue"?"text-blue-600":d.color==="red"?"text-red-600":"text-gray-600"}`,children:q(d.value)}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",d.value,")"]})]},d.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Positionen"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:ie.map(d=>e.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:e.jsx("span",{className:"font-medium text-text-primary text-sm",children:d.label})},d.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-green-50 border-green-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-green-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-green-700 text-sm",children:"Nach dem HinzufÃ¼gen kÃ¶nnen Sie den Spieler in der Kader-Ãœbersicht einsehen und verwalten."})]})]})})]})}const ce=[{value:"Preisgeld",label:"Preisgeld",icon:"ðŸ†"},{value:"Strafe",label:"Strafe",icon:"ðŸ“‰"},{value:"Spielerkauf",label:"Spielerkauf",icon:"ðŸ‘¤"},{value:"Spielerverkauf",label:"Spielerverkauf",icon:"ðŸ’°"},{value:"Echtgeld-Ausgleich",label:"Echtgeld-Ausgleich",icon:"ðŸ’³"},{value:"SdS Bonus",label:"Spieler des Spiels Bonus",icon:"â­"},{value:"Sonstiges",label:"Sonstiges",icon:"ðŸ“ˆ"}];function ke(){const[l,t]=A.useState(!1),[s,a]=A.useState({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),[i,u]=A.useState(!1),x=(r,h)=>{a(S=>({...S,[r]:h}))},g=async r=>{r.preventDefault(),u(!0);try{const h=parseFloat(s.amount),S=await F.insert("transactions",{date:s.date,type:s.type.trim(),team:s.team.trim(),amount:h,info:s.info.trim(),match_id:null});if(S.error)throw new Error(`Transaction insert failed: ${S.error.message}`);await v(s.team.trim(),s.type.trim(),h),a({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),t(!1),$.success("Transaktion erfolgreich hinzugefÃ¼gt!")}catch(h){console.error("Transaction submission error:",h),$.error(h.message||"Fehler beim HinzufÃ¼gen der Transaktion")}finally{u(!1)}},v=async(r,h,S)=>{try{const k=await F.select("finances","*",{eq:{team:r}});let c=k.data&&k.data.length>0?k.data[0]:{team:r,balance:0,debt:0},f={};if(h==="Echtgeld-Ausgleich")f.debt=(c.debt||0)+S;else{let C=(c.balance||0)+S;C<0&&(C=0),f.balance=C}c.id?await F.update("finances",f,c.id):await F.insert("finances",{team:r,balance:f.balance||0,debt:f.debt||0})}catch(k){console.warn("Failed to update finances:",k)}},d=s.team&&s.type&&s.amount&&s.date;return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Transaktion hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erfassen Sie eine neue finanzielle Transaktion."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ’°"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Transaktion hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Transaktion zu erfassen."}),e.jsxs("button",{onClick:()=>t(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Transaktion erfassen"]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Transaktion"}),e.jsx("button",{onClick:()=>t(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:i,children:"Ã—"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:s.team,onChange:r=>x("team",r.target.value),className:"form-input",required:!0,disabled:i,children:[e.jsx("option",{value:"",children:"Team wÃ¤hlen"}),O.filter(r=>r.value!=="Ehemalige").map(r=>e.jsx("option",{value:r.value,children:q(r.value)},r.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Transaktionsart *"}),e.jsxs("select",{value:s.type,onChange:r=>x("type",r.target.value),className:"form-input",required:!0,disabled:i,children:[e.jsx("option",{value:"",children:"Typ wÃ¤hlen"}),ce.map(r=>e.jsxs("option",{value:r.value,children:[r.icon," ",r.label]},r.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Betrag (â‚¬) *"}),e.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:r=>x("amount",r.target.value),onFocus:r=>r.target.select(),className:"form-input",placeholder:"0.00",required:!0,disabled:i}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Negative Werte fÃ¼r Ausgaben, positive fÃ¼r Einnahmen"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Beschreibung"}),e.jsx("input",{type:"text",value:s.info,onChange:r=>x("info",r.target.value),className:"form-input",placeholder:"ZusÃ¤tzliche Informationen...",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:s.date,onChange:r=>x("date",r.target.value),className:"form-input",required:!0,disabled:i})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>t(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:i,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!d||i,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Transaktionsarten"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ce.map(r=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:r.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:r.label})]},r.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Teams"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:O.filter(r=>r.value!=="Ehemalige").map(r=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("span",{className:`font-medium ${r.color==="blue"?"text-blue-600":"text-red-600"}`,children:q(r.value)}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",r.value,")"]})]},r.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Nach dem HinzufÃ¼gen kÃ¶nnen Sie die Transaktion in der Finanzen-Ãœbersicht einsehen."})]})]})})]})}function Ee(){var re;const[l,t]=A.useState("players"),[s,a]=A.useState(!1),[i,u]=A.useState(""),[x,g]=A.useState(new Set),{data:v,refetch:d}=I("players","*",{order:{column:"id",ascending:!1}}),{data:r,refetch:h}=I("matches","*",{order:{column:"date",ascending:!1}}),{data:S,refetch:k}=I("bans","*",{order:{column:"id",ascending:!1}}),{data:c,refetch:f}=I("transactions","*",{order:{column:"date",ascending:!1}}),{remove:C}=Q("players"),{remove:z}=Q("bans"),{remove:w}=Q("transactions"),n=[{id:"players",label:"Spieler lÃ¶schen",icon:"fas fa-users"},{id:"matches",label:"Spiele lÃ¶schen (Einzel & Bulk)",icon:"fas fa-futbol"},{id:"bans",label:"Sperren lÃ¶schen",icon:"fas fa-ban"},{id:"transactions",label:"Transaktionen lÃ¶schen",icon:"fas fa-euro-sign"}],y=m=>{t(m),u(""),g(new Set)},o=(m,j)=>{const N=new Set(x);j?N.add(m):N.delete(m),g(N)},b=m=>{const j=J(m);x.size===j.length?g(new Set):g(new Set(j.map(N=>N.id)))},E=async()=>{if(x.size===0){$.error("Keine Spiele ausgewÃ¤hlt");return}const j=((r==null?void 0:r.filter(M=>x.has(M.id)))||[]).reduce((M,L)=>M+((c==null?void 0:c.filter(H=>H.match_id===L.id).length)||0),0);let N=`Sind Sie sicher, dass Sie ${x.size} ausgewÃ¤hlte Spiele lÃ¶schen mÃ¶chten?`;if(j>0&&(N+=`

Achtung: ${j} zugehÃ¶rige Transaktion(en) werden ebenfalls gelÃ¶scht.`),N+=`

Dieser Vorgang kann nicht rÃ¼ckgÃ¤ngig gemacht werden!`,!confirm(N))return;a(!0);let p=0,T=0;try{const{deleteMatch:M}=await X(async()=>{const{deleteMatch:L}=await import("./matches-DamJWCot.js");return{deleteMatch:L}},__vite__mapDeps([0,1]));for(const L of x)try{console.log(`Deleting match ${L}`),await M(L),p++}catch(H){console.error(`Failed to delete match ${L}:`,H),T++}g(new Set),p>0&&T===0?$.success(`Alle ${p} Spiele erfolgreich gelÃ¶scht`):p>0&&T>0?$.success(`${p} Spiele gelÃ¶scht, ${T} fehlgeschlagen`):$.error(`Alle ${T} LÃ¶schvorgÃ¤nge fehlgeschlagen`),h(),f(),setTimeout(()=>{h(),f()},1e3)}catch(M){console.error("Bulk delete error:",M),$.error("Fehler beim Bulk-LÃ¶schen: "+M.message),g(new Set)}finally{a(!1)}},D=()=>{switch(l){case"players":return{total:(v==null?void 0:v.length)||0,filtered:V(v).length};case"matches":return{total:(r==null?void 0:r.length)||0,filtered:J(r).length};case"bans":return{total:(S==null?void 0:S.length)||0,filtered:te(S).length};case"transactions":return{total:(c==null?void 0:c.length)||0,filtered:se(c).length};default:return{total:0,filtered:0}}},B=async m=>{const j=(S==null?void 0:S.filter(p=>p.player_id===m.id||p.player_name===m.name))||[];let N=`Sind Sie sicher, dass Sie ${m.name} (${m.team}) lÃ¶schen mÃ¶chten?`;if(j.length>0&&(N+=`

Achtung: ${j.length} zugehÃ¶rige Sperre(n) werden ebenfalls gelÃ¶scht.`),m.goals&&m.goals>0&&(N+=`
Der Spieler hat ${m.goals} Tor(e) erzielt.`),!!confirm(N)){a(!0);try{await C(m.id),$.success(`Spieler ${m.name} erfolgreich gelÃ¶scht`),d(),j.length>0&&k()}catch(p){$.error("Fehler beim LÃ¶schen des Spielers: "+p.message)}finally{a(!1)}}},R=async m=>{const j=(c==null?void 0:c.filter(T=>T.match_id===m.id))||[],N=`AEK ${m.goalsa||0} - ${m.goalsb||0} Real`;let p=`Sind Sie sicher, dass Sie das Spiel vom ${new Date(m.date).toLocaleDateString("de-DE")} (${N}) lÃ¶schen mÃ¶chten?`;if(j.length>0&&(p+=`

Achtung: ${j.length} zugehÃ¶rige Transaktion(en) werden ebenfalls gelÃ¶scht.`),m.manofthematch&&(p+=`
Spieler des Spiels: ${m.manofthematch}`),!!confirm(p)){a(!0);try{const{deleteMatch:T}=await X(async()=>{const{deleteMatch:M}=await import("./matches-DamJWCot.js");return{deleteMatch:M}},__vite__mapDeps([0,1]));console.log(`Attempting to delete match ${m.id}`),await T(m.id),console.log(`Successfully deleted match ${m.id}`),$.success("Spiel erfolgreich gelÃ¶scht"),h(),f(),setTimeout(()=>{h(),f()},1e3)}catch(T){console.error("Error deleting match:",T);let M="Fehler beim LÃ¶schen des Spiels: ";T.message.includes("not found")?M+=`Spiel mit ID ${m.id} wurde nicht in der Datenbank gefunden. MÃ¶glicherweise wurde es bereits gelÃ¶scht.`:T.message.includes("Invalid match ID")?M+=`UngÃ¼ltige Spiel-ID: ${m.id}`:T.message.includes("fetch failed")||T.message.includes("network")?M+="Netzwerkfehler. Bitte Ã¼berprÃ¼fen Sie Ihre Internetverbindung.":M+=T.message,$.error(M)}finally{a(!1)}}},P=async m=>{var T;const j=m.player_name||(m.player_id&&v?(T=v.find(M=>M.id===m.player_id))==null?void 0:T.name:"Unbekannter Spieler"),N=Math.max(0,(m.totalgames||0)-(m.matchesserved||0));let p=`Sind Sie sicher, dass Sie die Sperre fÃ¼r ${j} lÃ¶schen mÃ¶chten?`;if(p+=`
Sperrtyp: ${m.type}`,N>0?p+=`
Noch ${N} Spiel(e) verbleibend`:p+=`
Sperre bereits abgesessen`,m.reason&&(p+=`
Grund: ${m.reason}`),!!confirm(p)){a(!0);try{await z(m.id),$.success(`Sperre fÃ¼r ${j} erfolgreich gelÃ¶scht`),k()}catch(M){$.error("Fehler beim LÃ¶schen der Sperre: "+M.message)}finally{a(!1)}}},K=async m=>{const j=m.match_id&&r?r.find(p=>p.id===m.match_id):null;let N=`Sind Sie sicher, dass Sie die Transaktion "${m.type}" lÃ¶schen mÃ¶chten?`;if(N+=`
Betrag: ${m.amount>0?"+":""}${m.amount}M â‚¬ (${m.team})`,m.date&&(N+=`
Datum: ${new Date(m.date).toLocaleDateString("de-DE")}`),m.info&&(N+=`
Info: ${m.info}`),j&&(N+=`
ZugehÃ¶riges Spiel: ${new Date(j.date).toLocaleDateString("de-DE")} (AEK ${j.goalsa||0} - ${j.goalsb||0} Real)`),!!confirm(N)){a(!0);try{await w(m.id),$.success("Transaktion erfolgreich gelÃ¶scht"),f()}catch(p){$.error("Fehler beim LÃ¶schen der Transaktion: "+p.message)}finally{a(!1)}}},_=m=>{const j=O.find(N=>N.value===m);return j?j.icon:"âš«"},V=m=>i?(m||[]).filter(j=>{var N,p,T;return((N=j.name)==null?void 0:N.toLowerCase().includes(i.toLowerCase()))||((p=j.team)==null?void 0:p.toLowerCase().includes(i.toLowerCase()))||((T=j.position)==null?void 0:T.toLowerCase().includes(i.toLowerCase()))}):m||[],J=m=>i?(m||[]).filter(j=>{var N;return new Date(j.date).toLocaleDateString("de-DE").includes(i)||((N=j.manofthematch)==null?void 0:N.toLowerCase().includes(i.toLowerCase()))}):m||[],te=m=>i?(m||[]).filter(j=>{var p,T,M,L;const N=j.player_name||(j.player_id&&v?(p=v.find(H=>H.id===j.player_id))==null?void 0:p.name:"");return(N==null?void 0:N.toLowerCase().includes(i.toLowerCase()))||((T=j.type)==null?void 0:T.toLowerCase().includes(i.toLowerCase()))||((M=j.team)==null?void 0:M.toLowerCase().includes(i.toLowerCase()))||((L=j.reason)==null?void 0:L.toLowerCase().includes(i.toLowerCase()))}):m||[],se=m=>i?(m||[]).filter(j=>{var N,p,T,M;return((N=j.type)==null?void 0:N.toLowerCase().includes(i.toLowerCase()))||((p=j.team)==null?void 0:p.toLowerCase().includes(i.toLowerCase()))||((T=j.info)==null?void 0:T.toLowerCase().includes(i.toLowerCase()))||((M=j.amount)==null?void 0:M.toString().includes(i))}):m||[],ae=()=>{const m=V(v);return!m||m.length===0?e.jsx("p",{className:"text-text-muted text-center py-4",children:i?"Keine Spieler gefunden":"Keine Spieler vorhanden"}):e.jsx("div",{className:"space-y-2",children:m.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:_(j.team)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:j.name}),e.jsxs("p",{className:"text-sm text-text-muted",children:[j.team," â€¢ ",j.position,j.goals!==void 0&&e.jsxs("span",{className:"ml-2",children:["â€¢ ",j.goals," Tore"]})]})]})]}),e.jsxs("button",{onClick:()=>B(j),disabled:s,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"LÃ¶schen"]})]},j.id))})},ge=()=>{const m=J(r);if(!m||m.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:i?"Keine Spiele gefunden":"Keine Spiele vorhanden"});const j=m.length>0&&m.every(p=>x.has(p.id)),N=x.size>0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:()=>b(r),className:"w-4 h-4 text-accent-primary focus:ring-accent-primary border-gray-300 rounded"}),e.jsxs("span",{className:"text-sm text-text-primary",children:[j?"Alle abwÃ¤hlen":"Alle auswÃ¤hlen"," (",m.length,")"]})]}),x.size>0&&e.jsxs("span",{className:"text-sm text-accent-primary font-medium",children:[x.size," ausgewÃ¤hlt"]})]}),N&&e.jsxs("button",{onClick:E,disabled:s,className:"btn-primary btn-sm bg-red-600 hover:bg-red-700 text-white disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),x.size," Spiele lÃ¶schen"]})]}),e.jsx("div",{className:"space-y-2",children:m.map(p=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-bg-tertiary rounded-lg",children:[e.jsx("label",{className:"flex items-center cursor-pointer",children:e.jsx("input",{type:"checkbox",checked:x.has(p.id),onChange:T=>o(p.id,T.target.checked),className:"w-4 h-4 text-accent-primary focus:ring-accent-primary border-gray-300 rounded"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-text-primary",children:["ID ",p.id," â€¢ ",new Date(p.date).toLocaleDateString("de-DE")]}),e.jsxs("p",{className:"text-sm text-text-muted",children:["AEK ",p.goalsa||0," - ",p.goalsb||0," Real"]}),p.manofthematch&&e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:[e.jsx("i",{className:"fas fa-star mr-1"}),"SdS: ",p.manofthematch]})]}),e.jsxs("button",{onClick:()=>R(p),disabled:s,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Einzeln lÃ¶schen"]})]})})]},p.id))})]})},be=()=>{const m=te(S);if(!m||m.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:i?"Keine Sperren gefunden":"Keine Sperren vorhanden"});const j=p=>{if(p.player_name)return p.player_name;if(p.player_id&&v){const T=v.find(M=>M.id===p.player_id);return T?T.name:"Unbekannter Spieler"}return"Unbekannter Spieler"},N=p=>{const T=(p.totalgames||0)-(p.matchesserved||0);return Math.max(0,T)};return e.jsx("div",{className:"space-y-2",children:m.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:_(p.team)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:j(p)}),e.jsxs("p",{className:"text-sm text-text-muted",children:[p.type," â€¢ ",p.totalgames||0," Spiele",N(p)>0?` (${N(p)} verbleibend)`:" (abgesessen)"]}),p.reason&&e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Grund: ",p.reason]})]})]}),e.jsxs("button",{onClick:()=>P(p),disabled:s,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"LÃ¶schen"]})]},p.id))})},pe=()=>{const m=se(c);if(!m||m.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:i?"Keine Transaktionen gefunden":"Keine Transaktionen vorhanden"});const j=N=>{if(!N.match_id||!r)return null;const p=r.find(T=>T.id===N.match_id);return p?`Match: ${new Date(p.date).toLocaleDateString("de-DE")} (AEK ${p.goalsa||0} - ${p.goalsb||0} Real)`:null};return e.jsx("div",{className:"space-y-2",children:m.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:_(N.team)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-text-primary",children:N.type}),e.jsxs("p",{className:"text-sm text-text-muted",children:[e.jsxs("span",{className:N.amount>0?"text-green-600":"text-red-600",children:[N.amount>0?"+":"",N.amount,"M â‚¬"]}),N.date&&e.jsxs("span",{className:"ml-2",children:["â€¢ ",new Date(N.date).toLocaleDateString("de-DE")]})]}),N.info&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:N.info}),j(N)&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[e.jsx("i",{className:"fas fa-futbol mr-1"}),j(N)]})]})]}),e.jsxs("button",{onClick:()=>K(N),disabled:s,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"LÃ¶schen"]})]},N.id))})},fe=()=>{switch(l){case"players":return ae();case"matches":return ge();case"bans":return be();case"transactions":return pe();default:return ae()}};return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Daten lÃ¶schen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Verwalten Sie die LÃ¶schung von Spielern, Spielen, Sperren und Transaktionen."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:n.map(m=>e.jsxs("button",{onClick:()=>y(m.id),className:`p-3 rounded-lg text-sm font-medium transition-colors ${l===m.id?"bg-accent-red text-white":"bg-bg-tertiary text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[e.jsx("i",{className:`${m.icon} mr-2`}),m.label]},m.id))}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:`${(re=n.find(m=>m.id===l))==null?void 0:re.label.replace(" lÃ¶schen","")} durchsuchen...`,value:i,onChange:m=>u(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent-red focus:border-transparent text-text-primary bg-bg-secondary"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-search text-text-muted"})}),i&&e.jsx("button",{onClick:()=>u(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-text-muted hover:text-text-primary",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[i&&e.jsxs("p",{className:"text-xs text-text-muted",children:[e.jsx("i",{className:"fas fa-filter mr-1"}),"Gefiltert nach: â€œ",i,"â€"]}),e.jsx("p",{className:"text-xs text-text-muted ml-auto",children:(()=>{const m=D();return i?`${m.filtered} von ${m.total} EintrÃ¤gen`:`${m.total} EintrÃ¤ge`})()})]})]}),e.jsxs("div",{className:"modern-card",children:[s&&e.jsx(ue,{message:"LÃ¶sche..."}),!s&&fe()]}),e.jsx("div",{className:"mt-6 modern-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-600 mr-3",children:e.jsx("i",{className:"fas fa-exclamation-triangle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-1",children:"Achtung"}),e.jsx("p",{className:"text-red-700 text-sm",children:"Das LÃ¶schen von Daten ist permanent und kann nicht rÃ¼ckgÃ¤ngig gemacht werden. Bitte Ã¼berprÃ¼fen Sie Ihre Auswahl sorgfÃ¤ltig, bevor Sie fortfahren."})]})]})})]})}function Ce({data:l=[],searchFields:t=[],filterOptions:s=[],onResults:a,placeholder:i="Suchen...",showCount:u=!0,searchExtractor:x}){const[g,v]=A.useState(""),[d,r]=A.useState({}),[h,S]=A.useState(""),[k,c]=A.useState("asc"),f=A.useRef(null),C=A.useMemo(()=>{let o=[...l];if(g.trim()){const b=g.toLowerCase().trim();o=o.filter(E=>{if(x){const D=x(E);return D&&D.toLowerCase().includes(b)}return t.some(D=>{const B=Z(E,D);return B&&B.toString().toLowerCase().includes(b)})})}return Object.entries(d).forEach(([b,E])=>{if(E&&E!=="all"){const D=s.find(B=>B.key===b);D&&D.filterFn?o=o.filter(B=>D.filterFn(B,E)):o=o.filter(B=>Z(B,b)===E)}}),h&&o.sort((b,E)=>{const D=Z(b,h),B=Z(E,h);let R=0;return typeof D=="number"&&typeof B=="number"?R=D-B:D instanceof Date&&B instanceof Date?R=D.getTime()-B.getTime():R=String(D).localeCompare(String(B)),k==="desc"?-R:R}),o},[l,g,d,h,k,t,s,x]);A.useEffect(()=>{a&&JSON.stringify(C)!==f.current&&(f.current=JSON.stringify(C),a(C))},[C,a]);const z=(o,b)=>{r(E=>({...E,[o]:b}))},w=o=>{h===o?c(k==="asc"?"desc":"asc"):(S(o),c("asc"))},n=()=>{v(""),r({}),S(""),c("asc")},y=g||Object.values(d).some(o=>o&&o!=="all")||h;return e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm mb-4",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:e.jsx("span",{className:"text-text-secondary","aria-hidden":"true",children:"ðŸ”"})}),e.jsx("input",{type:"text",value:g,onChange:o=>v(o.target.value),placeholder:`${i} (Strg+K fÃ¼r globale Suche)`,className:"w-full pl-10 pr-20 py-2 bg-bg-secondary border border-border-light rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary-green focus:border-transparent"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center gap-1 pr-3",children:[e.jsx("button",{onClick:()=>{const o=new CustomEvent("global-search-toggle");window.dispatchEvent(o)},className:"text-text-secondary hover:text-primary-green transition-colors p-1 rounded",title:"Globale Suche Ã¶ffnen (Strg+K)",children:e.jsx("span",{"aria-hidden":"true",children:"ðŸŒ"})}),g&&e.jsx("button",{onClick:()=>v(""),className:"text-text-secondary hover:text-text-primary transition-colors p-1 rounded",title:"Suchfeld leeren",children:e.jsx("span",{"aria-hidden":"true",children:"âœ•"})})]})]})}),(s.length>0||h)&&e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[s.map(o=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-text-primary",children:[o.label,":"]}),e.jsxs("select",{value:d[o.key]||"",onChange:b=>z(o.key,b.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"",children:"Alle"}),o.options.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))]})]},o.key)),t.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Sortieren:"}),e.jsxs("select",{value:h,onChange:o=>S(o.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"",children:"Standard"}),t.map(o=>e.jsx("option",{value:o,children:oe(o)},o))]}),h&&e.jsx("button",{onClick:()=>w(h),className:"px-2 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary hover:bg-bg-tertiary transition-colors duration-200",title:`Sortierung: ${k==="asc"?"Aufsteigend":"Absteigend"}`,children:k==="asc"?"â†‘":"â†“"})]}),y&&e.jsx("button",{onClick:n,className:"px-3 py-1 bg-red-100 text-red-800 border border-red-200 rounded text-sm hover:bg-red-200 transition-colors duration-200",children:"Filter zurÃ¼cksetzen"})]})}),u&&e.jsx("div",{className:"px-4 py-2 bg-bg-secondary border-b border-border-light",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-text-secondary",children:C.length===l.length?`${l.length} EintrÃ¤ge`:`${C.length} von ${l.length} EintrÃ¤gen`}),y&&e.jsxs("div",{className:"flex items-center gap-2",children:[g&&e.jsxs("span",{className:"bg-primary-green bg-opacity-10 text-primary-green px-2 py-1 rounded text-xs",children:['ðŸ” "',g,'"']}),Object.entries(d).filter(([,o])=>o&&o!=="all").map(([o,b])=>{const E=s.find(B=>B.key===o),D=E==null?void 0:E.options.find(B=>B.value===b);return e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:[E==null?void 0:E.label,": ",(D==null?void 0:D.label)||b]},o)}),h&&e.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:["ðŸ“Š ",oe(h)," ",k==="asc"?"â†‘":"â†“"]})]})]})})]})}function Z(l,t){return!l||!t?"":t.split(".").reduce((s,a)=>s&&s[a]!==void 0?s[a]:"",l)}function oe(l){return{name:"Name",team:"Team",position:"Position",value:"Wert",date:"Datum",goalsa:"AEK Tore",goalsb:"Real Tore",type:"Typ",amount:"Betrag",description:"Beschreibung",totalgames:"Gesamt Spiele",matchesserved:"Gespielte Spiele"}[l]||l.charAt(0).toUpperCase()+l.slice(1)}function de({onNavigate:l}){const[t,s]=A.useState("players"),[a,i]=A.useState([]),{data:u,loading:x}=I("players","*"),{data:g,loading:v}=I("matches","*",{order:{column:"date",ascending:!1}}),{data:d,loading:r}=I("transactions","*",{order:{column:"date",ascending:!1}}),{data:h,loading:S}=I("bans","*",{order:{column:"id",ascending:!1}}),k=x||v||r||S,c=[{id:"players",label:"Spieler",icon:"fas fa-users",data:u||[],searchFields:["name","position","team","value"],filterOptions:[{key:"team",label:"Team",options:[{value:"AEK",label:"AEK Athen"},{value:"Real",label:"Real Madrid"},{value:"Ehemalige",label:"Ehemalige"}]},{key:"position",label:"Position",options:[{value:"TH",label:"Torwart"},{value:"IV",label:"Innenverteidiger"},{value:"LV",label:"Linksverteidiger"},{value:"RV",label:"Rechtsverteidiger"},{value:"ZDM",label:"Defensives Mittelfeld"},{value:"ZM",label:"Zentrales Mittelfeld"},{value:"ZOM",label:"Offensives Mittelfeld"},{value:"LM",label:"Linkes Mittelfeld"},{value:"RM",label:"Rechtes Mittelfeld"},{value:"LF",label:"Linker FlÃ¼gel"},{value:"RF",label:"Rechter FlÃ¼gel"},{value:"ST",label:"StÃ¼rmer"}]}]},{id:"matches",label:"Spiele",icon:"fas fa-futbol",data:g||[],searchFields:["date","goalsa","goalsb","goalscorers","manofthematch","teama","teamb"],filterOptions:[],searchExtractor:w=>{const n=[];if(w.date&&n.push(new Date(w.date).toLocaleDateString("de-DE")),w.teama&&n.push(w.teama),w.teamb&&n.push(w.teamb),w.goalsa!==void 0&&n.push(w.goalsa.toString()),w.goalsb!==void 0&&n.push(w.goalsb.toString()),w.goalslista)try{const y=typeof w.goalslista=="string"?JSON.parse(w.goalslista):w.goalslista;Array.isArray(y)&&y.forEach(o=>{typeof o=="string"?n.push(o):o&&o.player&&n.push(o.player)})}catch{}if(w.goalslistb)try{const y=typeof w.goalslistb=="string"?JSON.parse(w.goalslistb):w.goalslistb;Array.isArray(y)&&y.forEach(o=>{typeof o=="string"?n.push(o):o&&o.player&&n.push(o.player)})}catch{}return w.manofthematch&&(n.push(w.manofthematch),n.push("Spieler des Spiels"),n.push("SdS")),n.join(" ").toLowerCase()}},{id:"transactions",label:"Transaktionen",icon:"fas fa-euro-sign",data:d||[],searchFields:["type","description","amount","date"],filterOptions:[{key:"type",label:"Typ",options:[{value:"transfer",label:"Transfer"},{value:"preis",label:"Preisgeld"},{value:"strafe",label:"Strafe"},{value:"sonstige",label:"Sonstige"}],filterFn:(w,n)=>{var b,E;const y=((b=w.type)==null?void 0:b.toLowerCase())||"",o=((E=w.description)==null?void 0:E.toLowerCase())||"";switch(n){case"transfer":return y.includes("transfer")||o.includes("transfer");case"preis":return y.includes("preis")||o.includes("preis")||w.amount>0;case"strafe":return y.includes("strafe")||o.includes("strafe");case"sonstige":return!y.includes("transfer")&&!y.includes("preis")&&!y.includes("strafe");default:return!0}}}]},{id:"bans",label:"Sperren",icon:"fas fa-ban",data:h||[],searchFields:["player_name","team","type","reason"],filterOptions:[{key:"team",label:"Team",options:[{value:"AEK",label:"AEK Athen"},{value:"Real",label:"Real Madrid"}]},{key:"type",label:"Typ",options:[{value:"Gelbe Karte",label:"Gelbe Karte"},{value:"Gelb-Rote Karte",label:"Gelb-Rote Karte"},{value:"Rote Karte",label:"Rote Karte"},{value:"Verletzung",label:"Verletzung"}]}]}],f=c.find(w=>w.id===t),C=(w,n)=>{switch(n){case"players":l==null||l("squad");break;case"matches":l==null||l("matches");break;case"transactions":l==null||l("finances");break;case"bans":l==null||l("bans");break}},z=()=>{const w=a.length>0?a:f.data;return w.length===0?e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("i",{className:`${f.icon} text-4xl mb-2`}),e.jsxs("p",{children:["Keine ",f.label.toLowerCase()," gefunden"]})]}):e.jsx("div",{className:"divide-y divide-border-light",children:w.map(n=>e.jsxs("button",{onClick:()=>C(n,t),className:"w-full p-4 hover:bg-bg-secondary transition-colors text-left focus:outline-none focus:ring-2 focus:ring-primary-green focus:ring-inset",children:[t==="players"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:n.name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[n.position," â€¢ ",n.team," â€¢ ",n.value||0,"M â‚¬"]}),(n.goals||0)>0&&e.jsxs("p",{className:"text-xs text-primary-green",children:["âš½ ",n.goals||0," Tore"]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[n.value||0,"M â‚¬"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zum Spieler â†’"})]})]}),t==="matches"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:new Date(n.date).toLocaleDateString("de-DE")}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[n.teama||"AEK"," ",n.goalsa||0," - ",n.goalsb||0," ",n.teamb||"Real"]}),(()=>{const y=[];try{if(n.goalslista){const o=typeof n.goalslista=="string"?JSON.parse(n.goalslista):n.goalslista;Array.isArray(o)&&o.forEach(b=>{const E=typeof b=="string"?b:b==null?void 0:b.player;E&&y.push(`${E} (AEK)`)})}if(n.goalslistb){const o=typeof n.goalslistb=="string"?JSON.parse(n.goalslistb):n.goalslistb;Array.isArray(o)&&o.forEach(b=>{const E=typeof b=="string"?b:b==null?void 0:b.player;E&&y.push(`${E} (Real)`)})}}catch{}return y.length>0?e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["âš½ ",y.slice(0,3).join(", "),y.length>3?"...":""]}):null})(),n.manofthematch&&e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:["â­ SdS: ",n.manofthematch]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[(n.goalsa||0)+(n.goalsb||0)," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zum Spiel â†’"})]})]}),t==="transactions"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:n.type||"Transaktion"}),e.jsx("p",{className:"text-sm text-text-secondary",children:n.description||"Keine Beschreibung"}),e.jsx("p",{className:"text-xs text-text-secondary",children:new Date(n.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:`text-lg font-bold ${(n.amount||0)>=0?"text-green-600":"text-red-600"}`,children:[(n.amount||0)>0?"+":"",n.amount||0,"â‚¬"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zu Finanzen â†’"})]})]}),t==="bans"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:n.player_name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[n.team," â€¢ ",n.type]}),n.reason&&e.jsx("p",{className:"text-xs text-text-secondary",children:n.reason})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-sm text-accent-red",children:[n.duration||1," Spiel",(n.duration||1)!==1?"e":""]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zu Sperren â†’"})]})]})]},n.id))})};return k?e.jsx(ue,{message:"Lade Daten..."}):e.jsxs("div",{className:"p-4 pb-20 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-1",children:"ðŸ” Globale Suche"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Durchsuche alle Daten zentral an einem Ort"})]}),e.jsx("div",{className:"icon-only-nav flex overflow-x-auto space-x-2 pb-2",children:c.map(w=>e.jsxs("button",{onClick:()=>{s(w.id),i([])},className:`search-nav-button flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${t===w.id?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary"}`,title:w.label,"aria-label":w.label,children:[e.jsx("i",{className:w.icon}),e.jsx("span",{className:"font-medium hidden sm:inline",children:w.label}),e.jsxs("span",{className:"text-xs opacity-75",children:["(",w.data.length,")"]})]},w.id))}),e.jsx(Ce,{data:f.data,searchFields:f.searchFields,filterOptions:f.filterOptions,searchExtractor:f.searchExtractor,onResults:i,placeholder:`${f.label} durchsuchen...`}),e.jsxs("div",{className:"modern-card",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("h4",{className:"font-medium text-text-primary",children:[a.length>0?"Suchergebnisse":`Alle ${f.label}`,e.jsxs("span",{className:"text-text-secondary ml-2",children:["(",a.length>0?a.length:f.data.length,")"]})]})}),z()]})]})}function Ae(){const{theme:l,autoMode:t,toggleTheme:s,setAutoTheme:a,setManualTheme:i}=ye();return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"ðŸŽ¨"}),"Design & Darstellung"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Darstellungsmodus"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>a(!0),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${t?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"ðŸŒ—"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Automatisch"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Folgt den Systemeinstellungen"})]}),e.jsxs("button",{onClick:()=>i("light"),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${!t&&l==="light"?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"â˜€ï¸"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Hell"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Helle Darstellung"})]}),e.jsxs("button",{onClick:()=>i("dark"),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${!t&&l==="dark"?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"ðŸŒ™"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Dunkel"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Dunkle Darstellung"})]})]})]}),e.jsx("div",{className:"bg-bg-tertiary rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Aktueller Modus"}),e.jsx("div",{className:"text-xs text-text-muted",children:t?`Automatisch (${l==="dark"?"Dunkel":"Hell"} - basierend auf Systemeinstellung)`:`Manuell (${l==="dark"?"Dunkel":"Hell"})`})]}),e.jsx("div",{className:"text-2xl",children:l==="dark"?"ðŸŒ™":"â˜€ï¸"})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Schnellwechsel"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Wechselt zwischen Hell und Dunkel"})]}),e.jsxs("button",{onClick:s,className:"bg-primary-green hover:bg-primary-green-dark text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center space-x-2",children:[e.jsx("span",{children:l==="dark"?"â˜€ï¸":"ðŸŒ™"}),e.jsxs("span",{className:"text-sm font-medium",children:["Zu ",l==="dark"?"Hell":"Dunkel"]})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"ðŸ’¡"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"Darstellungshinweise"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Automatisch:"})," Wechselt automatisch basierend auf Ihren Systemeinstellungen"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Hell:"})," Optimiert fÃ¼r helle Umgebungen und bessere Akkulaufzeit"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Dunkel:"})," Reduziert Augenbelastung bei schwachem Licht"]}),e.jsx("p",{children:"â€¢ Alle Karten, Modals und UI-Elemente passen sich automatisch an"})]})]})]})})]})})}function Te(){const[l,t]=A.useState({primaryGreen:"#10B981",primaryGreenDark:"#059669",primaryGreenLight:"#34D399",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#3B82F6"}),[s,a]=A.useState([{name:"Standard",colors:{primaryGreen:"#10B981",primaryGreenDark:"#059669",primaryGreenLight:"#34D399",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#3B82F6"}},{name:"AEK Blau",colors:{primaryGreen:"#1E40AF",primaryGreenDark:"#1E3A8A",primaryGreenLight:"#3B82F6",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#60A5FA"}},{name:"Real Rot",colors:{primaryGreen:"#DC2626",primaryGreenDark:"#B91C1C",primaryGreenLight:"#EF4444",accentOrange:"#F59E0B",accentRed:"#F87171",accentBlue:"#3B82F6"}},{name:"Dunkles Gold",colors:{primaryGreen:"#D97706",primaryGreenDark:"#B45309",primaryGreenLight:"#F59E0B",accentOrange:"#FBBF24",accentRed:"#EF4444",accentBlue:"#3B82F6"}}]),[i,u]=A.useState(!1),[x,g]=A.useState("Standard");A.useEffect(()=>{const c=localStorage.getItem("fifa-tracker-custom-colors");if(c)try{const f=JSON.parse(c);t(f),v(f)}catch(f){console.error("Error loading custom colors:",f)}},[]);const v=c=>{const f=document.documentElement;f.style.setProperty("--primary-green",c.primaryGreen),f.style.setProperty("--primary-green-dark",c.primaryGreenDark),f.style.setProperty("--primary-green-light",c.primaryGreenLight),f.style.setProperty("--accent-orange",c.accentOrange),f.style.setProperty("--accent-red",c.accentRed),f.style.setProperty("--accent-blue",c.accentBlue)},d=(c,f)=>{const C={...l,[c]:f};t(C),u(!0),g("Benutzerdefiniert"),v(C)},r=c=>{t(c.colors),g(c.name),u(!0),v(c.colors)},h=()=>{localStorage.setItem("fifa-tracker-custom-colors",JSON.stringify(l)),u(!1);const c=new CustomEvent("show-toast",{detail:{message:"Farbschema gespeichert!",type:"success"}});window.dispatchEvent(c)},S=()=>{const c=s[0].colors;t(c),g("Standard"),u(!0),v(c)},k=({label:c,colorKey:f,value:C,description:z})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary",children:c}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"color",value:C,onChange:w=>d(f,w.target.value),className:"w-12 h-12 rounded-lg border-2 border-border-medium cursor-pointer appearance-none",style:{background:C}}),e.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-lg border-2 border-white pointer-events-none shadow-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",value:C,onChange:w=>d(f,w.target.value),className:"w-full px-3 py-2 text-sm border border-border-medium rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green/50",placeholder:"#000000"}),z&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:z})]})]})]});return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"ðŸŽ¨"}),"Farbkonfiguration"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-3",children:"Vorgefertigte Farbschemata"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:s.map(c=>e.jsxs("button",{onClick:()=>r(c),className:`p-3 rounded-lg border-2 transition-all duration-300 ${x===c.name?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:c.colors.primaryGreen}}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:c.colors.accentRed}}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:c.colors.accentBlue}})]}),e.jsx("div",{className:"text-xs font-medium text-text-primary",children:c.name})]},c.name))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-text-primary",children:"Individuelle Farbanpassung"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(k,{label:"PrimÃ¤rfarbe",colorKey:"primaryGreen",value:l.primaryGreen,description:"Hauptfarbe fÃ¼r Buttons und Akzente"}),e.jsx(k,{label:"PrimÃ¤rfarbe (Dunkel)",colorKey:"primaryGreenDark",value:l.primaryGreenDark,description:"Dunklere Variante fÃ¼r Hover-Effekte"}),e.jsx(k,{label:"PrimÃ¤rfarbe (Hell)",colorKey:"primaryGreenLight",value:l.primaryGreenLight,description:"Hellere Variante fÃ¼r Highlights"}),e.jsx(k,{label:"Akzentfarbe Orange",colorKey:"accentOrange",value:l.accentOrange,description:"Orange Akzente und Warnungen"}),e.jsx(k,{label:"Akzentfarbe Rot",colorKey:"accentRed",value:l.accentRed,description:"Rote Akzente und Fehler"}),e.jsx(k,{label:"Akzentfarbe Blau",colorKey:"accentBlue",value:l.accentBlue,description:"Blaue Akzente und Informationen"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-border-light",children:[e.jsx("button",{onClick:h,disabled:!i,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all duration-300 ${i?"bg-primary-green hover:bg-primary-green-dark text-white":"bg-border-medium text-text-muted cursor-not-allowed"}`,children:i?"Farben speichern":"Keine Ã„nderungen"}),e.jsx("button",{onClick:S,className:"py-3 px-4 bg-bg-tertiary hover:bg-border-light text-text-primary border border-border-medium rounded-lg font-medium transition-all duration-300",children:"ZurÃ¼cksetzen"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-bg-tertiary rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-text-primary mb-3",children:"Vorschau"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{className:"btn-primary text-sm py-2 px-4",style:{backgroundColor:l.primaryGreen,borderColor:l.primaryGreen},children:"PrimÃ¤r Button"}),e.jsx("div",{className:"px-3 py-2 rounded text-white text-sm",style:{backgroundColor:l.accentRed},children:"Rot Akzent"}),e.jsx("div",{className:"px-3 py-2 rounded text-white text-sm",style:{backgroundColor:l.accentBlue},children:"Blau Akzent"}),e.jsx("div",{className:"px-3 py-2 rounded text-white text-sm",style:{backgroundColor:l.accentOrange},children:"Orange Akzent"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"ðŸ’¡"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"Farbhinweise"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("p",{children:"â€¢ Ã„nderungen werden sofort in der Vorschau angezeigt"}),e.jsx("p",{children:"â€¢ Gespeicherte Farben werden automatisch bei der nÃ¤chsten Anmeldung geladen"}),e.jsx("p",{children:"â€¢ Verwenden Sie Hex-Codes (#RRGGBB) fÃ¼r prÃ¤zise Farben"}),e.jsx("p",{children:"â€¢ Team-spezifische Presets helfen bei der schnellen Anpassung"})]})]})]})})]})})}class De{constructor(){this.isSupported="serviceWorker"in navigator&&"PushManager"in window,this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent),this.permission=Notification.permission,this.subscription=null,this.settings=this.loadSettings()}async initialize(){if(!this.isSupported)return console.warn("Push notifications not supported"),!1;try{if("serviceWorker"in navigator){const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",t)}return this.permission=Notification.permission,!0}catch(t){return console.error("Failed to initialize notifications:",t),!1}}async requestPermission(){if(!this.isSupported)throw new Error("Notifications not supported");if(this.permission==="granted")return!0;try{if(this.isIOS){const t=await Notification.requestPermission();return this.permission=t,t==="granted"}else{const t=await Notification.requestPermission();return this.permission=t,t==="granted"}}catch(t){return console.error("Permission request failed:",t),!1}}async subscribe(){if(!this.isSupported||this.permission!=="granted")throw new Error("Cannot subscribe: permission not granted");try{const t=await navigator.serviceWorker.ready,s=await t.pushManager.getSubscription();if(s)return this.subscription=s,s;const a=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.getVAPIDKey()});return this.subscription=a,await this.sendSubscriptionToServer(a),a}catch(t){throw console.error("Subscription failed:",t),t}}async unsubscribe(){if(!this.subscription)return!0;try{return await this.subscription.unsubscribe(),await this.removeSubscriptionFromServer(this.subscription),this.subscription=null,!0}catch(t){return console.error("Unsubscribe failed:",t),!1}}async scheduleMatchReminder(t,s=30){if(!this.settings.matchReminders)return;const a=new Date(t.date),i=new Date(a.getTime()-s*60*1e3),u=new Date;if(i<=u)return;const x=i.getTime()-u.getTime();setTimeout(()=>{this.showNotification({title:"âš½ FIFA Match Reminder",body:`Match starting in ${s} minutes: AEK vs Real Madrid`,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`match-reminder-${t.id}`,data:{type:"match_reminder",matchId:t.id,url:"/matches"},actions:[{action:"view",title:"View Match",icon:"/assets/icon-180.png"},{action:"dismiss",title:"Dismiss"}]})},x)}async notifyAchievement(t){this.settings.achievements&&await this.showNotification({title:"ðŸ† Achievement Unlocked!",body:t.title,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`achievement-${t.id}`,data:{type:"achievement",achievementId:t.id,url:"/stats"}})}async notifyGoal(t,s,a){this.settings.goals&&await this.showNotification({title:"âš½ GOAL!",body:`${a} scored for ${s}!`,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`goal-${t.id}-${Date.now()}`,data:{type:"goal",matchId:t.id,url:"/matches"}})}async notifyEvent(t){this.settings.events&&await this.showNotification({title:`ðŸŽ‰ ${t.name}`,body:t.description,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`event-${t.id}`,data:{type:"event",eventId:t.id,url:"/events"}})}async showNotification(t){if(this.permission!=="granted"){console.warn("Cannot show notification: permission not granted");return}try{"serviceWorker"in navigator?await(await navigator.serviceWorker.ready).showNotification(t.title,{body:t.body,icon:t.icon,badge:t.badge,tag:t.tag,data:t.data,actions:t.actions||[],vibrate:this.isIOS?void 0:[200,100,200],requireInteraction:!1,silent:!1}):new Notification(t.title,{body:t.body,icon:t.icon,tag:t.tag,data:t.data})}catch(s){console.error("Failed to show notification:",s)}}updateSettings(t){this.settings={...this.settings,...t},localStorage.setItem("fifa-tracker-notification-settings",JSON.stringify(this.settings))}loadSettings(){const t=localStorage.getItem("fifa-tracker-notification-settings"),s={matchReminders:!0,goals:!0,achievements:!0,events:!0,reminderTime:30};return t?{...s,...JSON.parse(t)}:s}getVAPIDKey(){return"BEl62iUYgUivxIkv69yViEuiBIa40HI0DLLuxazjqak_7kYDjLE2cI5GkJM-5z9z9LzsQI7JClZgZmKjgKrRxfQ"}async sendSubscriptionToServer(t){try{console.log("Would send subscription to server:",t)}catch(s){console.error("Failed to send subscription to server:",s)}}async removeSubscriptionFromServer(t){try{console.log("Would remove subscription from server:",t)}catch(s){console.error("Failed to remove subscription from server:",s)}}async testNotification(){await this.showNotification({title:"ðŸ§ª Test Notification",body:"FIFA Tracker notifications are working!",icon:"/assets/icon-180.png",tag:"test-notification"})}getStatus(){return{supported:this.isSupported,permission:this.permission,subscribed:!!this.subscription,isIOS:this.isIOS,settings:this.settings}}}const G=new De;typeof window<"u"&&(window.NotificationService=G,G.initialize());function Be(){const[l,t]=A.useState(G.getStatus()),[s,a]=A.useState(G.settings),[i,u]=A.useState(!1);A.useEffect(()=>{t(G.getStatus()),a(G.settings)},[]);const x=async()=>{u(!0);try{await G.requestPermission()&&await G.subscribe(),t(G.getStatus())}catch(r){console.error("Permission request failed:",r);const h=new CustomEvent("show-toast",{detail:{message:"Benachrichtigungen konnten nicht aktiviert werden.",type:"error"}});window.dispatchEvent(h)}finally{u(!1)}},g=async()=>{u(!0);try{await G.unsubscribe(),t(G.getStatus())}catch(r){console.error("Unsubscribe failed:",r)}finally{u(!1)}},v=(r,h)=>{const S={...s,[r]:h};a(S),G.updateSettings(S)},d=async()=>{try{await G.testNotification();const r=new CustomEvent("show-toast",{detail:{message:"Test-Benachrichtigung gesendet!",type:"success"}});window.dispatchEvent(r)}catch(r){console.error("Test notification failed:",r)}};return l.supported?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"ðŸ“±"}),"Push-Benachrichtigungen"]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Status"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[l.permission==="granted"?"Benachrichtigungen aktiviert":l.permission==="denied"?"Benachrichtigungen blockiert":"Berechtigung ausstehend",l.isIOS&&" (iOS)"]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${l.permission==="granted"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300":l.permission==="denied"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-300"}`,children:l.permission==="granted"?"Aktiv":l.permission==="denied"?"Blockiert":"Ausstehend"})]})}),l.permission!=="granted"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("button",{onClick:x,disabled:i||l.permission==="denied",className:`w-full py-3 px-4 rounded-lg font-medium transition-all duration-300 ${l.permission==="denied"?"bg-border-medium text-text-muted cursor-not-allowed":"bg-primary-green hover:bg-primary-green-dark text-white"}`,children:i?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Aktiviere..."]}):l.permission==="denied"?"In Browsereinstellungen aktivieren":"Benachrichtigungen aktivieren"}),l.permission==="denied"&&e.jsx("p",{className:"text-xs text-text-muted mt-2 text-center",children:"Ã–ffnen Sie die Browsereinstellungen und erlauben Sie Benachrichtigungen fÃ¼r diese Seite."})]}),l.permission==="granted"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-text-primary",children:"Benachrichtigungseinstellungen"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"âš½ Spiel-Erinnerungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Erinnerungen vor Spielbeginn"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.matchReminders,onChange:r=>v("matchReminders",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),s.matchReminders&&e.jsxs("div",{className:"ml-4 p-3 bg-bg-tertiary rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Erinnerungszeit (Minuten vor Spielbeginn)"}),e.jsxs("select",{value:s.reminderTime,onChange:r=>v("reminderTime",parseInt(r.target.value)),className:"w-full px-3 py-2 text-sm border border-border-medium rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green/50",children:[e.jsx("option",{value:5,children:"5 Minuten"}),e.jsx("option",{value:15,children:"15 Minuten"}),e.jsx("option",{value:30,children:"30 Minuten"}),e.jsx("option",{value:60,children:"1 Stunde"}),e.jsx("option",{value:120,children:"2 Stunden"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"âš½ Tor-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei Toren wÃ¤hrend Live-Matches"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.goals,onChange:r=>v("goals",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"ðŸ† Achievement-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei freigeschalteten Erfolgen"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.achievements,onChange:r=>v("achievements",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"ðŸŽ‰ Event-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei neuen Events und Turnieren"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.events,onChange:r=>v("events",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-border-light",children:[e.jsx("button",{onClick:d,className:"flex-1 py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-300",children:"Test-Benachrichtigung"}),e.jsx("button",{onClick:g,disabled:i,className:"py-2 px-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-all duration-300 disabled:opacity-50",children:i?"Deaktiviere...":"Deaktivieren"})]})]}),l.isIOS&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"ðŸ“±"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"iOS-Hinweis"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("p",{children:'â€¢ Installieren Sie die App Ã¼ber "Zum Home-Bildschirm hinzufÃ¼gen" fÃ¼r beste Benachrichtigungen'}),e.jsx("p",{children:"â€¢ Benachrichtigungen funktionieren nur bei aktiver App oder im Hintergrund"}),e.jsx("p",{children:"â€¢ ÃœberprÃ¼fen Sie die iOS-Einstellungen fÃ¼r App-Benachrichtigungen"})]})]})]})})]})}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"ðŸ“±"}),"Push-Benachrichtigungen"]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-yellow-500 text-xl flex-shrink-0",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:"Nicht unterstÃ¼tzt"}),e.jsx("div",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"Ihr Browser unterstÃ¼tzt keine Push-Benachrichtigungen. Verwenden Sie einen modernen Browser oder installieren Sie die App fÃ¼r Benachrichtigungen."})]})]})})]})})}function Me(){const[l,t]=A.useState({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),[s,a]=A.useState(!1),[i,u]=A.useState(!0);A.useEffect(()=>{x()},[]);const x=async()=>{try{u(!0);const r=await Y.getManagers();if(r.data&&r.data.length>=2){const h=r.data.find(k=>k.id===1)||{name:"Alexander",gewicht:110},S=r.data.find(k=>k.id===2)||{name:"Philip",gewicht:105};t({aek:{name:h.name,age:30,weight:h.gewicht},real:{name:S.name,age:30,weight:S.gewicht}})}}catch(r){console.error("Error loading manager settings from database:",r)}finally{u(!1)}},g=(r,h,S)=>{t(k=>({...k,[r]:{...k[r],[h]:h==="name"?S:parseInt(S)||0}})),a(!0)},v=async()=>{try{u(!0);const r={name:l.aek.name,gewicht:l.aek.weight},h={name:l.real.name,gewicht:l.real.weight};await Y.update("managers",r,1),await Y.update("managers",h,2),a(!1),window.dispatchEvent(new CustomEvent("managerSettingsChanged"));const S=document.createElement("div");S.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",S.textContent="Manager-Einstellungen gespeichert!",document.body.appendChild(S),setTimeout(()=>{document.body.contains(S)&&document.body.removeChild(S)},3e3)}catch(r){console.error("Error saving manager settings:",r);const h=document.createElement("div");h.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",h.textContent="Fehler beim Speichern!",document.body.appendChild(h),setTimeout(()=>{document.body.contains(h)&&document.body.removeChild(h)},3e3)}finally{u(!1)}},d=()=>{t({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),a(!0)};return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx(Ae,{}),e.jsx(Te,{}),e.jsx(Be,{}),i?e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-green"}),e.jsx("span",{className:"ml-2 text-text-muted",children:"Lade Manager-Einstellungen..."})]})}):e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"ðŸ† Team-Manager Einstellungen"}),s&&e.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Ungespeicherte Ã„nderungen"})]}),e.jsx("div",{className:"text-sm text-text-muted mb-6",children:"Hier kÃ¶nnen Sie die Daten der Team-Manager fÃ¼r die BAK-Berechnung anpassen."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("h4",{className:"font-medium text-blue-800 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded mr-2"}),"AEK Manager"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:l.aek.name,onChange:r=>g("aek","name",r.target.value),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Manager Name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alter"}),e.jsx("input",{type:"number",min:"18",max:"80",value:l.aek.age,onChange:r=>g("aek","age",r.target.value),onFocus:r=>r.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:l.aek.weight,onChange:r=>g("aek","weight",r.target.value),onFocus:r=>r.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border border-red-200 rounded-lg bg-red-50",children:[e.jsxs("h4",{className:"font-medium text-red-800 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-red-600 rounded mr-2"}),"Real Manager"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:l.real.name,onChange:r=>g("real","name",r.target.value),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Manager Name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alter"}),e.jsx("input",{type:"number",min:"18",max:"80",value:l.real.age,onChange:r=>g("real","age",r.target.value),onFocus:r=>r.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:l.real.weight,onChange:r=>g("real","weight",r.target.value),onFocus:r=>r.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-border-light",children:[e.jsx("button",{onClick:d,className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors",children:"Standardwerte wiederherstellen"}),e.jsx("button",{onClick:v,disabled:!s||i,className:`px-4 py-2 text-sm rounded-lg transition-colors ${s&&!i?"bg-primary-green text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i?"Speichern...":"Einstellungen speichern"})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Hinweis:"})," Diese Einstellungen werden fÃ¼r die BAK-Berechnung in der Statistik verwendet. Die Werte werden in der Datenbank gespeichert."]})})]})]})}function Fe(){const[l,t]=A.useState(()=>{const d=localStorage.getItem("eventsTabEnabled");return d!==null?JSON.parse(d):!1}),[s,a]=A.useState({title:"",message:"",type:"general"}),[i,u]=A.useState(()=>{const d=localStorage.getItem("customEvents");return d?JSON.parse(d):[]}),x=d=>{t(d),localStorage.setItem("eventsTabEnabled",JSON.stringify(d)),setTimeout(()=>{window.location.reload()},500)},g=()=>{if(!s.title||!s.message){alert("Bitte Titel und Nachricht eingeben");return}me(s.type,{title:s.title,message:s.message,timestamp:new Date().toISOString(),custom:!0});const r=[{id:Date.now(),...s,timestamp:new Date().toISOString()},...i.slice(0,9)];u(r),localStorage.setItem("customEvents",JSON.stringify(r)),a({title:"",message:"",type:"general"}),alert("Benachrichtigung gesendet!")},v=[{value:"general",label:"ðŸ“¢ Allgemein",color:"bg-gray-500"},{value:"match-created",label:"âš½ Spiel erstellt",color:"bg-green-500"},{value:"player-ban",label:"ðŸš« Spieler gesperrt",color:"bg-red-500"},{value:"financial-milestone",label:"ðŸ’° Finanzmeilenstein",color:"bg-yellow-500"},{value:"achievement-unlocked",label:"ðŸ… Achievement",color:"bg-purple-500"},{value:"system-update",label:"ðŸ”„ System Update",color:"bg-blue-500"}];return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ðŸŽ‰"}),"Events Tab Konfiguration"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-secondary rounded-lg border border-border-light",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:"Events Tab anzeigen"}),e.jsx("div",{className:"text-sm text-text-muted",children:"Zeigt den Events Tab in der Navigation an oder blendet ihn aus"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:d=>x(d.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Hinweis:"})," Der Events Tab ist standardmÃ¤ÃŸig ausgeblendet. Nach dem Aktivieren wird die Seite neu geladen um die Navigation zu aktualisieren."]})})]})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ðŸ“¢"}),"Individuelle Push-Benachrichtigungen"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Nachrichtentyp"}),e.jsx("select",{value:s.type,onChange:d=>a(r=>({...r,type:d.target.value})),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors",children:v.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Titel"}),e.jsx("input",{type:"text",value:s.title,onChange:d=>a(r=>({...r,title:d.target.value})),placeholder:"z.B. Neues Tournament startet",className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Nachricht"}),e.jsx("textarea",{value:s.message,onChange:d=>a(r=>({...r,message:d.target.value})),placeholder:"z.B. Das Weihnachts-Tournament beginnt morgen um 19:00 Uhr!",rows:3,className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors resize-none"})]}),e.jsxs("button",{onClick:g,disabled:!s.title||!s.message,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"fas fa-paper-plane mr-2"}),"Benachrichtigung senden"]})]})]}),i.length>0&&e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ðŸ“‹"}),"Gesendete Benachrichtigungen"]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:i.map(d=>{var r;return e.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg border border-border-light",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-text-primary text-sm flex items-center",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${((r=v.find(h=>h.value===d.type))==null?void 0:r.color)||"bg-gray-500"}`}),d.title]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:d.message}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:new Date(d.timestamp).toLocaleString("de-DE")})]})})},d.id)})}),i.length>=10&&e.jsx("div",{className:"text-xs text-text-muted mt-2 text-center",children:"Nur die letzten 10 Benachrichtigungen werden angezeigt"})]})]})}function Ke({onLogout:l,onNavigate:t,showHints:s=!1}){const[a,i]=A.useState("search"),u=[{id:"search",label:"Globale Suche",icon:"fas fa-search"},{id:"matches",label:"Spiele hinzufÃ¼gen",icon:"fas fa-futbol"},{id:"bans",label:"Sperren hinzufÃ¼gen",icon:"fas fa-ban"},{id:"players",label:"Spieler hinzufÃ¼gen",icon:"fas fa-users"},{id:"transactions",label:"Transaktionen hinzufÃ¼gen",icon:"fas fa-euro-sign"},{id:"settings",label:"Team-Einstellungen",icon:"fas fa-cog"},{id:"events",label:"Events & Benachrichtigungen",icon:"fas fa-bell"},{id:"delete",label:"Daten lÃ¶schen",icon:"fas fa-trash"}],x=()=>{switch(a){case"search":return e.jsx(de,{onNavigate:t});case"matches":return e.jsx(Ne,{});case"bans":return e.jsx(we,{});case"players":return e.jsx(Se,{});case"transactions":return e.jsx(ke,{});case"settings":return e.jsx(Me,{});case"events":return e.jsx(Fe,{});case"delete":return e.jsx(Ee,{});default:return e.jsx(de,{onNavigate:t})}};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 bg-bg-secondary border-b border-border-light flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-1",children:"Verwaltung"}),e.jsx("p",{className:"text-text-muted text-sm",children:"HinzufÃ¼gen und verwalten von Daten"})]}),e.jsxs("button",{onClick:l,className:"flex items-center px-3 py-2 bg-accent-red text-white rounded-lg hover:bg-red-600 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50","aria-label":"Abmelden",children:[e.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),e.jsx("span",{className:"text-sm",children:"Logout"})]})]}),e.jsx("div",{className:"bg-bg-secondary border-b border-border-light",children:e.jsx("div",{className:"flex overflow-x-auto",children:u.map(g=>e.jsxs("button",{onClick:()=>i(g.id),className:`flex-shrink-0 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${a===g.id?"text-primary-green border-b-2 border-primary-green bg-bg-primary":"text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[e.jsx("i",{className:`${g.icon} mr-2`}),g.label]},g.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:x()})]})}export{Ke as default};
