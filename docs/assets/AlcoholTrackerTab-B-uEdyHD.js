import{r as b,u as v,j as e,L as N}from"./index-21NIkkZC.js";import{l as y,u as k,a as w,g as G}from"./alcoholCalculatorPersistence-3htd2_wg.js";function T({onNavigate:A}){const[s,h]=b.useState({playerWeight:70,playerGender:"male",mode:"automatic",aekGoals:0,realGoals:0,beerCount:0}),{data:o,loading:p}=v("matches","*",{order:{column:"date",ascending:!1}});b.useEffect(()=>{const t=y();h(r=>({...r,...t})),o&&k(o)},[o]);const n=(t,r)=>{const a={...s,[t]:r};h(a),w(a)},d=()=>{const t=new Date,r=new Date;r.setDate(t.getDate()-2);const a=new Date(t.getFullYear(),t.getMonth(),t.getDate());return r.setHours(0,0,0,0),(o==null?void 0:o.filter(l=>{const c=new Date(l.date),i=new Date(c.getFullYear(),c.getMonth(),c.getDate());return i>=r&&i<=a}))||[]},x=()=>{if(s.mode==="automatic"){const r=d().reduce((a,l)=>a+(l.goalsb||0),0);return Math.floor(r/2)*2}return 0},g=()=>{if(s.mode==="automatic"){const r=d().reduce((a,l)=>a+(l.goalsa||0),0);return Math.floor(r/2)*2}return 0},m=()=>s.mode==="automatic"?x()+g():Math.floor((s.aekGoals+s.realGoals)/2)*2,j=(t,r,a=null,l=0)=>{if(!r.weight||t===0&&l===0)return"0.00";let c=t*10*.4*.789;c+=l*.5*1e3*.05*.789;const i=r.gender==="female"?.6:.7;let u=c/(i*r.weight);if(a){const f=G(a)*.15;u=Math.max(0,u-f)}return u.toFixed(2)};return p?e.jsx(N,{message:"Lade Alkohol-Tracker..."}):e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"üç∫ Alkohol-Tracker"}),e.jsx("p",{className:"text-text-muted",children:"Verfolgen Sie den Alkoholkonsum basierend auf den Spielregeln: F√ºr jedes zweite Tor muss der Gegner 2cl Schnaps (40%) trinken."})]}),e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üì± Modus"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"automatic",checked:s.mode==="automatic",onChange:t=>n("mode",t.target.value),className:"w-4 h-4 text-primary-green"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:"ü§ñ Automatisch"}),e.jsx("div",{className:"text-sm text-text-muted",children:"Berechnung basierend auf Spielen der letzten 2 Tage"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"manual",checked:s.mode==="manual",onChange:t=>n("mode",t.target.value),className:"w-4 h-4 text-primary-green"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:"‚úã Manuell"}),e.jsx("div",{className:"text-sm text-text-muted",children:"Manuelle Eingabe der Tor-Anzahl"})]})]})]})]}),s.mode==="manual"&&e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"‚öΩ Tore eingeben"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"üîµ AEK Tore"}),e.jsx("input",{type:"number",min:"0",value:s.aekGoals,onChange:t=>n("aekGoals",parseInt(t.target.value)||0),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"üî¥ Real Tore"}),e.jsx("input",{type:"number",min:"0",value:s.realGoals,onChange:t=>n("realGoals",parseInt(t.target.value)||0),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue"})]})]})]}),e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ü•É Alkohol-Berechnung"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border-l-4 border-blue-400 pl-4",children:[e.jsx("h4",{className:"font-semibold text-blue-600 mb-2",children:"üîµ AEK muss trinken"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[x(),"cl"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:["Durch Real-Tore verursacht (",s.mode==="automatic"?d().reduce((t,r)=>t+(r.goalsb||0),0):s.realGoals," Tore)"]})]}),e.jsxs("div",{className:"border-l-4 border-red-400 pl-4",children:[e.jsx("h4",{className:"font-semibold text-red-600 mb-2",children:"üî¥ Real muss trinken"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600 mb-1",children:[g(),"cl"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:["Durch AEK-Tore verursacht (",s.mode==="automatic"?d().reduce((t,r)=>t+(r.goalsa||0),0):s.aekGoals," Tore)"]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-text-primary",children:["Gesamt: ",m(),"cl Schnaps"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:["Das entspricht ",Math.floor(m()/2)," Shots √† 2cl"]})]})})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ü©∏ Blutalkohol-Rechner (BAK)"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"K√∂rpergewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:s.playerWeight,onChange:t=>n("playerWeight",parseInt(t.target.value)||70),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Geschlecht"}),e.jsxs("select",{value:s.playerGender,onChange:t=>n("playerGender",t.target.value),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue",children:[e.jsx("option",{value:"male",children:"M√§nnlich"}),e.jsx("option",{value:"female",children:"Weiblich"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Zus√§tzliche Biere (0,5L)"}),e.jsx("input",{type:"number",min:"0",value:s.beerCount,onChange:t=>n("beerCount",parseInt(t.target.value)||0),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-red-50 to-yellow-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-red-600 mb-2",children:[j(m(),{weight:s.playerWeight,gender:s.playerGender},null,s.beerCount),"‚Ä∞"]}),e.jsx("div",{className:"text-sm text-red-700 font-medium",children:"Gesch√§tzte Blutalkoholkonzentration"})]})}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Hinweis:"})," BAK-Berechnung ist eine N√§herung (Widmark-Formel) mit Alkoholabbau (~0.15‚Ä∞/h). Exakte Werte k√∂nnen abweichen. Automatischer Modus ber√ºcksichtigt Zeit seit letztem Spiel."]})}),e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Wichtig:"})," Dies ist nur eine grobe Orientierung. Individuelle Faktoren k√∂nnen stark abweichen. Bei hohen Werten bitte medizinische Hilfe suchen!"]})})]}),e.jsx("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Regeln:"})," F√ºr jedes zweite Tor muss der Gegner 2cl Schnaps (40%) trinken. 0,5L Bier (5% Alkohol) entspricht 2,5cl reinem Alkohol."]})})]})}export{T as default};
