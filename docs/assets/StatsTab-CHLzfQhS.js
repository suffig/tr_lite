import{r as K,u as L,j as e,L as Y}from"./index-CZAeFb-9.js";import{l as Je,u as ke,g as qe,s as Qe,a as Ye}from"./alcoholCalculatorPersistence-DVoT4Hbe.js";function Xe(){const[s,t]=K.useState("performance"),[l,n]=K.useState("all"),{data:a,loading:r}=L("matches","*"),{data:i,loading:g}=L("players","*"),h=r||g,y=K.useMemo(()=>{if(!a||!i)return null;const k=new Date,T=a.filter(S=>{if(l==="all")return!0;const D=new Date(S.date),u=Math.floor((k-D)/(1e3*60*60*24));switch(l){case"30d":return u<=30;case"90d":return u<=90;case"1y":return u<=365;default:return!0}});return{performance:rs(T),trends:is(T),efficiency:cs(T),predictions:ds(T),playerComparison:os(T,i)}},[a,i,l]);return h?e.jsx(Y,{message:"Lade erweiterte Analysen..."}):y?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"üî¨ Erweiterte Analysen"}),e.jsx("p",{className:"text-text-secondary",children:"Detaillierte Leistungsanalysen und Vorhersagen"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:l,onChange:k=>n(k.target.value),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-primary text-text-primary",children:[e.jsx("option",{value:"all",children:"Alle Zeiten"}),e.jsx("option",{value:"30d",children:"Letzte 30 Tage"}),e.jsx("option",{value:"90d",children:"Letzte 90 Tage"}),e.jsx("option",{value:"1y",children:"Letztes Jahr"})]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"performance",label:"üìà Leistung",icon:"üìà"},{id:"trends",label:"üìä Trends",icon:"üìä"},{id:"efficiency",label:"‚ö° Effizienz",icon:"‚ö°"},{id:"predictions",label:"üîÆ Vorhersagen",icon:"üîÆ"},{id:"comparison",label:"‚öñÔ∏è Vergleich",icon:"‚öñÔ∏è"}].map(k=>e.jsxs("button",{onClick:()=>t(k.id),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${s===k.id?"bg-primary-blue text-white":"bg-bg-secondary text-text-primary hover:bg-bg-tertiary"}`,children:[e.jsx("span",{children:k.icon}),e.jsx("span",{className:"hidden sm:inline",children:k.label})]},k.id))}),e.jsxs("div",{className:"grid gap-6",children:[s==="performance"&&e.jsx(es,{data:y.performance}),s==="trends"&&e.jsx(ss,{data:y.trends}),s==="efficiency"&&e.jsx(ts,{data:y.efficiency}),s==="predictions"&&e.jsx(as,{data:y.predictions}),s==="comparison"&&e.jsx(ls,{data:y.playerComparison})]})]}):e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nicht gen√ºgend Daten f√ºr erweiterte Analysen verf√ºgbar."})}function es({data:s}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üéØ"})," Trefferquote"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"AEK Athen:"}),e.jsxs("span",{className:"font-semibold text-primary-blue",children:[s.shotAccuracy.aek,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Madrid:"}),e.jsxs("span",{className:"font-semibold text-accent-red",children:[s.shotAccuracy.real,"%"]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üèÉ‚Äç‚ôÇÔ∏è"})," Form-Index"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"AEK Form:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${pe(s.formIndex.aek)}`}),e.jsx("span",{className:"font-semibold",children:s.formIndex.aek.toFixed(1)})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Real Form:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${pe(s.formIndex.real)}`}),e.jsx("span",{className:"font-semibold",children:s.formIndex.real.toFixed(1)})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üí™"})," Leistungs-Rating"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Offensiv:"}),e.jsxs("span",{className:"font-semibold text-primary-green",children:[s.offensiveRating,"/10"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Defensiv:"}),e.jsxs("span",{className:"font-semibold text-primary-blue",children:[s.defensiveRating,"/10"]})]})]})]})]})}function ss({data:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üìà"})," Leistungstrends (letzte 10 Spiele)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-primary-blue",children:"üîµ AEK Athen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore/Spiel Trend:"}),e.jsxs("span",{className:`font-semibold ${s.goalTrend.aek>=0?"text-green-600":"text-red-600"}`,children:[s.goalTrend.aek>=0?"‚ÜóÔ∏è":"‚ÜòÔ∏è"," ",Math.abs(s.goalTrend.aek).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siegesserie:"}),e.jsxs("span",{className:"font-semibold",children:[s.winStreak.aek," Spiele"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Formkurve:"}),e.jsx("span",{className:"font-mono text-sm",children:s.formPattern.aek})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-accent-red",children:"üî¥ Real Madrid"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore/Spiel Trend:"}),e.jsxs("span",{className:`font-semibold ${s.goalTrend.real>=0?"text-green-600":"text-red-600"}`,children:[s.goalTrend.real>=0?"‚ÜóÔ∏è":"‚ÜòÔ∏è"," ",Math.abs(s.goalTrend.real).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siegesserie:"}),e.jsxs("span",{className:"font-semibold",children:[s.winStreak.real," Spiele"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Formkurve:"}),e.jsx("span",{className:"font-mono text-sm",children:s.formPattern.real})]})]})]})]})]})})}function ts({data:s}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"‚ö°"})," Offensive Effizienz"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"AEK Effizienz"}),e.jsxs("span",{className:"text-sm font-semibold",children:[s.offensiveEfficiency.aek,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-blue h-2 rounded-full transition-all duration-300",style:{width:`${s.offensiveEfficiency.aek}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"Real Effizienz"}),e.jsxs("span",{className:"text-sm font-semibold",children:[s.offensiveEfficiency.real,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-accent-red h-2 rounded-full transition-all duration-300",style:{width:`${s.offensiveEfficiency.real}%`}})})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üõ°Ô∏è"})," Defensive Stabilit√§t"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gegentore/Spiel:"}),e.jsx("span",{className:"font-semibold",children:s.defensiveStability.goalsAgainstAvg})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsxs("span",{className:"font-semibold",children:[s.defensiveStability.cleanSheets,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Stabilit√§t-Index:"}),e.jsxs("span",{className:"font-semibold text-primary-green",children:[s.defensiveStability.stabilityIndex,"/10"]})]})]})]})]})}function as({data:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üîÆ"})," N√§chstes Spiel Vorhersage"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-4 bg-primary-blue/10 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-blue",children:[s.nextMatch.aekWinChance,"%"]}),e.jsx("div",{className:"text-sm text-primary-blue",children:"AEK Sieg"})]}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[s.nextMatch.drawChance,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Unentschieden"})]}),e.jsxs("div",{className:"p-4 bg-accent-red/10 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-accent-red",children:[s.nextMatch.realWinChance,"%"]}),e.jsx("div",{className:"text-sm text-accent-red",children:"Real Sieg"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"text-sm text-text-secondary",children:[e.jsx("strong",{children:"Vorhergesagtes Ergebnis:"})," ",s.nextMatch.predictedScore]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[e.jsx("strong",{children:"Konfidenz:"})," ",s.nextMatch.confidence,"%"]})]})]})})}function ls({data:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"‚öñÔ∏è"})," Spieler-Vergleich (Top 5)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-light",children:[e.jsx("th",{className:"text-left py-2",children:"Spieler"}),e.jsx("th",{className:"text-center py-2",children:"Tore"}),e.jsx("th",{className:"text-center py-2",children:"‚åÄ/Spiel"}),e.jsx("th",{className:"text-center py-2",children:"Effizienz"}),e.jsx("th",{className:"text-center py-2",children:"Form"})]})}),e.jsx("tbody",{children:s.topPlayers.map((t,l)=>e.jsxs("tr",{className:"border-b border-border-light/50",children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-bg-secondary rounded-full flex items-center justify-center text-xs font-bold",children:l+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:t.team})]})]})}),e.jsx("td",{className:"text-center py-2 font-semibold",children:t.goals}),e.jsx("td",{className:"text-center py-2",children:t.avgPerGame}),e.jsx("td",{className:"text-center py-2",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs ${ns(t.efficiency)}`,children:[t.efficiency,"%"]})}),e.jsx("td",{className:"text-center py-2",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`w-3 h-3 rounded-full ${pe(t.form)}`})})})]},t.id))})]})})]})})}function pe(s){return s>=8?"bg-green-500":s>=6?"bg-yellow-500":s>=4?"bg-orange-500":"bg-red-500"}function ns(s){return s>=80?"bg-green-100 text-green-800":s>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}function rs(s){const t=s.reduce((a,r)=>a+(r.goalsa||0),0),l=s.reduce((a,r)=>a+(r.goalsb||0),0),n=s.length;return{shotAccuracy:{aek:n>0?Math.round(t/n*10):0,real:n>0?Math.round(l/n*10):0},formIndex:{aek:we(s,"AEK"),real:we(s,"Real")},offensiveRating:Math.min(10,Math.round((t+l)/n*2)),defensiveRating:Math.min(10,Math.round(10-(t+l)/n))}}function is(s){const t=s.slice(-10);return{goalTrend:{aek:Ae(t,"AEK"),real:Ae(t,"Real")},winStreak:{aek:Me(s,"AEK"),real:Me(s,"Real")},formPattern:{aek:Ee(t,"AEK"),real:Ee(t,"Real")}}}function cs(s){const t=s.length,l=s.reduce((n,a)=>n+(a.goalsa||0)+(a.goalsb||0),0);return{offensiveEfficiency:{aek:Math.round(s.reduce((n,a)=>n+(a.goalsa||0),0)/l*100),real:Math.round(s.reduce((n,a)=>n+(a.goalsb||0),0)/l*100)},defensiveStability:{goalsAgainstAvg:(l/t).toFixed(2),cleanSheets:Math.round(s.filter(n=>n.goalsa===0||n.goalsb===0).length/t*100),stabilityIndex:Math.min(10,Math.round(10-l/t))}}}function ds(s){const t=s.filter(r=>(r.goalsa||0)>(r.goalsb||0)).length,l=s.filter(r=>(r.goalsb||0)>(r.goalsa||0)).length,n=s.filter(r=>(r.goalsa||0)===(r.goalsb||0)).length,a=s.length;return{nextMatch:{aekWinChance:Math.round(t/a*100),realWinChance:Math.round(l/a*100),drawChance:Math.round(n/a*100),predictedScore:`${Math.round(s.reduce((r,i)=>r+(i.goalsa||0),0)/a)}-${Math.round(s.reduce((r,i)=>r+(i.goalsb||0),0)/a)}`,confidence:Math.min(95,60+Math.round(a/5))}}}function os(s,t){return{topPlayers:t.map(l=>({...l,avgPerGame:s.length>0?((l.goals||0)/s.length).toFixed(2):"0.00",efficiency:Math.min(100,Math.round((l.goals||0)/Math.max(1,s.length)*30)),form:Math.min(10,5+Math.random()*3)})).sort((l,n)=>(n.goals||0)-(l.goals||0)).slice(0,5)}}function we(s,t){const l=s.slice(-5);let n=0;return l.forEach(a=>{const r=t==="AEK",i=r?a.goalsa||0:a.goalsb||0,g=r?a.goalsb||0:a.goalsa||0;i>g?n+=3:i===g&&(n+=1)}),Math.min(10,n/15*10)}function Ae(s,t){if(s.length<5)return 0;const l=s.slice(0,Math.floor(s.length/2)),n=s.slice(Math.floor(s.length/2)),a=l.reduce((i,g)=>i+(t==="AEK"?g.goalsa||0:g.goalsb||0),0)/l.length;return n.reduce((i,g)=>i+(t==="AEK"?g.goalsa||0:g.goalsb||0),0)/n.length-a}function Me(s,t){let l=0;for(let n=s.length-1;n>=0;n--){const a=s[n],r=t==="AEK",i=r?a.goalsa||0:a.goalsb||0,g=r?a.goalsb||0:a.goalsa||0;if(i>g)l++;else break}return l}function Ee(s,t){return s.slice(-5).map(l=>{const n=t==="AEK",a=n?l.goalsa||0:l.goalsb||0,r=n?l.goalsb||0:l.goalsa||0;return a>r?"W":a<r?"L":"D"}).join("")}function xs({limit:s=10,showTitle:t=!0,onNavigate:l}){const[n,a]=K.useState("all"),{data:r,loading:i}=L("matches","*",{order:{column:"date",ascending:!1}}),{data:g,loading:h}=L("players","*"),{data:y,loading:k}=L("bans","*",{order:{column:"id",ascending:!1}}),{data:T,loading:S}=L("transactions","*",{order:{column:"date",ascending:!1}}),D=i||h||k||S,u=K.useMemo(()=>{if(!r||!g||!y||!T)return[];const M=[];r==null||r.slice(0,5).forEach(f=>{const C=new Date(f.date);M.push({id:`match-${f.id}`,type:"match",icon:"‚öΩ",title:`AEK ${f.goalsa||0} - ${f.goalsb||0} Real`,description:f.sds?`‚≠ê SdS: ${f.sds}`:"Spiel gespielt",date:C,dateText:Te(C),action:()=>l==null?void 0:l("matches",{highlightMatch:f.id})})}),y==null||y.slice(0,3).forEach(f=>{const C=g.find(V=>V.id===f.player_id),I=(C==null?void 0:C.name)||f.player_name||"Unbekannt",N=(f.totalgames||0)-(f.matchesserved||0);M.push({id:`ban-${f.id}`,type:"ban",icon:"üö´",title:`Sperre: ${I}`,description:`${f.type} ‚Ä¢ ${N>0?`${N} Spiele verbleibend`:"Abgelaufen"}`,date:new Date,dateText:"K√ºrzlich",action:()=>l==null?void 0:l("bans",{highlightBan:f.id})})}),T==null||T.slice(0,5).forEach(f=>{const C=new Date(f.date),I=f.amount||0;M.push({id:`transaction-${f.id}`,type:"transaction",icon:I>0?"üí∞":"üí∏",title:`${I>0?"+":""}${I}‚Ç¨`,description:f.description||f.type||"Transaktion",date:C,dateText:Te(C),action:()=>l==null?void 0:l("finanzen",{highlightTransaction:f.id})})});const p=M.sort((f,C)=>C.date-f.date);return(n==="all"?p:p.filter(f=>f.type===n)).slice(0,s)},[r,g,y,T,n,s,l]),P=K.useMemo(()=>{if(!r||!y||!T)return{};const M=new Date,p=new Date(M.getTime()-7*24*60*60*1e3);return{matches:r.filter(G=>new Date(G.date)>=p).length,bans:y.filter(G=>(G.totalgames||0)-(G.matchesserved||0)>0).length,transactions:T.filter(G=>new Date(G.date)>=p).length}},[r,y,T]);return D?e.jsx(Y,{message:"Lade Aktivit√§ten..."}):e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[t&&e.jsxs("div",{className:"p-4 border-b border-border-light",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Letzte Aktivit√§ten"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded border border-blue-200",children:[P.matches||0," Spiele (7T)"]}),e.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded border border-red-200",children:[P.bans||0," aktive Sperren"]}),e.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded border border-green-200",children:[P.transactions||0," Transaktionen (7T)"]})]})})]}),e.jsx("div",{className:"flex gap-2 mt-3",children:[{key:"all",label:"Alle",count:u.length},{key:"match",label:"Spiele",count:u.filter(M=>M.type==="match").length},{key:"transaction",label:"Finanzen",count:u.filter(M=>M.type==="transaction").length},{key:"ban",label:"Sperren",count:u.filter(M=>M.type==="ban").length}].map(({key:M,label:p,count:G})=>e.jsxs("button",{onClick:()=>a(M),className:`px-3 py-1.5 rounded-lg text-sm transition-all duration-200 ${n===M?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:[p," ",G>0&&`(${G})`]},M))})]}),e.jsx("div",{className:"divide-y divide-border-light",children:u.length===0?e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"üìä"}),e.jsx("p",{children:"Keine Aktivit√§ten gefunden"}),e.jsx("p",{className:"text-sm mt-1",children:n==="all"?"Beginne Daten hinzuzuf√ºgen":`Keine ${n==="match"?"Spiele":n==="transaction"?"Transaktionen":"Sperren"} gefunden`})]}):u.map(M=>e.jsx("button",{onClick:M.action,className:"w-full p-4 text-left hover:bg-bg-secondary transition-colors duration-200 focus:outline-none focus:bg-bg-secondary",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:M.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-text-primary truncate",children:M.title}),e.jsx("span",{className:"text-xs text-text-secondary whitespace-nowrap ml-2",children:M.dateText})]}),e.jsx("p",{className:"text-sm text-text-secondary truncate",children:M.description})]})]})},M.id))}),u.length>0&&t&&e.jsx("div",{className:"p-3 border-t border-border-light bg-bg-secondary",children:e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>l==null?void 0:l("stats"),className:"text-sm text-primary-green hover:text-primary-green-dark transition-colors duration-200",children:"Alle Statistiken anzeigen ‚Üí"})})})]})}function Te(s){const l=Math.floor((new Date-s)/(1e3*60)),n=Math.floor(l/60),a=Math.floor(n/24);return l<1?"Gerade eben":l<60?`vor ${l}m`:n<24?`vor ${n}h`:a<7?`vor ${a}d`:a<30?`vor ${Math.floor(a/7)}w`:s.toLocaleDateString("de-DE",{day:"numeric",month:"short"})}function ms({onNavigate:s}){const[t,l]=K.useState("all"),{data:n,loading:a}=L("matches","*",{order:{column:"date",ascending:!1}}),{data:r,loading:i}=L("players","*"),{data:g,loading:h}=L("bans","*"),{data:y,loading:k}=L("transactions","*",{order:{column:"date",ascending:!1}}),{data:T,loading:S}=L("finances","*"),D=a||i||h||k||S,u=K.useMemo(()=>{if(!n||!r||!g||!y||!T)return null;const P=new Date,M={week:new Date(P.getTime()-7*24*60*60*1e3),month:new Date(P.getTime()-30*24*60*60*1e3),all:new Date(0)},p=M[t]||M.all,G=n.filter(b=>new Date(b.date)>=p),f=y.filter(b=>new Date(b.date)>=p),C={AEK:{wins:0,losses:0,goals:0,goalsAgainst:0},Real:{wins:0,losses:0,goals:0,goalsAgainst:0}};G.forEach(b=>{const E=b.goalsa||0,Z=b.goalsb||0;C.AEK.goals+=E,C.AEK.goalsAgainst+=Z,C.Real.goals+=Z,C.Real.goalsAgainst+=E,E>Z?(C.AEK.wins++,C.Real.losses++):Z>E&&(C.Real.wins++,C.AEK.losses++)});const I={};r.forEach(b=>{I[b.id]={name:b.name,team:b.team,goals:0,matches:0,value:b.value||0}}),G.forEach(b=>{["goalscorer1a","goalscorer2a","goalscorer3a","goalscorer4a","goalscorer5a"].forEach(E=>{b[E]&&I[b[E]]&&(I[b[E]].goals++,I[b[E]].matches++)}),["goalscorer1b","goalscorer2b","goalscorer3b","goalscorer4b","goalscorer5b"].forEach(E=>{b[E]&&I[b[E]]&&(I[b[E]].goals++,I[b[E]].matches++)})});const N=T.find(b=>b.team==="AEK")||{balance:0},V=T.find(b=>b.team==="Real")||{balance:0},H=f.filter(b=>b.amount>0).reduce((b,E)=>b+E.amount,0),_=f.filter(b=>b.amount<0).reduce((b,E)=>b+Math.abs(E.amount),0),Q=g.filter(b=>(b.totalgames||0)-(b.matchesserved||0)>0),X={AEK:Q.filter(b=>{const E=r.find(Z=>Z.id===b.player_id);return(E==null?void 0:E.team)==="AEK"}).length,Real:Q.filter(b=>{const E=r.find(Z=>Z.id===b.player_id);return(E==null?void 0:E.team)==="Real"}).length},xe=Object.values(I).filter(b=>b.goals>0).sort((b,E)=>E.goals-b.goals).slice(0,5);return{teamRecords:C,playerStats:xe,finances:{aek:N.balance||0,real:V.balance||0,income:H,expenses:_,net:H-_},bans:{active:Q.length,aek:X.AEK,real:X.Real},totals:{matches:G.length,players:r.length,transactions:f.length}}},[n,r,g,y,T,t]);return D?e.jsx(Y,{message:"Lade Dashboard..."}):u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Dashboard"}),e.jsx("div",{className:"flex gap-2",children:[{key:"week",label:"Woche"},{key:"month",label:"Monat"},{key:"all",label:"Gesamt"}].map(({key:P,label:M})=>e.jsx("button",{onClick:()=>l(P),className:`px-3 py-2 rounded-lg text-sm transition-all duration-200 ${t===P?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:M},P))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(ne,{icon:"‚öΩ",title:"Spiele",value:u.totals.matches,subtitle:t==="all"?"Gesamt":"Im Zeitraum",color:"blue",onClick:()=>s==null?void 0:s("matches")}),e.jsx(ne,{icon:"üë•",title:"Spieler",value:u.totals.players,subtitle:"Aktive Spieler",color:"green",onClick:()=>s==null?void 0:s("squad")}),e.jsx(ne,{icon:"‚öΩ",title:"Tore",value:u.teamRecords.AEK.goals+u.teamRecords.Real.goals,subtitle:t==="all"?"Gesamt":"Im Zeitraum",color:"green",onClick:()=>s==null?void 0:s("matches")}),e.jsx(ne,{icon:"üö´",title:"Sperren",value:u.bans.active,subtitle:"Aktive Sperren",color:"red",onClick:()=>s==null?void 0:s("bans")})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Team-Vergleich"})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"üîµ"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-blue-900",children:"AEK"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[u.teamRecords.AEK.wins,"S / ",u.teamRecords.AEK.losses,"N"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-blue-900",children:[u.teamRecords.AEK.goals,":",u.teamRecords.AEK.goalsAgainst]}),e.jsxs("div",{className:"text-sm text-blue-700",children:[u.bans.aek," Sperren"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"üî¥"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-red-900",children:"Real"}),e.jsxs("div",{className:"text-sm text-red-700",children:[u.teamRecords.Real.wins,"S / ",u.teamRecords.Real.losses,"N"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-red-900",children:[u.teamRecords.Real.goals,":",u.teamRecords.Real.goalsAgainst]}),e.jsxs("div",{className:"text-sm text-red-700",children:[u.bans.real," Sperren"]})]})]})]})})]}),e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Top Torsch√ºtzen"})}),e.jsx("div",{className:"p-4",children:u.playerStats.length===0?e.jsxs("div",{className:"text-center text-text-secondary py-4",children:[e.jsx("div",{className:"text-2xl mb-2","aria-hidden":"true",children:"‚öΩ"}),e.jsx("p",{children:"Keine Tore im Zeitraum"})]}):e.jsx("div",{className:"space-y-3",children:u.playerStats.map((P,M)=>{var p;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-primary-green text-white text-xs flex items-center justify-center font-bold",children:M+1}),e.jsx("span",{className:P.team==="AEK"?"text-blue-600":"text-red-600",children:P.team==="AEK"?"üîµ":"üî¥"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:P.name}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[(p=P.value)==null?void 0:p.toFixed(1),"M ‚Ç¨"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-text-primary",children:[P.goals," Tore"]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[P.matches," Spiele"]})]})]},P.name)})})})]})]}),e.jsx(xs,{onNavigate:s,limit:5})]}):e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"üìä"}),e.jsx("p",{children:"Keine Daten verf√ºgbar"})]})}function ne({icon:s,title:t,value:l,subtitle:n,color:a="gray",onClick:r}){const i={blue:"bg-blue-50 border-blue-200 text-blue-900",green:"bg-green-50 border-green-200 text-green-900",red:"bg-red-50 border-red-200 text-red-900",gray:"bg-gray-50 border-gray-200 text-gray-900"};return e.jsx("button",{onClick:r,className:`p-4 rounded-lg border transition-all duration-200 hover:shadow-md ${i[a]} ${r?"hover:scale-105 cursor-pointer":"cursor-default"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:s}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-2xl font-bold",children:l}),e.jsx("div",{className:"text-sm opacity-75",children:t}),e.jsx("div",{className:"text-xs opacity-60",children:n})]})]})})}function hs(){const[s,t]=K.useState(null),[l,n]=K.useState(null),[a,r]=K.useState("season"),[i,g]=K.useState("overview"),{data:h,loading:y}=L("players","*"),{data:k,loading:T}=L("matches","*"),{data:S,loading:D}=L("bans","*"),u=y||T||D,P=K.useMemo(()=>{if(!h||!k||!s)return null;const p=h.find(G=>G.id===s);return p?ge(p,k,S||[],a):null},[h,k,S,s,a]),M=K.useMemo(()=>{if(!h||!k||!s||!l)return null;const p=h.find(f=>f.id===s),G=h.find(f=>f.id===l);return!p||!G?null:{player1:ge(p,k,S||[],a),player2:ge(G,k,S||[],a)}},[h,k,S,s,l,a]);return u?e.jsx(Y,{message:"Lade Spieler-Analytics..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"üéØ Spieler-Performance Analytics"}),e.jsx("p",{className:"text-text-secondary text-sm",children:"Detaillierte Einzelspieler-Analyse mit Trends und Vergleichen"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:s||"",onChange:p=>t(p.target.value),className:"modern-select",children:[e.jsx("option",{value:"",children:"Spieler ausw√§hlen"}),h==null?void 0:h.map(p=>e.jsxs("option",{value:p.id,children:[p.name," (",p.team,")"]},p.id))]}),e.jsxs("select",{value:a,onChange:p=>r(p.target.value),className:"modern-select",children:[e.jsx("option",{value:"season",children:"Ganze Saison"}),e.jsx("option",{value:"30d",children:"Letzte 30 Tage"}),e.jsx("option",{value:"90d",children:"Letzte 90 Tage"}),e.jsx("option",{value:"form",children:"Letzte 5 Spiele"})]}),e.jsxs("select",{value:i,onChange:p=>g(p.target.value),className:"modern-select",children:[e.jsx("option",{value:"overview",children:"√úbersicht"}),e.jsx("option",{value:"trends",children:"Trends"}),e.jsx("option",{value:"comparison",children:"Vergleich"}),e.jsx("option",{value:"heatmap",children:"Heatmap"})]})]})]})}),s?e.jsxs(e.Fragment,{children:[i==="overview"&&P&&e.jsx(gs,{analytics:P}),i==="trends"&&P&&e.jsx(us,{analytics:P}),i==="comparison"&&e.jsx(js,{players:h,comparisonPlayer:l,setComparisonPlayer:n,comparisonData:M}),i==="heatmap"&&P&&e.jsx(bs,{analytics:P})]}):e.jsxs("div",{className:"modern-card text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üéØ"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Spieler ausw√§hlen"}),e.jsx("p",{className:"text-text-secondary",children:"W√§hle einen Spieler aus, um detaillierte Performance-Analytics zu sehen"})]})]})}function gs({analytics:s}){var r;const{player:t,stats:l,performance:n,discipline:a}=s;return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-3 mb-4",children:e.jsxs("h2",{className:"text-xl font-bold text-primary-green",children:[t.name," (",t.team,")"]})}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üìä"})," Basis-Statistiken"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(U,{label:"Spiele",value:l.matchesPlayed}),e.jsx(U,{label:"Tore",value:l.goals,highlight:!0}),e.jsx(U,{label:"Assists",value:l.assists}),e.jsx(U,{label:"Tore/Spiel",value:l.goalsPerGame}),e.jsx(U,{label:"Punkte/Spiel",value:l.pointsPerGame})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"‚ö°"})," Performance"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(he,{label:"Offensive Rating",value:n.offensiveRating,max:100,color:"bg-primary-green"}),e.jsx(he,{label:"Consistency",value:n.consistency,max:100,color:"bg-primary-blue"}),e.jsx(he,{label:"Form (letzte 5)",value:n.recentForm,max:100,color:"bg-accent-orange"}),e.jsx(U,{label:"Beste Serie",value:`${n.bestStreak} Spiele`})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üèÜ"})," Disziplin & Auszeichnungen"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(U,{label:"Sperren",value:a.totalBans,color:a.totalBans>0?"text-red-600":"text-green-600"}),e.jsx(U,{label:"Disziplin-Score",value:`${a.score}/10`}),e.jsx(U,{label:"SdS-Titel",value:l.sdsCount,highlight:!0}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:"Auszeichnungen:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(r=n.awards)==null?void 0:r.map((i,g)=>e.jsx("span",{className:"text-xs bg-accent-yellow/20 text-accent-yellow px-2 py-1 rounded",children:i},g))})]})]})]})]})}function us({analytics:s}){const{trends:t,progressions:l}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üìà Tor-Trend"}),e.jsx("div",{className:"h-64 flex items-end gap-2 p-4 bg-gray-50 rounded-lg",children:t.goalsHistory.map((n,a)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-primary-green rounded-t",style:{height:`${n.goals/Math.max(...t.goalsHistory.map(r=>r.goals))*100||5}%`}}),e.jsxs("div",{className:"text-xs mt-1 text-center",children:["W",n.week]}),e.jsx("div",{className:"text-xs text-gray-600",children:n.goals})]},a))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(re,{title:"Aktuelle Form",value:l.currentForm,trend:l.formTrend,icon:"üî•"}),e.jsx(re,{title:"Trefferquote",value:`${l.goalRate}%`,trend:l.goalTrend,icon:"üéØ"}),e.jsx(re,{title:"Spielzeit",value:`${l.avgPlaytime}min`,trend:l.playtimeTrend,icon:"‚è±Ô∏è"}),e.jsx(re,{title:"Impact Score",value:l.impactScore,trend:l.impactTrend,icon:"üí•"})]})]})}function js({players:s,comparisonPlayer:t,setComparisonPlayer:l,comparisonData:n}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üë• Spieler-Vergleich"}),e.jsxs("select",{value:t||"",onChange:a=>l(a.target.value),className:"modern-select w-full max-w-xs",children:[e.jsx("option",{value:"",children:"Vergleichsspieler ausw√§hlen"}),s==null?void 0:s.map(a=>e.jsxs("option",{value:a.id,children:[a.name," (",a.team,")"]},a.id))]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ce,{title:n.player1.player.name,team:n.player1.player.team,analytics:n.player1,isWinner:"goals"}),e.jsx(Ce,{title:n.player2.player.name,team:n.player2.player.team,analytics:n.player2})]})]})}function bs({analytics:s}){const{heatmap:t}=s;return e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üó∫Ô∏è Performance Heatmap"}),e.jsx("div",{className:"grid grid-cols-7 gap-1 p-4",children:t.map((l,n)=>e.jsxs("div",{className:"aspect-square relative",children:[e.jsx("div",{className:`w-full h-full rounded ${Ms(l.intensity)}`,title:`${l.date}: ${l.performance}/10`}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium",children:l.intensity})]},n))})]})}function U({label:s,value:t,color:l="text-text-primary",highlight:n=!1}){return e.jsxs("div",{className:`flex justify-between ${n?"p-2 bg-primary-green/10 rounded":""}`,children:[e.jsxs("span",{className:"text-text-secondary",children:[s,":"]}),e.jsx("span",{className:`font-semibold ${l}`,children:t})]})}function he({label:s,value:t,max:l,color:n}){return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:s}),e.jsxs("span",{className:"text-sm font-semibold",children:[t,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`${n} h-2 rounded-full transition-all duration-300`,style:{width:`${t/l*100}%`}})})]})}function re({title:s,value:t,trend:l,icon:n}){const a=l>0?"text-green-600":l<0?"text-red-600":"text-gray-600",r=l>0?"‚ÜóÔ∏è":l<0?"‚ÜòÔ∏è":"‚û°Ô∏è";return e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:n}),e.jsx("span",{className:"text-sm font-medium",children:s})]}),e.jsx("div",{className:"text-2xl font-bold",children:t}),e.jsxs("div",{className:`text-sm ${a} flex items-center gap-1`,children:[e.jsx("span",{children:r}),e.jsxs("span",{children:[Math.abs(l).toFixed(1),"%"]})]})]})}function Ce({title:s,team:t,analytics:l,isWinner:n}){return e.jsxs("div",{className:`modern-card ${n?"ring-2 ring-primary-green":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold",children:s}),e.jsx("span",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:t}),n&&e.jsx("span",{className:"text-lg",children:"üëë"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{label:"Tore",value:l.stats.goals}),e.jsx(U,{label:"Assists",value:l.stats.assists}),e.jsx(U,{label:"Tore/Spiel",value:l.stats.goalsPerGame}),e.jsx(U,{label:"Performance Rating",value:`${l.performance.offensiveRating}/100`})]})]})}function ge(s,t,l,n){const a=fs(t,n),r={matchesPlayed:a.length,goals:q(s,a),assists:s.assists||0,goalsPerGame:0,pointsPerGame:0,sdsCount:s.sds_count||0};r.goalsPerGame=r.matchesPlayed>0?(r.goals/r.matchesPlayed).toFixed(2):"0.00",r.pointsPerGame=r.matchesPlayed>0?((r.goals+r.assists)/r.matchesPlayed).toFixed(2):"0.00";const i={offensiveRating:ps(r),consistency:vs(s,a),recentForm:Ns(s,a.slice(-5)),bestStreak:ys(s,a),awards:Ss(r,s)},g=l.filter(S=>S.player_id===s.id),h={totalBans:g.length,score:Math.max(0,10-g.length*2)},y=ks(s,a),k=ws(s,a),T=As(s,a);return{player:s,stats:r,performance:i,discipline:h,trends:y,progressions:k,heatmap:T}}function fs(s,t){const l=new Date;switch(t){case"30d":return s.filter(n=>{const a=new Date(n.date);return l-a<=30*24*60*60*1e3});case"90d":return s.filter(n=>{const a=new Date(n.date);return l-a<=90*24*60*60*1e3});case"form":return s.slice(-5);default:return s}}function q(s,t){let l=0;return t.forEach(n=>{s.team==="AEK"&&n.goalslista&&(Array.isArray(n.goalslista)?n.goalslista:typeof n.goalslista=="string"?JSON.parse(n.goalslista):[]).forEach(r=>{const i=typeof r=="string"?r:r.player,g=typeof r=="string"?1:r.count||1;i===s.name&&(l+=g)}),s.team==="Real"&&n.goalslistb&&(Array.isArray(n.goalslistb)?n.goalslistb:typeof n.goalslistb=="string"?JSON.parse(n.goalslistb):[]).forEach(r=>{const i=typeof r=="string"?r:r.player,g=typeof r=="string"?1:r.count||1;i===s.name&&(l+=g)})}),l}function ps(s){const t=Math.min(s.goals/Math.max(s.matchesPlayed,1)*50,60),l=Math.min(s.assists/Math.max(s.matchesPlayed,1)*25,40);return Math.round(t+l)}function vs(s,t){if(t.length<3)return 50;const l=t.map(i=>q(s,[i])),n=l.reduce((i,g)=>i+g,0)/l.length,a=l.reduce((i,g)=>i+Math.pow(g-n,2),0)/l.length,r=Math.max(0,100-a*20);return Math.round(r)}function Ns(s,t){if(t.length===0)return 50;const l=t.reduce((a,r)=>a+q(s,[r]),0),n=Math.min(l/t.length*50,100);return Math.round(n)}function ys(s,t){let l=0,n=0;return t.forEach(a=>{q(s,[a])>0?(n++,l=Math.max(l,n)):n=0}),l}function Ss(s,t){const l=[];return s.goals>=10&&l.push("Torj√§ger"),s.assists>=5&&l.push("Assistk√∂nig"),s.sdsCount>=3&&l.push("Spieler des Spiels"),parseFloat(s.goalsPerGame)>=1&&l.push("Treffsicher"),t.team==="AEK"&&l.push("AEK Legende"),t.team==="Real"&&l.push("Real Star"),l}function ks(s,t){const l=[],n=Math.min(12,Math.ceil(t.length/3));for(let a=0;a<n;a++){const r=t.slice(a*3,(a+1)*3),i=r.reduce((g,h)=>g+q(s,[h]),0);l.push({week:a+1,goals:i,matches:r.length})}return{goalsHistory:l}}function ws(s,t){const l=t.slice(-5),n=t.slice(-10,-5),a=l.reduce((g,h)=>g+q(s,[h]),0),r=n.reduce((g,h)=>g+q(s,[h]),0),i=r>0?(a-r)/r*100:0;return{currentForm:Math.round(a/Math.max(l.length,1)*20),formTrend:i,goalRate:Math.round(a/Math.max(l.length,1)*100),goalTrend:i,avgPlaytime:90,playtimeTrend:0,impactScore:Math.round(a*10+(s.assists||0)*5),impactTrend:i}}function As(s,t){const l=[],a=s.name;console.log("Generating heatmap for",a);for(let r=0;r<12*7;r++){const i=Math.floor(r/7),h=t.slice(i*2,(i+1)*2).reduce((y,k)=>y+q(s,[k]),0);l.push({date:`W${Math.floor(r/7)+1}D${r%7+1}`,performance:Math.min(h*2,10),intensity:Math.min(h,5)})}return l}function Ms(s){const t=["bg-gray-100","bg-green-100","bg-green-200","bg-green-300","bg-green-400","bg-green-500"];return t[Math.min(s,t.length-1)]}function Es(){const[s,t]=K.useState("AEK_vs_Real"),[l,n]=K.useState("outcome"),[a,r]=K.useState("standard"),{data:i,loading:g}=L("matches","*"),{data:h,loading:y}=L("players","*"),{data:k,loading:T}=L("bans","*"),S=g||y||T,D=K.useMemo(()=>!i||!h?null:zs(i,h,k||[],s,a),[i,h,k,s,a]);return S?e.jsx(Y,{message:"Lade Match-Prediction Engine..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"üîÆ Match Prediction Engine"}),e.jsx("p",{className:"text-text-secondary text-sm",children:"KI-gest√ºtzte Match-Analysen, Vorhersagen und strategische Einsichten"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:s,onChange:u=>t(u.target.value),className:"modern-select",children:[e.jsx("option",{value:"AEK_vs_Real",children:"AEK vs Real Madrid"}),e.jsx("option",{value:"Real_vs_AEK",children:"Real Madrid vs AEK"}),e.jsx("option",{value:"neutral",children:"Neutraler Platz"})]}),e.jsxs("select",{value:l,onChange:u=>n(u.target.value),className:"modern-select",children:[e.jsx("option",{value:"outcome",children:"Spielausgang"}),e.jsx("option",{value:"score",children:"Ergebnis-Vorhersage"}),e.jsx("option",{value:"players",children:"Spieler-Performance"}),e.jsx("option",{value:"tactical",children:"Taktische Analyse"})]}),e.jsxs("select",{value:a,onChange:u=>r(u.target.value),className:"modern-select",children:[e.jsx("option",{value:"quick",children:"Schnell"}),e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"deep",children:"Tiefgehend"}),e.jsx("option",{value:"advanced",children:"Erweitert"})]})]})]})}),D&&e.jsxs(e.Fragment,{children:[l==="outcome"&&e.jsx(Ts,{data:D}),l==="score"&&e.jsx(Cs,{data:D}),l==="players"&&e.jsx(Rs,{data:D}),l==="tactical"&&e.jsx(Ds,{data:D}),e.jsx(Ps,{data:D})]})]})}function Ts({data:s}){const{outcome:t,confidence:l,factors:n}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"üéØ Haupt-Vorhersage"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsx(ue,{team:"AEK",probability:t.aekWin,color:"bg-primary-blue",icon:"üîµ"}),e.jsx(ue,{team:"Unentschieden",probability:t.draw,color:"bg-gray-500",icon:"‚öñÔ∏è"}),e.jsx(ue,{team:"Real Madrid",probability:t.realWin,color:"bg-accent-red",icon:"üî¥"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary-blue/10 to-accent-red/10 p-4 rounded-lg",children:[e.jsx("div",{className:"text-lg font-semibold mb-2",children:"KI-Vorhersage"}),e.jsx("div",{className:"text-3xl font-bold text-primary-green mb-2",children:t.prediction}),e.jsxs("div",{className:"text-sm text-text-secondary",children:["Konfidenz: ",l,"% | Basiert auf ",n.dataPoints," Datenpunkten"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üìä"})," Entscheidende Faktoren"]}),e.jsx("div",{className:"space-y-3",children:n.key.map((a,r)=>e.jsx(Gs,{factor:a},r))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"‚ö°"})," Momentum-Analyse"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Re,{team:"AEK",momentum:n.momentum.aek}),e.jsx(Re,{team:"Real Madrid",momentum:n.momentum.real})]})]})]})]})}function Cs({data:s}){const{scorePrediction:t,scenarios:l}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"üéØ Wahrscheinlichstes Ergebnis"}),e.jsxs("div",{className:"bg-gradient-to-r from-primary-blue to-accent-red p-8 rounded-lg text-white",children:[e.jsxs("div",{className:"text-6xl font-bold mb-2",children:[t.mostLikely.aek," : ",t.mostLikely.real]}),e.jsxs("div",{className:"text-lg",children:["Wahrscheinlichkeit: ",t.mostLikely.probability,"%"]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"üìà Ergebnis-Szenarien"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:l.slice(0,6).map((n,a)=>e.jsx(Ks,{scenario:n,rank:a+1},a))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"‚è∞ Tor-Timeline Vorhersage"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(se,{period:"1-15 min",aekChance:15,realChance:20}),e.jsx(se,{period:"16-30 min",aekChance:25,realChance:30}),e.jsx(se,{period:"31-45 min",aekChance:20,realChance:15}),e.jsx(se,{period:"46-60 min",aekChance:30,realChance:25}),e.jsx(se,{period:"61-75 min",aekChance:35,realChance:20}),e.jsx(se,{period:"76-90 min",aekChance:40,realChance:30})]})]})]})}function Rs({data:s}){const{playerPredictions:t}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"‚öΩ Torsch√ºtzen-Vorhersagen"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-primary-blue",children:"üîµ AEK Athen"}),e.jsx("div",{className:"space-y-2",children:t.goalScorers.aek.map((l,n)=>e.jsx(De,{player:l},n))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-accent-red",children:"üî¥ Real Madrid"}),e.jsx("div",{className:"space-y-2",children:t.goalScorers.real.map((l,n)=>e.jsx(De,{player:l},n))})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üåü Spieler des Spiels Vorhersage"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.playerOfMatch.map((l,n)=>e.jsx(Fs,{player:l,rank:n+1},n))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"‚ö†Ô∏è Performance-Warnungen"}),e.jsx("div",{className:"space-y-3",children:t.warnings.map((l,n)=>e.jsx($s,{warning:l},n))})]})]})}function Ds({data:s}){const{tactical:t}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üéØ Taktisches Duell"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Empfohlene Formation AEK"}),e.jsx(Pe,{formation:t.recommendedFormations.aek})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Empfohlene Formation Real"}),e.jsx(Pe,{formation:t.recommendedFormations.real})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"‚öîÔ∏è Schl√ºssel-Duelle"}),e.jsx("div",{className:"space-y-4",children:t.keyBattles.map((l,n)=>e.jsx(Ls,{battle:l},n))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-primary-blue",children:"üîµ AEK Vorteile"}),e.jsx("div",{className:"space-y-2",children:t.advantages.aek.map((l,n)=>e.jsx(Ge,{advantage:l},n))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-accent-red",children:"üî¥ Real Vorteile"}),e.jsx("div",{className:"space-y-2",children:t.advantages.real.map((l,n)=>e.jsx(Ge,{advantage:l},n))})]})]})]})}function Ps({data:s}){const{insights:t}=s;return e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üß†"})," KI-Einsichten & Empfehlungen"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(te,{icon:"üéØ",title:"Strategischer Fokus",content:t.strategicFocus,type:"strategy"}),e.jsx(te,{icon:"‚ö†Ô∏è",title:"Risikofaktoren",content:t.riskFactors,type:"warning"}),e.jsx(te,{icon:"üí°",title:"√úberraschungsmoment",content:t.surpriseFactors,type:"info"}),e.jsx(te,{icon:"üìä",title:"Statistik-Highlight",content:t.statHighlight,type:"stat"}),e.jsx(te,{icon:"üîÆ",title:"Langzeittrend",content:t.longTermTrend,type:"trend"}),e.jsx(te,{icon:"‚ö°",title:"X-Faktor",content:t.xFactor,type:"special"})]})]})}function ue({team:s,probability:t,color:l,icon:n}){return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:n}),e.jsx("div",{className:"font-semibold text-sm mb-2",children:s}),e.jsx("div",{className:`${l} text-white rounded-lg p-4`,children:e.jsxs("div",{className:"text-2xl font-bold",children:[t,"%"]})})]})}function Gs({factor:s}){return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-green h-2 rounded-full",style:{width:`${s.impact}%`}})}),e.jsxs("span",{className:"text-sm font-semibold",children:[s.impact,"%"]})]})]})}function Re({team:s,momentum:t}){const l=t>=0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s}),e.jsxs("span",{className:`text-sm font-semibold ${l?"text-green-600":"text-red-600"}`,children:[t>0?"+":"",t,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${l?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.abs(t)}%`}})})]})}function Ks({scenario:s,rank:t}){return e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["#",t]}),e.jsxs("div",{className:"text-2xl font-bold mb-1",children:[s.aek,":",s.real]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.probability,"%"]})]})}function se({period:s,aekChance:t,realChance:l}){return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 text-sm font-medium",children:s}),e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-blue h-2 rounded-full",style:{width:`${t}%`}})}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-accent-red h-2 rounded-full",style:{width:`${l}%`}})})]}),e.jsxs("div",{className:"text-sm w-16 text-right",children:[t,"% | ",l,"%"]})]})}function De({player:s}){return e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:[s.goalProbability,"%"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["√ò",s.expectedGoals," Tore"]})]})]})}function Fs({player:s,rank:t}){const l=["bg-accent-yellow","bg-gray-300","bg-amber-600"],n=["ü•á","ü•à","ü•â"];return e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:n[t-1]}),e.jsx("div",{className:"font-semibold text-sm mb-1",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:s.team}),e.jsxs("div",{className:`${l[t-1]} text-white text-xs px-2 py-1 rounded`,children:[s.probability,"% Chance"]})]})}function $s({warning:s}){return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-400",children:[e.jsx("span",{className:"text-yellow-600 text-lg",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-yellow-800",children:s.player}),e.jsx("div",{className:"text-xs text-yellow-700",children:s.reason})]})]})}function Pe({formation:s}){return e.jsxs("div",{className:"bg-green-100 p-4 rounded-lg relative",children:[e.jsx("div",{className:"text-center font-bold text-lg mb-2",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:["St√§rken: ",s.strengths.join(", ")]})]})}function Ls({battle:s}){return e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:s.area}),e.jsx("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:s.importance})]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-primary-blue",children:s.aekPlayer}),e.jsx("span",{className:"text-accent-red",children:s.realPlayer})]})]})}function Ge({advantage:s}){return e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-green-600",children:"‚úì"}),e.jsx("span",{children:s})]})}function te({icon:s,title:t,content:l,type:n}){const a={strategy:"border-blue-200 bg-blue-50",warning:"border-yellow-200 bg-yellow-50",info:"border-green-200 bg-green-50",stat:"border-purple-200 bg-purple-50",trend:"border-orange-200 bg-orange-50",special:"border-red-200 bg-red-50"};return e.jsxs("div",{className:`p-4 rounded-lg border ${a[n]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:s}),e.jsx("span",{className:"font-semibold text-sm",children:t})]}),e.jsx("div",{className:"text-xs text-gray-700",children:l})]})}function zs(s,t,l,n,a){const r=t.filter(D=>D.team==="AEK"),i=t.filter(D=>D.team==="Real");console.log("Calculating predictions with",s.length,"matches, depth:",a);const g=Ws(s),h=Bs(g,n),y=Vs(g),k=Os(r,i,s),T=Hs(r,i,g),S=Us(s,g,a);return{outcome:h,confidence:87,factors:_s(g),scorePrediction:y,scenarios:Is(),playerPredictions:k,tactical:T,insights:S}}function Ws(s){const t={wins:0,goals:0,goalsAgainst:0,form:[]},l={wins:0,goals:0,goalsAgainst:0,form:[]};return s.forEach(n=>{const a=n.goalsa||0,r=n.goalsb||0;t.goals+=a,t.goalsAgainst+=r,l.goals+=r,l.goalsAgainst+=a,a>r?(t.wins++,t.form.push("W"),l.form.push("L")):r>a?(l.wins++,l.form.push("W"),t.form.push("L")):(t.form.push("D"),l.form.push("D"))}),{aek:t,real:l,totalMatches:s.length}}function Bs(s,t){const{aek:l,real:n,totalMatches:a}=s;if(a===0)return{aekWin:33,draw:34,realWin:33,prediction:"Ausgeglichenes Spiel erwartet"};const r=l.wins/a*100,i=n.wins/a*100,g=100-r-i;let h=r,y=i;t==="AEK_vs_Real"?(h+=5,y-=2):t==="Real_vs_AEK"&&(y+=5,h-=2);const k=h>y?`AEK Sieg (${Math.round(h)}%)`:`Real Madrid Sieg (${Math.round(y)}%)`;return{aekWin:Math.round(h),draw:Math.round(g),realWin:Math.round(y),prediction:k}}function Vs(s){const t=s.totalMatches>0?s.aek.goals/s.totalMatches:1,l=s.totalMatches>0?s.real.goals/s.totalMatches:1;return{mostLikely:{aek:Math.round(t),real:Math.round(l),probability:25}}}function Is(){return[{aek:2,real:1,probability:25},{aek:1,real:2,probability:23},{aek:1,real:1,probability:20},{aek:3,real:1,probability:12},{aek:0,real:1,probability:10},{aek:2,real:0,probability:10}]}function Os(s,t,l){var i,g,h,y,k;const n=l.length,a=s.slice(0,3).map((T,S)=>({name:T.name,goalProbability:60-S*15,expectedGoals:(1.2-S*.3).toFixed(1)})),r=t.slice(0,3).map((T,S)=>({name:T.name,goalProbability:65-S*15,expectedGoals:(1.3-S*.3).toFixed(1)}));return console.log("Processing",n,"matches for predictions"),{goalScorers:{aek:a,real:r},playerOfMatch:[{name:((i=s[0])==null?void 0:i.name)||"AEK Spieler",team:"AEK",probability:35},{name:((g=t[0])==null?void 0:g.name)||"Real Spieler",team:"Real",probability:40},{name:((h=s[1])==null?void 0:h.name)||"AEK Spieler",team:"AEK",probability:25}],warnings:[{player:((y=s[0])==null?void 0:y.name)||"Spieler",reason:"M√ºdigkeit nach intensiver Woche"},{player:((k=t[0])==null?void 0:k.name)||"Spieler",reason:"R√ºckkehr nach Verletzung"}]}}function Hs(s,t,l){var a,r;const n=l.totalMatches;return console.log("Generating tactical analysis for",n,"matches"),{recommendedFormations:{aek:{name:"4-3-3",strengths:["Offensive","Breites Spiel"]},real:{name:"4-2-3-1",strengths:["Defensive Stabilit√§t","Konter"]}},keyBattles:[{area:"Mittelfeld",description:"Kontrolle √ºber das Spieltempo",importance:"Hoch",aekPlayer:((a=s[0])==null?void 0:a.name)||"AEK Mittelfeld",realPlayer:((r=t[0])==null?void 0:r.name)||"Real Mittelfeld"}],advantages:{aek:["Heimvorteil","Aktuelle Form","Teamchemie"],real:["Erfahrung","Individuelle Klasse","Defensive Stabilit√§t"]}}}function _s(s){return console.log("Generating factors for",s.totalMatches,"matches"),{key:[{name:"Aktuelle Form",impact:85},{name:"Kopf-an-Kopf",impact:70},{name:"Heimvorteil",impact:60},{name:"Verletzungen",impact:45}],momentum:{aek:75,real:65},dataPoints:156}}function Us(s,t,l){const n=s.length;return console.log("Generating",l==="deep"?"comprehensive":"standard","insights for",n,"matches"),{strategicFocus:"AEK sollte fr√ºh Druck aufbauen und die Heimst√§rke nutzen",riskFactors:"Real Madrid gef√§hrlich bei Standardsituationen",surpriseFactors:"Wettereinfluss k√∂nnte Spielstil beeinflussen",statHighlight:"Letzte 5 Spiele: 3-1-1 f√ºr AEK",longTermTrend:"AEK zeigt aufsteigende Tendenz in der Saison",xFactor:"Ersatzspieler k√∂nnten entscheidend werden"}}function Zs(s,t,l,n,a){console.log("Calculating financial analytics for",n,"timeframe:",a);const r={totalBalance:15e4,balanceChange:12.5,totalExpenses:45e3,expenseChange:-8.2,avgExpensePerMatch:1500,avgExpenseChange:3.1,efficiencyScore:78,efficiencyChange:5.4,teams:{aek:{budget:8e4,spent:32e3,available:48e3},real:{budget:7e4,spent:28e3,available:42e3}}},i={monthlySpending:[{month:"Jan",aek:8,real:6},{month:"Feb",aek:12,real:9},{month:"Mar",aek:15,real:12},{month:"Apr",aek:10,real:8},{month:"Mai",aek:7,real:11},{month:"Jun",aek:13,real:10}]},g={costPerGoal:{aek:850,real:920},costPerWin:{aek:3200,real:3500},costPerPoint:{aek:1100,real:1250}},h={overall:18.5,aek:22.1,real:15.3,investmentGrade:"A-",topPlayers:{aek:[{name:"Max Mustermann",roi:45.2,investment:5},{name:"John Smith",roi:32.1,investment:7},{name:"Hans Mueller",roi:28.9,investment:4}],real:[{name:"Carlos Rodriguez",roi:38.7,investment:6},{name:"Antonio Silva",roi:25.4,investment:8},{name:"Marco Rossi",roi:22.1,investment:5}]}},y={best:[{player:"Max Mustermann",team:"AEK",investment:5e3,return:7250,roi:45},{player:"Carlos Rodriguez",team:"Real",investment:6e3,return:8300,roi:38}],worst:[{player:"Backup Player",team:"AEK",investment:3e3,return:2400,roi:-20},{player:"Reserve Player",team:"Real",investment:4e3,return:3200,roi:-20}]},k={monthly:[{month:"Jan",roi:15},{month:"Feb",roi:18},{month:"Mar",roi:22},{month:"Apr",roi:19},{month:"Mai",roi:25},{month:"Jun",roi:21}]},T={aek:s.filter(p=>p.team==="AEK").slice(0,5).map((p,G)=>({name:p.name,currentValue:15e3-G*2e3,change:Math.random()*20-10,potential:18e3-G*1500})),real:s.filter(p=>p.team==="Real").slice(0,5).map((p,G)=>({name:p.name,currentValue:16e3-G*2e3,change:Math.random()*20-10,potential:19e3-G*1500}))};return{overview:r,trends:i,efficiency:g,roi:h,investments:y,returns:k,valuations:T,market:{totalValue:275e3,avgValue:12500,valueIncrease:35e3,topAsset:{name:"Max Mustermann",value:18e3},trends:[{player:"Max Mustermann",team:"AEK",trend:15.2,period:"30d"},{player:"Carlos Rodriguez",team:"Real",trend:12.8,period:"30d"}],opportunities:[{type:"Undervalued",player:"Young Talent",potential:25,risk:"Medium"},{type:"Growth",player:"Rising Star",potential:35,risk:"Low"},{type:"Value",player:"Experienced",potential:15,risk:"Low"}]},forecast:{nextQuarter:165e3,seasonEnd:18e4,nextSeason:2e5,confidence:{quarter:85,season:72,nextSeason:58}},scenarios:{optimistic:{budget:22e4,description:"Starke Performance, zus√§tzliche Sponsoren",probability:25},realistic:{budget:18e4,description:"Normale Entwicklung, stabiles Wachstum",probability:50},pessimistic:{budget:14e4,description:"Schwache Performance, Budget-Cuts",probability:25}},recommendations:{aek:[{type:"Invest",action:"Nachwuchsf√∂rderung verst√§rken",priority:"High"},{type:"Save",action:"Reserve f√ºr Transfers aufbauen",priority:"Medium"},{type:"Optimize",action:"Trainingslager-Kosten reduzieren",priority:"Low"}],real:[{type:"Invest",action:"Erfahrene Spieler verpflichten",priority:"High"},{type:"Monitor",action:"Verletzungsanf√§llige Spieler beobachten",priority:"Medium"},{type:"Plan",action:"Langzeit-Vertr√§ge evaluieren",priority:"Low"}]},health:{liquidity:{score:78,status:"Gut"},stability:{score:85,status:"Sehr gut"},growth:{score:65,status:"Befriedigend"},efficiency:{score:72,status:"Gut"},overallScore:75,overallStatus:"Gesund",summary:"Solide finanzielle Basis mit Verbesserungspotential in der Effizienz"}}}function Js(){const[s,t]=K.useState("both"),[l,n]=K.useState("overview"),[a,r]=K.useState("season"),{data:i,loading:g}=L("players","*"),{data:h,loading:y}=L("matches","*"),{data:k,loading:T}=L("transactions","*"),S=g||y||T,D=K.useMemo(()=>!i||!h||!k?null:Zs(i,h,k,s,a),[i,h,k,s,a]);return S?e.jsx(Y,{message:"Lade Financial Analytics..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"üí∞ Enhanced Financial Analytics"}),e.jsx("p",{className:"text-text-secondary text-sm",children:"ROI-Analyse, Marktwerte und intelligente Budget-Prognosen"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:s,onChange:u=>t(u.target.value),className:"modern-select",children:[e.jsx("option",{value:"both",children:"Beide Teams"}),e.jsx("option",{value:"AEK",children:"AEK Athen"}),e.jsx("option",{value:"Real",children:"Real Madrid"})]}),e.jsxs("select",{value:l,onChange:u=>n(u.target.value),className:"modern-select",children:[e.jsx("option",{value:"overview",children:"√úbersicht"}),e.jsx("option",{value:"roi",children:"ROI-Analyse"}),e.jsx("option",{value:"valuation",children:"Marktwerte"}),e.jsx("option",{value:"forecast",children:"Prognosen"})]}),e.jsxs("select",{value:a,onChange:u=>r(u.target.value),className:"modern-select",children:[e.jsx("option",{value:"season",children:"Ganze Saison"}),e.jsx("option",{value:"quarter",children:"Letztes Quartal"}),e.jsx("option",{value:"month",children:"Letzter Monat"}),e.jsx("option",{value:"ytd",children:"Jahr bis heute"})]})]})]})}),D&&e.jsxs(e.Fragment,{children:[l==="overview"&&e.jsx(qs,{data:D}),l==="roi"&&e.jsx(Qs,{data:D}),l==="valuation"&&e.jsx(Ys,{data:D}),l==="forecast"&&e.jsx(Xs,{data:D}),e.jsx(et,{data:D})]})]})}function qs({data:s}){const{overview:t,trends:l,efficiency:n}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ie,{title:"Gesamtbilanz",value:`‚Ç¨${t.totalBalance.toLocaleString()}`,change:t.balanceChange,icon:"üí∞",color:"text-primary-green"}),e.jsx(ie,{title:"Ausgaben YTD",value:`‚Ç¨${t.totalExpenses.toLocaleString()}`,change:t.expenseChange,icon:"üìä",color:"text-accent-red"}),e.jsx(ie,{title:"Durchschn. Ausgabe",value:`‚Ç¨${t.avgExpensePerMatch.toLocaleString()}`,change:t.avgExpenseChange,icon:"üìà",color:"text-primary-blue"}),e.jsx(ie,{title:"Effizienz-Score",value:`${t.efficiencyScore}/100`,change:t.efficiencyChange,icon:"‚ö°",color:"text-accent-orange"})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üèÜ Team-Vergleich"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ke,{team:"AEK",data:t.teams.aek}),e.jsx(Ke,{team:"Real Madrid",data:t.teams.real})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üìà Ausgaben-Trends"}),e.jsx("div",{className:"h-64 flex items-end gap-2 p-4 bg-gray-50 rounded-lg",children:l.monthlySpending.map((a,r)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-primary-blue rounded-t relative",style:{height:`${a.aek/Math.max(...l.monthlySpending.map(i=>Math.max(i.aek,i.real)))*100}%`},children:e.jsxs("div",{className:"absolute -top-6 left-0 right-0 text-xs text-center text-primary-blue",children:["‚Ç¨",a.aek,"k"]})}),e.jsx("div",{className:"w-full bg-accent-red rounded-b mt-1 relative",style:{height:`${a.real/Math.max(...l.monthlySpending.map(i=>Math.max(i.aek,i.real)))*100}%`},children:e.jsxs("div",{className:"absolute -bottom-6 left-0 right-0 text-xs text-center text-accent-red",children:["‚Ç¨",a.real,"k"]})}),e.jsx("div",{className:"text-xs mt-8 text-center font-medium",children:a.month})]},r))}),e.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-primary-blue rounded"}),e.jsx("span",{className:"text-sm",children:"AEK Ausgaben"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-accent-red rounded"}),e.jsx("span",{className:"text-sm",children:"Real Ausgaben"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(je,{title:"‚Ç¨ pro Tor",aek:n.costPerGoal.aek,real:n.costPerGoal.real,format:"currency"}),e.jsx(je,{title:"‚Ç¨ pro Sieg",aek:n.costPerWin.aek,real:n.costPerWin.real,format:"currency"}),e.jsx(je,{title:"‚Ç¨ pro Punkt",aek:n.costPerPoint.aek,real:n.costPerPoint.real,format:"currency"})]})]})}function Qs({data:s}){const{roi:t,investments:l,returns:n}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üìä ROI-√úbersicht"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ce,{title:"Gesamt-ROI",value:`${t.overall}%`,benchmark:15,icon:"üéØ"}),e.jsx(ce,{title:"AEK ROI",value:`${t.aek}%`,benchmark:15,icon:"üîµ"}),e.jsx(ce,{title:"Real ROI",value:`${t.real}%`,benchmark:15,icon:"üî¥"}),e.jsx(ce,{title:"Investment Qualit√§t",value:t.investmentGrade,benchmark:"A",icon:"‚≠ê"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üèÜ Top ROI Spieler"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-primary-blue",children:"üîµ AEK Athen"}),e.jsx("div",{className:"space-y-2",children:t.topPlayers.aek.map((a,r)=>e.jsx(Fe,{player:a,rank:r+1},r))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-accent-red",children:"üî¥ Real Madrid"}),e.jsx("div",{className:"space-y-2",children:t.topPlayers.real.map((a,r)=>e.jsx(Fe,{player:a,rank:r+1},r))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"üíé Beste Investments"}),e.jsx("div",{className:"space-y-3",children:l.best.map((a,r)=>e.jsx($e,{investment:a,type:"best"},r))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"‚ö†Ô∏è Underperformer"}),e.jsx("div",{className:"space-y-3",children:l.worst.map((a,r)=>e.jsx($e,{investment:a,type:"worst"},r))})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üìà ROI-Entwicklung"}),e.jsx("div",{className:"h-64 bg-gray-50 rounded-lg p-4 flex items-end gap-2",children:n.monthly.map((a,r)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:`w-full rounded-t ${a.roi>=0?"bg-green-500":"bg-red-500"}`,style:{height:`${Math.abs(a.roi)*2}%`}}),e.jsx("div",{className:"text-xs mt-1 text-center",children:a.month}),e.jsxs("div",{className:"text-xs text-gray-600",children:[a.roi,"%"]})]},r))})]})]})}function Ys({data:s}){const{valuations:t,market:l}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üè™ Markt√ºbersicht"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(de,{title:"Gesamtmarktwert",value:`‚Ç¨${l.totalValue.toLocaleString()}`,icon:"üíé",color:"text-primary-green"}),e.jsx(de,{title:"Durchschnittswert",value:`‚Ç¨${l.avgValue.toLocaleString()}`,icon:"üìä",color:"text-primary-blue"}),e.jsx(de,{title:"Wertsteigerung",value:`+‚Ç¨${l.valueIncrease.toLocaleString()}`,icon:"üìà",color:"text-green-600"}),e.jsx(de,{title:"Top Asset",value:l.topAsset.name,icon:"‚≠ê",color:"text-accent-yellow"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üèÜ Spieler-Marktwerte"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-primary-blue",children:"üîµ AEK Athen"}),e.jsx("div",{className:"space-y-2",children:t.aek.map((n,a)=>e.jsx(Le,{player:n,rank:a+1},a))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-accent-red",children:"üî¥ Real Madrid"}),e.jsx("div",{className:"space-y-2",children:t.real.map((n,a)=>e.jsx(Le,{player:n,rank:a+1},a))})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üìà Marktwert-Entwicklung"}),e.jsx("div",{className:"space-y-4",children:l.trends.map((n,a)=>e.jsx(st,{trend:n},a))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üí° Investment-Chancen"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.opportunities.map((n,a)=>e.jsx(tt,{opportunity:n},a))})]})]})}function Xs({data:s}){const{forecast:t,scenarios:l,recommendations:n}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üîÆ Finanz-Prognose"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(be,{period:"Next Quarter",value:`‚Ç¨${t.nextQuarter.toLocaleString()}`,confidence:t.confidence.quarter,icon:"üìÖ"}),e.jsx(be,{period:"Saisonende",value:`‚Ç¨${t.seasonEnd.toLocaleString()}`,confidence:t.confidence.season,icon:"üèÅ"}),e.jsx(be,{period:"N√§chste Saison",value:`‚Ç¨${t.nextSeason.toLocaleString()}`,confidence:t.confidence.nextSeason,icon:"üîÑ"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üé≠ Szenario-Analyse"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(fe,{title:"Optimistisch",scenario:l.optimistic,color:"bg-green-100 border-green-300",icon:"üìà"}),e.jsx(fe,{title:"Realistisch",scenario:l.realistic,color:"bg-blue-100 border-blue-300",icon:"üìä"}),e.jsx(fe,{title:"Pessimistisch",scenario:l.pessimistic,color:"bg-red-100 border-red-300",icon:"üìâ"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üí° Budget-Empfehlungen"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"üîµ AEK Empfehlungen"}),e.jsx("div",{className:"space-y-3",children:n.aek.map((a,r)=>e.jsx(ze,{recommendation:a},r))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"üî¥ Real Empfehlungen"}),e.jsx("div",{className:"space-y-3",children:n.real.map((a,r)=>e.jsx(ze,{recommendation:a},r))})]})]})]})]})}function et({data:s}){const{health:t}=s;return e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üè• Financial Health Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(oe,{title:"Liquidit√§t",score:t.liquidity.score,status:t.liquidity.status,icon:"üíß"}),e.jsx(oe,{title:"Stabilit√§t",score:t.stability.score,status:t.stability.status,icon:"üèõÔ∏è"}),e.jsx(oe,{title:"Wachstum",score:t.growth.score,status:t.growth.status,icon:"üìà"}),e.jsx(oe,{title:"Effizienz",score:t.efficiency.score,status:t.efficiency.status,icon:"‚ö°"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"üéØ Gesamt-Assessment"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-green",children:[t.overallScore,"/100"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Financial Health Score"})]}),e.jsxs("div",{className:"flex-2",children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:t.overallStatus}),e.jsx("div",{className:"text-xs text-gray-600",children:t.summary})]})]})]})]})}function ie({title:s,value:t,change:l,icon:n,color:a}){const r=l>=0;return e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:n}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:s})]}),e.jsx("div",{className:`text-2xl font-bold ${a}`,children:t}),e.jsxs("div",{className:`text-sm flex items-center gap-1 ${r?"text-green-600":"text-red-600"}`,children:[e.jsx("span",{children:r?"‚ÜóÔ∏è":"‚ÜòÔ∏è"}),e.jsxs("span",{children:[r?"+":"",l,"%"]})]})]})}function Ke({team:s,data:t}){return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-3",children:s}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Budget:"}),e.jsxs("span",{className:"font-semibold",children:["‚Ç¨",t.budget.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ausgegeben:"}),e.jsxs("span",{className:"font-semibold",children:["‚Ç¨",t.spent.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Verf√ºgbar:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["‚Ç¨",t.available.toLocaleString()]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-primary-blue h-2 rounded-full",style:{width:`${t.spent/t.budget*100}%`}})})]})]})}function je({title:s,aek:t,real:l,format:n}){const a=r=>n==="currency"?`‚Ç¨${r.toLocaleString()}`:r.toString();return e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"font-semibold mb-3",children:s}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-primary-blue",children:"AEK:"}),e.jsx("span",{className:"font-semibold",children:a(t)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-accent-red",children:"Real:"}),e.jsx("span",{className:"font-semibold",children:a(l)})]}),e.jsx("div",{className:"text-xs text-gray-600 text-center pt-2 border-t",children:t<l?"AEK effizienter":l<t?"Real effizienter":"Gleichstand"})]})]})}function ce({title:s,value:t,benchmark:l,icon:n}){const r=(typeof t=="string"?parseFloat(t):t)>=l;return e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:n}),e.jsx("span",{className:"text-sm font-medium",children:s})]}),e.jsx("div",{className:"text-2xl font-bold",children:t}),e.jsxs("div",{className:`text-xs ${r?"text-green-600":"text-red-600"}`,children:["Benchmark: ",l,typeof l=="number"?"%":""]})]})}function Fe({player:s,rank:t}){return e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:["#",t]}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold text-green-600",children:[s.roi,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["‚Ç¨",s.investment,"k"]})]})]})}function $e({investment:s,type:t}){const l=t==="best"?"bg-green-50 border-green-200":"bg-red-50 border-red-200",n=t==="best"?"text-green-800":"text-red-800";return e.jsx("div",{className:`p-3 rounded-lg border ${l}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm",children:s.player}),e.jsx("div",{className:"text-xs text-gray-600",children:s.team})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold ${n}`,children:[s.roi,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["‚Ç¨",s.investment,"k"]})]})]})})}function de({title:s,value:t,icon:l,color:n}){return e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:l}),e.jsx("span",{className:"text-sm font-medium",children:s})]}),e.jsx("div",{className:`text-2xl font-bold ${n}`,children:t})]})}function Le({player:s,rank:t}){const l=s.change>=0?"text-green-600":"text-red-600",n=s.change>=0?"‚ÜóÔ∏è":"‚ÜòÔ∏è";return e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:["#",t]}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold",children:["‚Ç¨",s.currentValue.toLocaleString()]}),e.jsxs("div",{className:`text-xs ${l}`,children:[n," ",Math.abs(s.change).toFixed(1),"%"]})]})]})}function st({trend:s}){return e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.player}),e.jsx("div",{className:"text-sm text-gray-600",children:s.team})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["+",s.trend,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:s.period})]})]})}function tt({opportunity:s}){const t={Low:"text-green-600",Medium:"text-yellow-600",High:"text-red-600"};return e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:s.type}),e.jsxs("span",{className:`text-xs ${t[s.risk]}`,children:[s.risk," Risk"]})]}),e.jsx("div",{className:"text-lg font-bold mb-1",children:s.player}),e.jsxs("div",{className:"text-sm text-green-600 font-semibold",children:["+",s.potential,"% Potential"]})]})}function be({period:s,value:t,confidence:l,icon:n}){return e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl mb-2",children:n}),e.jsx("div",{className:"font-semibold text-sm mb-1",children:s}),e.jsx("div",{className:"text-2xl font-bold text-primary-green mb-1",children:t}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Konfidenz: ",l,"%"]})]})}function fe({title:s,scenario:t,color:l,icon:n}){return e.jsxs("div",{className:`p-4 rounded-lg border ${l}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:n}),e.jsx("span",{className:"font-semibold",children:s})]}),e.jsxs("div",{className:"text-2xl font-bold mb-2",children:["‚Ç¨",t.budget.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:t.description}),e.jsxs("div",{className:"text-xs",children:["Wahrscheinlichkeit: ",t.probability,"%"]})]})}function ze({recommendation:s}){const t={Invest:"bg-green-100 text-green-800",Save:"bg-blue-100 text-blue-800",Optimize:"bg-yellow-100 text-yellow-800",Monitor:"bg-orange-100 text-orange-800",Plan:"bg-purple-100 text-purple-800"},l={High:"text-red-600",Medium:"text-yellow-600",Low:"text-green-600"};return e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${t[s.type]}`,children:s.type}),e.jsx("span",{className:`text-xs font-semibold ${l[s.priority]}`,children:s.priority})]}),e.jsx("div",{className:"text-sm",children:s.action})]})}function oe({title:s,score:t,status:l,icon:n}){const a=r=>r>=80?"text-green-600":r>=60?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl mb-2",children:n}),e.jsx("div",{className:"font-semibold text-sm mb-1",children:s}),e.jsxs("div",{className:`text-2xl font-bold ${a(t)}`,children:[t,"/100"]}),e.jsx("div",{className:"text-xs text-gray-600",children:l})]})}class at{constructor(t,l,n,a){this.matches=t||[],this.players=l||[],this.bans=n||[],this.spielerDesSpiels=a||[],this.aekPlayers=(l||[]).filter(r=>r.team==="AEK"),this.realPlayers=(l||[]).filter(r=>r.team==="Real")}calculateTeamRecords(){const t={wins:0,losses:0},l={wins:0,losses:0};return this.matches.forEach(n=>{const a=n.goalsa||0,r=n.goalsb||0;a>r?(t.wins++,l.losses++):r>a&&(l.wins++,t.losses++)}),{aek:t,real:l}}calculateRecentForm(t=5){const l=this.matches.slice(-t),n=[],a=[];return l.forEach(r=>{const i=r.goalsa||0,g=r.goalsb||0;i>g?(n.push("W"),a.push("L")):g>i?(n.push("L"),a.push("W")):(n.push("D"),a.push("D"))}),{aek:n,real:a}}calculatePlayerStats(){return this.players.map(t=>{const l=this.countPlayerMatches(),n=this.bans.filter(i=>i.player_id===t.id),a=this.spielerDesSpiels.find(i=>i.name===t.name&&i.team===t.team),r=a&&a.count||0;return{...t,goals:t.goals||0,matchesPlayed:l,sdsCount:r,goalsPerGame:l>0?((t.goals||0)/l).toFixed(2):"0.00",totalBans:n.length,disciplinaryScore:this.calculateDisciplinaryScore(n)}}).sort((t,l)=>(l.goals||0)-(t.goals||0))}countPlayerGoalsFromMatches(t,l){let n=0;return this.matches.forEach(a=>{l==="AEK"&&a.goalslista&&(Array.isArray(a.goalslista)?a.goalslista:typeof a.goalslista=="string"?JSON.parse(a.goalslista):[]).forEach(i=>{const g=typeof i=="string"?i:i.player,h=typeof i=="string"?1:i.count||1;g===t&&(n+=h)}),l==="Real"&&a.goalslistb&&(Array.isArray(a.goalslistb)?a.goalslistb:typeof a.goalslistb=="string"?JSON.parse(a.goalslistb):[]).forEach(i=>{const g=typeof i=="string"?i:i.player,h=typeof i=="string"?1:i.count||1;g===t&&(n+=h)})}),n}countPlayerMatches(){return this.matches.length}calculateDisciplinaryScore(t){let l=0;return t.forEach(n=>{switch(n.type){case"Gelb-Rote Karte":l+=3;break;case"Rote Karte":l+=5;break;case"Verletzung":l+=1;break;default:l+=1}}),l}calculateAdvancedStats(){const t=this.matches.length,l=this.matches.reduce((n,a)=>n+(a.goalsa||0)+(a.goalsb||0),0);return{avgGoalsPerMatch:t>0?(l/t).toFixed(2):"0.00",totalMatches:t,totalGoals:l,aekTotalGoals:this.matches.reduce((n,a)=>n+(a.goalsa||0),0),realTotalGoals:this.matches.reduce((n,a)=>n+(a.goalsb||0),0),highestScoringMatch:t>0?Math.max(...this.matches.map(n=>(n.goalsa||0)+(n.goalsb||0))):0,cleanSheets:{aek:this.matches.filter(n=>n.goalsb===0).length,real:this.matches.filter(n=>n.goalsa===0).length}}}calculatePerformanceTrends(){const t={};return this.matches.forEach(l=>{const n=new Date(l.date),a=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;t[a]||(t[a]={month:a,aekWins:0,realWins:0,totalGoals:0,matchCount:0});const r=l.goalsa||0,i=l.goalsb||0;t[a].totalGoals+=r+i,t[a].matchCount++,r>i?t[a].aekWins++:i>r&&t[a].realWins++}),t}calculateHeadToHead(){const t={totalMatches:this.matches.length,aekWins:0,realWins:0,aekGoals:0,realGoals:0,biggestAekWin:{diff:0,score:"",date:"",opponent:"Real Madrid"},biggestRealWin:{diff:0,score:"",date:"",opponent:"AEK Athen"}};return this.matches.forEach(l=>{const n=l.goalsa||0,a=l.goalsb||0,r=Math.abs(n-a);t.aekGoals+=n,t.realGoals+=a,n>a?(t.aekWins++,r>t.biggestAekWin.diff&&(t.biggestAekWin={diff:r,score:`${n}:${a}`,date:l.date||"",opponent:"Real Madrid"})):a>n&&(t.realWins++,r>t.biggestRealWin.diff&&(t.biggestRealWin={diff:r,score:`${a}:${n}`,date:l.date||"",opponent:"AEK Athen"}))}),t}}const $={clToLiters:s=>(s/100).toFixed(3),clToShots:s=>(s/2).toFixed(0),clToGlasses:s=>(s/20).toFixed(1),formatAlcoholDisplay:s=>({cl:s,liters:(s/100).toFixed(3),shots:Math.floor(s/2),glasses:(s/20).toFixed(1)})};function rt({onNavigate:s}){const[t,l]=K.useState("dashboard"),n=()=>{var x,d,W,m;try{const j=localStorage.getItem("teamManagers");if(j){const w=JSON.parse(j);return{aekChef:{name:((x=w.aek)==null?void 0:x.name)||"Alexander",weight:((d=w.aek)==null?void 0:d.weight)||100,gender:"male"},realChef:{name:((W=w.real)==null?void 0:W.name)||"Philip",weight:((m=w.real)==null?void 0:m.weight)||105,gender:"male"}}}}catch(j){console.error("Error loading manager settings:",j)}return{aekChef:{name:"Alexander",weight:100,gender:"male"},realChef:{name:"Philip",weight:105,gender:"male"}}},[a,r]=K.useState(()=>({...Je(),playerData:n()})),{data:i,loading:g}=L("matches","*"),{data:h,loading:y}=L("players","*"),{data:k,loading:T}=L("spieler_des_spiels","*"),{data:S,loading:D}=L("bans","*");K.useEffect(()=>{const x=()=>{r(d=>({...d,playerData:n()}))};return window.addEventListener("storage",x),window.addEventListener("managerSettingsChanged",x),()=>{window.removeEventListener("storage",x),window.removeEventListener("managerSettingsChanged",x)}},[]);const u=x=>{r(d=>Ye(x,d))};K.useEffect(()=>{if(i&&i.length>0){const x=i.reduce((d,W)=>!d||W.id>d.id?W:d,null);if(x&&(!a.cumulativeShots.lastMatchId||a.cumulativeShots.lastMatchId<x.id||a.cumulativeShots.total===0)){const d=ke(i,a);r(d)}}},[i,a]);const P=g||y||T||D,M=new at(i,h,S,k),p=M.calculateTeamRecords(),G=M.calculateRecentForm(5),f=M.calculatePlayerStats(),C=M.calculateAdvancedStats(),I=M.calculatePerformanceTrends(),N=M.calculateHeadToHead(),V=(i==null?void 0:i.length)||0,H=(h==null?void 0:h.filter(x=>x.team==="AEK"))||[],_=(h==null?void 0:h.filter(x=>x.team==="Real"))||[],Q=H.reduce((x,d)=>x+(d.value||0),0),X=_.reduce((x,d)=>x+(d.value||0),0),xe=Q+X,b=p.aek.wins,E=p.real.wins,Z=x=>x.map((d,W)=>e.jsx("span",{className:`inline-block w-6 h-6 text-xs font-bold rounded-full text-center leading-6 mx-0.5 ${d==="W"?"bg-green-500 text-white":d==="L"?"bg-red-500 text-white":"bg-gray-400 text-white"}`,children:d},W)),ee=x=>`${(x||0).toFixed(1)}M ‚Ç¨`,We=[{id:"dashboard",label:"Dashboard",icon:"üéØ"},{id:"overview",label:"√úbersicht",icon:"üìä"},{id:"players",label:"Spieler",icon:"üë•"},{id:"teams",label:"Teams",icon:"üèÜ"},{id:"trends",label:"Trends",icon:"üìà"},{id:"alkohol",label:"Alkohol",icon:"üç∫"},{id:"advanced",label:"Erweitert",icon:"üî¨"},{id:"playeranalytics",label:"Spieler-Analytics",icon:"üéØ"},{id:"matchprediction",label:"Match-Prediction",icon:"üîÆ"},{id:"financialanalytics",label:"Finanz-Analytics",icon:"üí∞"}];if(P)return e.jsx(Y,{message:"Lade Statistiken..."});const Be=()=>{const x=f.length>0?f[0]:null,d=f.filter(m=>m.sdsCount>0).sort((m,j)=>j.sdsCount-m.sdsCount)[0],W=i==null?void 0:i.reduce((m,j)=>{const w=F=>{if(!F)return[];try{return typeof F=="string"?JSON.parse(F):F}catch{return[]}},R=w(j.goalslista),B=w(j.goalslistb);return[...R,...B].forEach(F=>{const c=typeof F=="object"?F.player:F,o=typeof F=="object"?F.count:1;o>m.count&&(m={player:c,count:o,match:j})}),m},{player:null,count:0,match:null});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:V}),e.jsx("div",{className:"text-sm text-text-muted",children:"Spiele gespielt"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:C.totalGoals}),e.jsx("div",{className:"text-sm text-text-muted",children:"Tore insgesamt"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["‚åÄ ",V>0?(C.totalGoals/V).toFixed(1):"0.0","/Spiel"]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary-green",children:x?x.name:"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["ü•á Topscorer (",x?x.goals:0," Tore)"]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:x&&x.matchesPlayed>0?`‚åÄ ${(x.goals/x.matchesPlayed).toFixed(2)}/Spiel`:"‚åÄ 0.00/Spiel"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary-green",children:d?d.name:"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["‚≠ê Top SdS (",d?d.sdsCount:0,"x)"]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:d&&d.matchesPlayed>0?`${(d.sdsCount/d.matchesPlayed*100).toFixed(1)}% Quote`:"0.0% Quote"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:N.biggestAekWin.diff>0?N.biggestAekWin.score:"‚Äì"}),e.jsx("div",{className:"text-sm text-text-muted",children:"üîµ Gr√∂√üter AEK Sieg"}),N.biggestAekWin.diff>0&&e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["vs ",N.biggestAekWin.opponent,e.jsx("br",{}),new Date(N.biggestAekWin.date).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:N.biggestRealWin.diff>0?N.biggestRealWin.score:"‚Äì"}),e.jsx("div",{className:"text-sm text-text-muted",children:"üî¥ Gr√∂√üter Real Sieg"}),N.biggestRealWin.diff>0&&e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["vs ",N.biggestRealWin.opponent,e.jsx("br",{}),new Date(N.biggestRealWin.date).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-accent-blue",children:(W==null?void 0:W.player)||"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["‚öΩ Meiste Tore (",(W==null?void 0:W.count)||0," in einem Spiel)"]}),(W==null?void 0:W.match)&&e.jsx("div",{className:"text-xs text-text-muted mt-1",children:new Date(W.match.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-accent-red",children:(()=>{const m={};S==null||S.forEach(w=>{const R=h==null?void 0:h.find(F=>F.id===w.player_id),B=(R==null?void 0:R.name)||"Unbekannt";m[B]=(m[B]||0)+1});const j=Object.entries(m).sort((w,R)=>R[1]-w[1])[0];return j?j[0]:"Keine Daten"})()}),e.jsxs("div",{className:"text-sm text-text-muted",children:["üü• Meiste Sperren (",(()=>{const m={};S==null||S.forEach(w=>{const R=h==null?void 0:h.find(F=>F.id===w.player_id),B=(R==null?void 0:R.name)||"Unbekannt";m[B]=(m[B]||0)+1});const j=Object.entries(m).sort((w,R)=>R[1]-w[1])[0];return j?j[1]:0})(),"x)"]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìä Erweiterte Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-primary-green",children:(()=>{const m=(S==null?void 0:S.reduce((w,R)=>{const B=new Date(R.start_date),F=new Date(R.end_date),c=Math.ceil((F-B)/(1e3*60*60*24));return w+(c>0?c:0)},0))||0;return`${(S==null?void 0:S.length)>0?(m/S.length).toFixed(1):"0.0"} Tage`})()}),e.jsx("div",{className:"text-sm text-text-muted",children:"‚åÄ Sperrenl√§nge"})]}),e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-accent-blue",children:f.filter(m=>m.goals>0).length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Aktive Torsch√ºtzen"})]}),e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-accent-red",children:(S==null?void 0:S.length)||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Sperren"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üí° Besondere Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:(()=>{let m=0,j=0,w=0;return i==null||i.forEach(R=>{const B=R.goalsa||0,F=R.goalsb||0;B>F?(j++,w=0,j>m&&(m=j)):F>B?(w++,j=0,w>m&&(m=w)):(j=0,w=0)}),m})()}),e.jsx("div",{className:"text-sm text-green-700",children:"üî• L√§ngste Siegesserie"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:(()=>{let m=0,j=0,w=0,R="";return i==null||i.forEach(B=>{const F=B.goalsa||0,c=B.goalsb||0;F>c?(j++,w=0,j>m&&(m=j,R="AEK")):c>F?(w++,j=0,w>m&&(m=w,R="Real")):(j=0,w=0)}),R||"Keine"})()})]}),e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-xl font-bold text-yellow-600",children:(()=>{let m=0;return f.forEach(j=>{if(j.matchesPlayed>0){const w=j.goals/j.matchesPlayed;w>m&&(m=w)}}),m.toFixed(2)})()}),e.jsx("div",{className:"text-sm text-yellow-700",children:"‚ö° H√∂chste Effizienz"}),e.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:(()=>{let m=0,j=null;return f.forEach(w=>{if(w.matchesPlayed>0){const R=w.goals/w.matchesPlayed;R>m&&(m=R,j=w.name)}}),j||"Keine Daten"})()})]}),e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:(()=>{const m=p.aek.wins,j=p.real.wins;return m+j===0?"100%":`${(Math.min(m,j)/Math.max(m,j)*100).toFixed(0)}%`})()}),e.jsx("div",{className:"text-sm text-blue-700",children:"‚öñÔ∏è Team-Balance"}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Ausgeglichenheit (",p.aek.wins,":",p.real.wins,")"]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card border-l-4 border-blue-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-blue-600",children:"AEK Athen"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-semibold text-green-600",children:b})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-semibold text-red-600",children:p.aek.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Marktwert:"}),e.jsx("span",{className:"font-semibold",children:ee(Q)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null:"}),e.jsx("span",{className:"font-semibold",children:C.cleanSheets.aek})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm text-text-muted mb-1",children:"Form (letzte 5):"}),e.jsx("div",{className:"flex",children:Z(G.aek)})]})]})]}),e.jsxs("div",{className:"modern-card border-l-4 border-red-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-red-600",children:"Real Madrid"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-semibold text-green-600",children:E})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-semibold text-red-600",children:p.real.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Marktwert:"}),e.jsx("span",{className:"font-semibold",children:ee(X)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null:"}),e.jsx("span",{className:"font-semibold",children:C.cleanSheets.real})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm text-text-muted mb-1",children:"Form (letzte 5):"}),e.jsx("div",{className:"flex",children:Z(G.real)})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üèÜ Top-Torsch√ºtzen"}),e.jsx("div",{className:"space-y-2",children:f.slice(0,5).map((m,j)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${j===0?"bg-yellow-500 text-white":j===1?"bg-gray-400 text-white":j===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:j+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m.name}),e.jsx("div",{className:"text-sm text-text-muted",children:m.team})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:[m.goals," Tore"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[m.goalsPerGame," ‚åÄ"]})]})]},m.id))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"‚≠ê Top-Spieler des Spiels"}),e.jsx("div",{className:"space-y-2",children:f.filter(m=>m.sdsCount>0).sort((m,j)=>j.sdsCount-m.sdsCount).slice(0,5).map((m,j)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${j===0?"bg-yellow-500 text-white":j===1?"bg-gray-400 text-white":j===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:j+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m.name}),e.jsx("div",{className:"text-sm text-text-muted",children:m.team})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:[m.sdsCount,"x SdS"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[m.matchesPlayed>0?(m.sdsCount/m.matchesPlayed*100).toFixed(1):"0.0","% Quote"]})]})]},m.id))}),f.filter(m=>m.sdsCount>0).length===0&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Spieler des Spiels Auszeichnungen vergeben"})]})]})},Ve=()=>e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìä Spielerstatistiken"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-light",children:[e.jsx("th",{className:"text-left py-2",children:"Spieler"}),e.jsx("th",{className:"text-left py-2",children:"Team"}),e.jsx("th",{className:"text-center py-2",children:"Tore"}),e.jsx("th",{className:"text-center py-2",children:"‚åÄ/Spiel"}),e.jsx("th",{className:"text-center py-2",children:"SdS"}),e.jsx("th",{className:"text-center py-2",children:"Sperren"}),e.jsx("th",{className:"text-right py-2",children:"Marktwert"})]})}),e.jsx("tbody",{children:f.map(x=>e.jsxs("tr",{className:"border-b border-border-light hover:bg-bg-secondary",children:[e.jsx("td",{className:"py-2 font-medium",children:x.name}),e.jsx("td",{className:"py-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x.team==="AEK"?"bg-blue-100 text-blue-800":x.team==="Ehemalige"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:x.team})}),e.jsx("td",{className:"py-2 text-center font-bold",children:x.goals}),e.jsx("td",{className:"py-2 text-center",children:x.goalsPerGame}),e.jsx("td",{className:"py-2 text-center",children:x.sdsCount}),e.jsx("td",{className:"py-2 text-center",children:x.totalBans}),e.jsx("td",{className:"py-2 text-right",children:ee(x.value)})]},x.id))})]})})]}),Ie=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"‚öñÔ∏è Team-Vergleich"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-blue-600",children:"AEK Athen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:H.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:b})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-medium",children:p.aek.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gesamtmarktwert:"}),e.jsx("span",{className:"font-medium",children:ee(Q)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsx("span",{className:"font-medium",children:C.cleanSheets.aek})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-red-600",children:"Real Madrid"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:_.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:E})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-medium",children:p.real.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gesamtmarktwert:"}),e.jsx("span",{className:"font-medium",children:ee(X)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsx("span",{className:"font-medium",children:C.cleanSheets.real})]})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìà Erweiterte Statistiken"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Diese Statistiken bieten tiefere Einblicke in die Team-Performance und wichtige Kennzahlen."}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:C.highestScoringMatch}),e.jsx("div",{className:"text-sm text-text-muted",children:"H√∂chste Toranzahl"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"in einem einzelnen Spiel"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:ee(xe)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamtmarktwert"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"aller aktiven Spieler"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:Math.abs(b-E)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Siegesdifferenz"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"zwischen den Teams"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-blue",children:V>0?((H.length+_.length)*(V/2)).toFixed(0):0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesch√§tzte Spielminuten"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"pro Spieler (‚åÄ 45min)"})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:"üéØ Offensive Highlights"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Torreichstes Team:"}),e.jsxs("span",{className:"font-medium",children:[C.aekTotalGoals>=C.realTotalGoals?"AEK Athen":"Real Madrid","(",Math.max(C.aekTotalGoals,C.realTotalGoals)," Tore)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"H√∂chste Einzelspiel-Toranzahl:"}),e.jsxs("span",{className:"font-medium",children:[C.highestScoringMatch," Tore"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktivster Torsch√ºtze:"}),e.jsx("span",{className:"font-medium",children:f.length>0?`${f[0].name} (${f[0].goals} Tore)`:"Keine Daten"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:"‚öñÔ∏è Team-Balance"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Kader-Unterschied:"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(H.length-_.length)," Spieler"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Marktwert-Verh√§ltnis:"}),e.jsx("span",{className:"font-medium",children:H.reduce((x,d)=>x+(d.value||0),0)>_.reduce((x,d)=>x+(d.value||0),0)?"AEK f√ºhrt":"Real f√ºhrt"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Dominanteres Team:"}),e.jsx("span",{className:"font-medium",children:b>E?"AEK Athen":E>b?"Real Madrid":"Ausgeglichen"})]})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"‚öîÔ∏è Head-to-Head Bilanz"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Direkter Vergleich zwischen AEK Athen und Real Madrid √ºber alle Spiele."}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N.aekWins}),e.jsx("div",{className:"text-sm text-blue-700",children:"AEK Siege"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:N.totalMatches>0?`${(N.aekWins/N.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:N.realWins}),e.jsx("div",{className:"text-sm text-red-700",children:"Real Siege"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:N.totalMatches>0?`${(N.realWins/N.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:N.totalMatches-N.aekWins-N.realWins}),e.jsx("div",{className:"text-sm text-gray-700",children:"Unentschieden"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:N.totalMatches>0?`${((N.totalMatches-N.aekWins-N.realWins)/N.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.aekGoals+N.realGoals}),e.jsx("div",{className:"text-sm text-green-700",children:"Tore gesamt"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:N.totalMatches>0?`‚åÄ ${((N.aekGoals+N.realGoals)/N.totalMatches).toFixed(1)} pro Spiel`:"‚åÄ 0 pro Spiel"})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"üîµ Gr√∂√üter AEK Sieg"}),N.biggestAekWin.diff>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:N.biggestAekWin.score}),e.jsxs("div",{className:"text-sm text-blue-700",children:["Unterschied: ",N.biggestAekWin.diff," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(N.biggestAekWin.date).toLocaleDateString("de-DE")})]}):e.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"üî¥ Gr√∂√üter Real Sieg"}),N.biggestRealWin.diff>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 mb-1",children:N.biggestRealWin.score}),e.jsxs("div",{className:"text-sm text-red-700",children:["Unterschied: ",N.biggestRealWin.diff," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(N.biggestRealWin.date).toLocaleDateString("de-DE")})]}):e.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üî¨ Detailanalyse"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Erweiterte Metriken f√ºr eine tiefgreifende Team-Analyse."}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-blue-600",children:"üí∞ Wirtschaftliche Effizienz"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"‚åÄ Marktwert AEK:"}),e.jsx("span",{className:"font-medium",children:H.length>0?`${(H.reduce((x,d)=>x+(d.value||0),0)/H.length).toFixed(1)}M ‚Ç¨`:"0M ‚Ç¨"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"‚åÄ Marktwert Real:"}),e.jsx("span",{className:"font-medium",children:_.length>0?`${(_.reduce((x,d)=>x+(d.value||0),0)/_.length).toFixed(1)}M ‚Ç¨`:"0M ‚Ç¨"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore pro 1M ‚Ç¨ (AEK):"}),e.jsx("span",{className:"font-medium",children:H.reduce((x,d)=>x+(d.value||0),0)>0?(C.aekTotalGoals/H.reduce((x,d)=>x+(d.value||0),0)).toFixed(2):"0.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore pro 1M ‚Ç¨ (Real):"}),e.jsx("span",{className:"font-medium",children:_.reduce((x,d)=>x+(d.value||0),0)>0?(C.realTotalGoals/_.reduce((x,d)=>x+(d.value||0),0)).toFixed(2):"0.00"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-red-600",children:"üé≤ Spielstatistiken"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Spiele gespielt:"}),e.jsx("span",{className:"font-medium",children:V})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Unentschieden:"}),e.jsx("span",{className:"font-medium",children:V-b-E})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"‚åÄ Spieldauer:"}),e.jsx("span",{className:"font-medium",children:"~90 Minuten"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"L√§ngste Serie:"}),e.jsxs("span",{className:"font-medium",children:[b>=E?"AEK":"Real"," (",Math.max(b,E)," Siege)"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-purple-600",children:"üèÜ Erfolgs-Metriken"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktivste Spieler:"}),e.jsx("span",{className:"font-medium",children:H.length+_.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Top-Performer:"}),e.jsxs("span",{className:"font-medium",children:[f.filter(x=>x.sdsCount>0).length," Spieler"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Konsistenz AEK:"}),e.jsx("span",{className:"font-medium",children:V>0?`${(b/V*100).toFixed(0)}% Erfolg`:"0% Erfolg"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Konsistenz Real:"}),e.jsx("span",{className:"font-medium",children:V>0?`${(E/V*100).toFixed(0)}% Erfolg`:"0% Erfolg"})]})]})]})]})]})]}),Oe=()=>e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìà Performance-Trends"}),e.jsx("div",{className:"space-y-4",children:Object.values(I).reverse().map(x=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border-light last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:x.month}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-blue-600 font-medium",children:["AEK: ",x.aekWins]}),e.jsx("span",{className:"mx-2",children:"vs"}),e.jsxs("span",{className:"text-red-600 font-medium",children:["Real: ",x.realWins]})]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[x.matchCount," Spiele, ",x.totalGoals," Tore"]}),e.jsxs("div",{className:"text-sm font-medium",children:["‚åÄ ",(x.totalGoals/x.matchCount).toFixed(1)," Tore/Spiel"]})]})]},x.month))})]}),He=()=>{const d=(()=>{const c={totalShots:0,aekShots:0,realShots:0,playerShots:{}};if(a.cumulativeShots&&a.cumulativeShots.total>0)c.totalShots=a.cumulativeShots.total,c.aekShots=a.cumulativeShots.aek,c.realShots=a.cumulativeShots.real;else{const o=(i==null?void 0:i.slice().sort((A,z)=>{const O=new Date(A.date||0),J=new Date(z.date||0);return O-J}))||[],v={};o.forEach(A=>{const O=new Date(A.date||0).toDateString();v[O]||(v[O]=[]),v[O].push(A)}),Object.keys(v).forEach(A=>{const z=v[A];let O=0,J=0,ae=0,me=0;z.forEach(le=>{const Ue=le.goalsa||0,Ze=le.goalsb||0;O+=Ue,J+=Ze;const ve=Math.floor(J/2),Ne=Math.floor(O/2),ye=(ve-ae)*2,Se=(Ne-me)*2;c.aekShots+=ye,c.realShots+=Se,c.totalShots+=ye+Se,ae=ve,me=Ne})})}return h==null||h.forEach(o=>{o.goals>0&&(c.playerShots[o.name]||(c.playerShots[o.name]={totalGoals:0,alcoholCaused:0}),c.playerShots[o.name].totalGoals=o.goals,c.playerShots[o.name].alcoholCaused=Math.floor(o.goals/2)*2)}),c})(),W=Object.entries(d.playerShots).sort(([,c],[,o])=>o.alcoholCaused-c.alcoholCaused).slice(0,10),m=()=>{const c=new Date,o=new Date(c.getFullYear(),c.getMonth(),c.getDate()),v=new Date(o);return v.setDate(v.getDate()-1),(i==null?void 0:i.filter(A=>{const z=new Date(A.date),O=new Date(z.getFullYear(),z.getMonth(),z.getDate());return O>=v&&O<=o}))||[]},j=()=>{if(a.mode==="automatic"){const o=m().reduce((v,A)=>v+(A.goalsb||0),0);return Math.floor(o/2)*2}return Math.floor(a.realGoals/2)*2},w=()=>{if(a.mode==="automatic"){const o=m().reduce((v,A)=>v+(A.goalsa||0),0);return Math.floor(o/2)*2}return Math.floor(a.aekGoals/2)*2},R=()=>{if(a.mode==="automatic"){const o=m().reduce((v,A)=>v+(A.goalsa||0)+(A.goalsb||0),0);return Math.floor(o/2)*2}else return Math.floor((a.aekGoals+a.realGoals)/2)*2},B=(c,o,v=null,A=0)=>{if(!o.weight||c===0&&A===0)return"0.00";let z=c*10*.4*.789;z+=A*.5*1e3*.05*.789;const O=o.gender==="female"?.6:.7;let J=z/(o.weight*O);const ae=v||a.drinkingStartTime;if(ae){const le=(new Date-new Date(ae))/(1e3*60*60);J=Math.max(0,J-le*.15)}return J.toFixed(2)},F=c=>{const o=parseFloat(c);return o===0?{status:"N√ºchtern",color:"text-green-600",bg:"bg-green-50",border:"border-green-200"}:o<.5?{status:"Gering beeintr√§chtigt",color:"text-yellow-600",bg:"bg-yellow-50",border:"border-yellow-200"}:o<1.1?{status:"Fahrunt√ºchtig",color:"text-orange-600",bg:"bg-orange-50",border:"border-orange-200"}:o<2?{status:"Stark beeintr√§chtigt",color:"text-red-600",bg:"bg-red-50",border:"border-red-200"}:{status:"Lebensgef√§hrlich",color:"text-red-800",bg:"bg-red-100",border:"border-red-400"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"üç∫"}),e.jsxs("div",{className:"text-2xl font-bold text-primary-green",children:[d.totalShots,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Schnaps"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["‚âà ",$.clToLiters(d.totalShots),"L"]}),e.jsxs("div",{children:["‚âà ",$.clToShots(d.totalShots)," Shots"]}),e.jsxs("div",{children:["‚âà ",$.clToGlasses(d.totalShots)," Gl√§ser"]})]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"üîµ"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[d.aekShots,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"AEK getrunken"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["‚âà ",$.clToLiters(d.aekShots),"L"]}),e.jsxs("div",{children:["‚âà ",$.clToShots(d.aekShots)," Shots"]}),e.jsxs("div",{children:[d.totalShots>0?(d.aekShots/d.totalShots*100).toFixed(1):0,"% vom Gesamt"]})]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"üî¥"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[d.realShots,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Real getrunken"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["‚âà ",$.clToLiters(d.realShots),"L"]}),e.jsxs("div",{children:["‚âà ",$.clToShots(d.realShots)," Shots"]}),e.jsxs("div",{children:[d.totalShots>0?(d.realShots/d.totalShots*100).toFixed(1):0,"% vom Gesamt"]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üçª Top Alkohol-Verursacher"}),e.jsx("div",{className:"text-sm text-text-muted mb-4",children:"Spieler, die mit ihren Toren am meisten Alkohol f√ºr den Gegner verursacht haben"}),e.jsxs("div",{className:"space-y-3",children:[W.map(([c,o],v)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${v===0?"bg-yellow-500 text-white":v===1?"bg-gray-400 text-white":v===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:v+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c}),e.jsxs("div",{className:"text-sm text-text-muted space-x-2",children:[e.jsxs("span",{children:[o.totalGoals," Tore"]}),e.jsxs("span",{children:["‚âà ",$.clToLiters(o.alcoholCaused),"L"]}),e.jsxs("span",{children:["‚âà ",$.clToShots(o.alcoholCaused)," Shots"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[o.alcoholCaused,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"verursacht"})]})]},c)),W.length===0&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Tore geschossen - noch kein Alkohol verursacht!"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìã Spiele & Alkohol-√úbersicht"}),e.jsx("div",{className:"text-sm text-text-muted mb-4",children:"√úbersicht √ºber alle Spiele und den dabei konsumierten Alkohol"}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[i==null?void 0:i.slice().reverse().map((c,o)=>{const v=c.goalsa||0,A=c.goalsb||0,z=Math.floor((v+A)/2)*2,O=Math.floor(A/2)*2,J=Math.floor(v/2)*2;return e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg border border-border-light",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-lg",children:[v,":",A,e.jsxs("span",{className:"text-sm text-text-muted ml-2",children:["(",c.date||"Kein Datum",")"]})]}),e.jsx("div",{className:"text-sm text-text-muted",children:"AEK vs Real Madrid"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[z,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[$.clToLiters(z),"L | ",$.clToShots(z)," Shots"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[e.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-600",children:[O,"cl"]}),e.jsx("div",{className:"text-xs text-blue-700",children:"AEK trinkt"})]}),e.jsxs("div",{className:"text-center p-2 bg-red-50 rounded",children:[e.jsxs("div",{className:"text-sm font-bold text-red-600",children:[J,"cl"]}),e.jsx("div",{className:"text-xs text-red-700",children:"Real trinkt"})]})]})]},c.id||o)}),(!i||i.length===0)&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Spiele vorhanden"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üßÆ Erweiterte Alkohol-Rechner"}),e.jsx("div",{className:"text-sm text-text-muted mb-6",children:"Berechne Alkoholkonsum f√ºr Spiele und Spieltage inklusive Bier-Konsum und Blutalkohol"}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"üìä Automatische Schnaps-Verfolgung"}),e.jsx("div",{className:"text-sm text-blue-700 mb-3",children:"Shots werden automatisch bei jedem neuen Spiel hinzugef√ºgt und permanent gespeichert."}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center p-2 bg-white rounded border border-blue-200",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[a.cumulativeShots.total,"cl"]}),e.jsx("div",{className:"text-xs text-blue-700",children:"Gesamt Schnaps"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded border border-blue-200",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[a.cumulativeShots.aek,"cl"]}),e.jsx("div",{className:"text-xs text-blue-700",children:"AEK getrunken"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded border border-blue-200",children:[e.jsxs("div",{className:"text-lg font-bold text-red-600",children:[a.cumulativeShots.real,"cl"]}),e.jsx("div",{className:"text-xs text-red-700",children:"Real getrunken"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded border border-blue-200",children:[e.jsx("div",{className:"text-xs font-bold text-gray-600",children:a.cumulativeShots.lastUpdated?new Date(a.cumulativeShots.lastUpdated).toLocaleDateString("de-DE"):"Noch nicht aktualisiert"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Letzte Aktualisierung"})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-blue-600",children:["üí° Diese Werte werden automatisch aktualisiert, wenn neue Spiele hinzugef√ºgt werden. Letztes verarbeitetes Spiel: Match ID ",a.cumulativeShots.lastMatchId||"Keins"]}),e.jsx("div",{className:"mt-3 flex justify-center",children:e.jsx("button",{onClick:()=>{const c=ke(i,a);r(c)},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"üîÑ Shots neu berechnen"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"‚öΩ Spiel-Rechner"}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Berechnungsmodus"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"calculatorMode",value:"manual",checked:a.mode==="manual",onChange:c=>u({mode:c.target.value}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Manuell"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"calculatorMode",value:"automatic",checked:a.mode==="automatic",onChange:c=>u({mode:c.target.value}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Automatisch (letzten 2 Spieltage)"})]})]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:a.mode==="manual"?"Geben Sie Tore manuell ein":"Berechnet automatisch aus Spielen der letzten zwei Tage (heute + gestern)"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 alcohol-calculator-grid",children:[e.jsxs("div",{className:"space-y-4",children:[a.mode==="manual"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"alcohol-input-group",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"AEK Tore"}),e.jsx("input",{type:"number",min:"0",max:"20",value:a.aekGoals,onChange:c=>u({aekGoals:parseInt(c.target.value)||0}),onFocus:c=>c.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green"})]}),e.jsxs("div",{className:"alcohol-input-group",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Real Tore"}),e.jsx("input",{type:"number",min:"0",max:"20",value:a.realGoals,onChange:c=>u({realGoals:parseInt(c.target.value)||0}),onFocus:c=>c.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green"})]})]}),a.mode==="automatic"&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"üìä Automatische Berechnung"}),e.jsx("div",{className:"text-sm text-blue-700 space-y-1",children:(()=>{const c=m(),o=c.reduce((v,A)=>v+(A.goalsa||0)+(A.goalsb||0),0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Spiele (letzte 2 Tage): ",c.length]}),e.jsxs("div",{children:["Gesamt-Tore: ",o]}),e.jsxs("div",{children:["Daraus resultierend: ",R(),"cl Schnaps"]})]})})()})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-bg-secondary rounded-lg alcohol-display-card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ü•É"}),e.jsxs("div",{className:"text-2xl font-bold text-primary-green",children:[R(),"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Schnaps"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["‚âà ",$.clToLiters(R()),"L"]}),e.jsxs("div",{children:["‚âà ",$.clToShots(R())," Shots"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[j(),"cl"]}),e.jsx("div",{className:"text-sm text-blue-700",children:"AEK trinkt"}),e.jsxs("div",{className:"text-xs text-blue-700",children:[$.clToShots(j())," Shots"]})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-red-600",children:[w(),"cl"]}),e.jsx("div",{className:"text-sm text-red-700",children:"Real trinkt"}),e.jsxs("div",{className:"text-xs text-red-700",children:[$.clToShots(w())," Shots"]})]})]})]})]})]}),e.jsxs("div",{className:"mb-6 border-t pt-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"üìÖ Spieltag-Rechner"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Spieltag (Datum)"}),e.jsx("input",{type:"date",value:a.gameDay,onChange:c=>u({gameDay:c.target.value}),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bier-Anzahl (0,5L je)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-blue-600 mb-1",children:"üîµ AEK Bier"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"0",max:"20",value:a.beerCount.aek,onChange:c=>u({beerCount:{aek:parseInt(c.target.value)||0}}),onFocus:c=>c.target.select(),className:"flex-1 px-2 py-1 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsx("button",{onClick:()=>u({beerCount:{aek:a.beerCount.aek+1}}),className:"beer-counter-button px-2 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",title:"0,5L Bier (5% Alkohol) f√ºr AEK hinzuf√ºgen",children:"üç∫ +0,5L"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-red-600 mb-1",children:"üî¥ Real Bier"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"0",max:"20",value:a.beerCount.real,onChange:c=>u({beerCount:{real:parseInt(c.target.value)||0}}),onFocus:c=>c.target.select(),className:"flex-1 px-2 py-1 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsx("button",{onClick:()=>u({beerCount:{real:a.beerCount.real+1}}),className:"beer-counter-button px-2 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",title:"0,5L Bier (5% Alkohol) f√ºr Real hinzuf√ºgen",children:"üç∫ +0,5L"})]})]})]}),e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("button",{onClick:()=>u({beerCount:{aek:a.beerCount.aek+1,real:a.beerCount.real+1}}),className:"beer-counter-button px-3 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors text-sm",title:"0,5L Bier (5% Alkohol) f√ºr beide Teams hinzuf√ºgen",children:"üç∫üç∫ Beide +0,5L"})}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["AEK: ",(a.beerCount.aek*.5).toFixed(1),"L | Real: ",(a.beerCount.real*.5).toFixed(1),"L Bier (5% Alkohol)"]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-bg-secondary rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Spieltag-Alkohol"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Schnaps: ",R(),"cl (40% Alkohol)"]}),e.jsxs("div",{children:["AEK Bier: ",(a.beerCount.aek*.5*5).toFixed(1),"cl reiner Alkohol"]}),e.jsxs("div",{children:["Real Bier: ",(a.beerCount.real*.5*5).toFixed(1),"cl reiner Alkohol"]}),e.jsxs("div",{className:"border-t pt-1 font-semibold",children:["Gesamt: ",(R()*.4+(a.beerCount.aek+a.beerCount.real)*.5*.05).toFixed(1),"cl reiner Alkohol"]})]})]})})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"üë• Spieler-Daten & Blutalkohol"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-blue-600 mb-2",children:"üîµ Chef AEK"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Name",value:a.playerData.aekChef.name,onChange:c=>r(o=>({...o,playerData:{...o.playerData,aekChef:{...o.playerData.aekChef,name:c.target.value}}})),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",placeholder:"Gewicht (kg)",min:"40",max:"150",value:a.playerData.aekChef.weight,onChange:c=>r(o=>({...o,playerData:{...o.playerData,aekChef:{...o.playerData.aekChef,weight:parseInt(c.target.value)||70}}})),onFocus:c=>c.target.select(),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("select",{value:a.playerData.aekChef.gender,onChange:c=>r(o=>({...o,playerData:{...o.playerData,aekChef:{...o.playerData.aekChef,gender:c.target.value}}})),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"male",children:"M√§nnlich"}),e.jsx("option",{value:"female",children:"Weiblich"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-600 mb-2",children:"üî¥ Chef Real"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Name",value:a.playerData.realChef.name,onChange:c=>r(o=>({...o,playerData:{...o.playerData,realChef:{...o.playerData.realChef,name:c.target.value}}})),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",placeholder:"Gewicht (kg)",min:"40",max:"150",value:a.playerData.realChef.weight,onChange:c=>r(o=>({...o,playerData:{...o.playerData,realChef:{...o.playerData.realChef,weight:parseInt(c.target.value)||70}}})),onFocus:c=>c.target.select(),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("select",{value:a.playerData.realChef.gender,onChange:c=>r(o=>({...o,playerData:{...o.playerData,realChef:{...o.playerData.realChef,gender:c.target.value}}})),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"male",children:"M√§nnlich"}),e.jsx("option",{value:"female",children:"Weiblich"})]})]})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-bg-secondary rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-3",children:"üß™ Blutalkohol-Rechnung"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-blue-600",children:[a.playerData.aekChef.name||"Chef AEK"," trinkt: ",j(),"cl"]}),(()=>{const c=a.mode==="automatic"?(()=>{const v=m(),A=v.length>0?v[v.length-1]:null;return B(j(),a.playerData.aekChef,A==null?void 0:A.date,a.beerCount.aek)})():B(Math.floor(a.realGoals/2)*2,a.playerData.aekChef,null,a.beerCount.aek),o=F(c);return e.jsxs("div",{className:`text-sm mt-2 p-2 rounded ${o.bg} ${o.border} border`,children:[e.jsxs("div",{className:`font-bold ${o.color}`,children:["BAK: ",c,"‚Ä∞"]}),e.jsx("div",{className:`text-xs ${o.color}`,children:o.status})]})})()]}),e.jsxs("div",{className:"p-3 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-red-600",children:[a.playerData.realChef.name||"Chef Real"," trinkt: ",w(),"cl"]}),(()=>{const c=a.mode==="automatic"?(()=>{const v=m(),A=v.length>0?v[v.length-1]:null;return B(w(),a.playerData.realChef,A==null?void 0:A.date,a.beerCount.real)})():B(Math.floor(a.aekGoals/2)*2,a.playerData.realChef,null,a.beerCount.real),o=F(c);return e.jsxs("div",{className:`text-sm mt-2 p-2 rounded ${o.bg} ${o.border} border`,children:[e.jsxs("div",{className:`font-bold ${o.color}`,children:["BAK: ",c,"‚Ä∞"]}),e.jsx("div",{className:`text-xs ${o.color}`,children:o.status})]})})()]})]}),e.jsxs("div",{className:"text-xs text-text-muted mt-3",children:[e.jsx("strong",{children:"Hinweis:"})," BAK-Berechnung ist eine N√§herung (Widmark-Formel) mit Alkoholabbau (~0.15‚Ä∞/h). Exakte Werte k√∂nnen abweichen. Automatischer Modus ber√ºcksichtigt Zeit seit letztem Spiel."]})]})})]})]}),e.jsx("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Regeln:"})," F√ºr jedes zweite Tor muss der Gegner 2cl Schnaps (40%) trinken. 0,5L Bier (5% Alkohol) entspricht 2,5cl reinem Alkohol."]})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-bold text-lg text-blue-800",children:"‚è±Ô∏è Zeit-Tracking f√ºr BAK-Abbau"}),a.drinkingStartTime&&e.jsxs("div",{className:"text-sm text-blue-700",children:["Gestartet: ",new Date(a.drinkingStartTime).toLocaleString("de-DE")]})]}),e.jsxs("div",{className:"text-sm text-blue-700 mb-4",children:["Aktivieren Sie das Zeit-Tracking, um den Alkoholabbau √ºber die Zeit korrekt zu berechnen.",a.drinkingStartTime?` Seit Start: ${qe(a).toFixed(1)} Stunden.`:" Dies startet die Uhr f√ºr die BAK-Abbau-Berechnung."]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{const c=Qe(a);r(c)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"üç∫ Trinken starten/neu starten"}),a.drinkingStartTime&&e.jsx("button",{onClick:()=>u({drinkingStartTime:null}),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"‚èπÔ∏è Zeit-Tracking stoppen"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-lg mb-3 text-gray-800",children:"üìä BAK-Referenztabelle"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 bg-green-100 border border-green-200 rounded text-center",children:[e.jsx("div",{className:"font-semibold text-green-800",children:"0.0‚Ä∞"}),e.jsx("div",{className:"text-xs text-green-700",children:"N√ºchtern"})]}),e.jsxs("div",{className:"p-2 bg-yellow-100 border border-yellow-200 rounded text-center",children:[e.jsx("div",{className:"font-semibold text-yellow-800",children:"0.3-0.5‚Ä∞"}),e.jsx("div",{className:"text-xs text-yellow-700",children:"Leicht beeintr√§chtigt"})]}),e.jsxs("div",{className:"p-2 bg-orange-100 border border-orange-200 rounded text-center",children:[e.jsx("div",{className:"font-semibold text-orange-800",children:"0.5-1.1‚Ä∞"}),e.jsx("div",{className:"text-xs text-orange-700",children:"Fahrunt√ºchtig"})]}),e.jsxs("div",{className:"p-2 bg-red-100 border border-red-200 rounded text-center",children:[e.jsx("div",{className:"font-semibold text-red-800",children:"1.1-2.0‚Ä∞"}),e.jsx("div",{className:"text-xs text-red-700",children:"Stark beeintr√§chtigt"})]}),e.jsxs("div",{className:"p-2 bg-red-200 border border-red-400 rounded text-center",children:[e.jsx("div",{className:"font-semibold text-red-900",children:"2.0+‚Ä∞"}),e.jsx("div",{className:"text-xs text-red-800",children:"Lebensgef√§hrlich"})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:[e.jsx("strong",{children:"Wichtig:"})," Dies ist nur eine grobe Orientierung. Individuelle Faktoren k√∂nnen stark abweichen. Bei hohen Werten bitte medizinische Hilfe suchen!"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card border-l-4 border-blue-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-blue-600",children:"üîµ AEK Alkohol-Bilanz"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Getrunken (durch Real Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-red-600",children:[d.aekShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[$.clToLiters(d.aekShots),"L | ",$.clToShots(d.aekShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Verursacht (durch AEK Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-green-600",children:[d.realShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[$.clToLiters(d.realShots),"L | ",$.clToShots(d.realShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"font-medium",children:"Alkohol-Bilanz:"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold ${d.realShots>d.aekShots?"text-green-600":"text-red-600"}`,children:[d.realShots>d.aekShots?"+":"",d.realShots-d.aekShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[$.clToShots(Math.abs(d.realShots-d.aekShots))," Shots Differenz"]})]})]}),e.jsx("div",{className:"text-xs text-text-muted",children:d.realShots>d.aekShots?"AEK verursacht mehr als getrunken":"AEK trinkt mehr als verursacht"})]})]}),e.jsxs("div",{className:"modern-card border-l-4 border-red-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-red-600",children:"üî¥ Real Alkohol-Bilanz"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Getrunken (durch AEK Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-red-600",children:[d.realShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[$.clToLiters(d.realShots),"L | ",$.clToShots(d.realShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Verursacht (durch Real Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-green-600",children:[d.aekShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[$.clToLiters(d.aekShots),"L | ",$.clToShots(d.aekShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"font-medium",children:"Alkohol-Bilanz:"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold ${d.aekShots>d.realShots?"text-green-600":"text-red-600"}`,children:[d.aekShots>d.realShots?"+":"",d.aekShots-d.realShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[$.clToShots(Math.abs(d.aekShots-d.realShots))," Shots Differenz"]})]})]}),e.jsx("div",{className:"text-xs text-text-muted",children:d.aekShots>d.realShots?"Real verursacht mehr als getrunken":"Real trinkt mehr als verursacht"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìà Zus√§tzliche Alkohol-Statistiken"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[V>0?(d.totalShots/V).toFixed(1):"0.0","cl"]}),e.jsx("div",{className:"text-sm text-purple-700",children:"‚åÄ Alkohol pro Spiel"}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Durchschnittlicher Schnaps-Konsum"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-red-50 rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[(i==null?void 0:i.reduce((o,v)=>{const A=(v.goalsa||0)+(v.goalsb||0),z=Math.floor(A/2)*2;return z>o?z:o},0))||0,"cl"]}),e.jsx("div",{className:"text-sm text-orange-700",children:"üî• H√∂chster Alkohol-Verbrauch"}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"In einem einzelnen Spiel"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(()=>{const c=(i==null?void 0:i.filter(v=>{const A=(v.goalsa||0)+(v.goalsb||0);return Math.floor(A/2)*2===0}).length)||0,o=(i==null?void 0:i.filter(v=>{const A=(v.goalsa||0)+(v.goalsb||0),z=Math.floor(A/2)*2;return z>0&&z<=4}).length)||0;return`${c}/${o}`})()}),e.jsx("div",{className:"text-sm text-green-700",children:"üö´ N√ºchterne/Wenig-Alkohol Spiele"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Alkoholfrei / Wenig Alkohol (‚â§4cl)"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-yellow-50 to-amber-50 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:(()=>{const c=(i==null?void 0:i.filter(A=>{const z=(A.goalsa||0)+(A.goalsb||0);return Math.floor(z/2)*2>=10}).length)||0,o=(i==null?void 0:i.length)||0,v=o>0?(c/o*100).toFixed(0):0;return`${c} (${v}%)`})()}),e.jsx("div",{className:"text-sm text-amber-700",children:"üçª Starke Alkohol-Spiele"}),e.jsx("div",{className:"text-xs text-amber-600 mt-1",children:"Spiele mit ‚â•10cl Alkohol"})]})]})]})]})},_e=()=>{switch(t){case"dashboard":return e.jsx(ms,{onNavigate:s});case"players":return Ve();case"teams":return Ie();case"trends":return Oe();case"alkohol":return He();case"advanced":return e.jsx(Xe,{});case"playeranalytics":return e.jsx(hs,{});case"matchprediction":return e.jsx(Es,{});case"financialanalytics":return e.jsx(Js,{});default:return Be()}};return e.jsxs("div",{className:"p-4 pb-24 mobile-safe-bottom",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"üìä Statistiken"}),e.jsx("p",{className:"text-text-muted",children:"Umfassende Analyse von Spielen, Spielern und Teams"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"icon-only-nav flex overflow-x-auto space-x-2 pb-2 scroll-indicator-container",children:We.map(x=>e.jsxs("button",{onClick:()=>l(x.id),className:`stats-nav-button flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${t===x.id?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary"}`,title:x.label,"aria-label":x.label,children:[e.jsx("span",{children:x.icon}),e.jsx("span",{className:"font-medium hidden sm:inline",children:x.label})]},x.id))}),e.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 w-4 h-8 bg-gradient-to-r from-bg-primary to-transparent pointer-events-none opacity-50 md:hidden"}),e.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-4 h-8 bg-gradient-to-l from-bg-primary to-transparent pointer-events-none opacity-50 md:hidden"})]}),e.jsx("div",{className:"form-container",children:_e()})]})}export{rt as default};
