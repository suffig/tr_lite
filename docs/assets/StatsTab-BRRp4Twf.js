import{r as F,u as R,j as e,L as _}from"./main-CTZaclKM.js";function se(){const[s,n]=F.useState("performance"),[a,l]=F.useState("all"),{data:t,loading:i}=R("matches","*"),{data:d,loading:p}=R("players","*"),$=i||p,w=F.useMemo(()=>{if(!t||!d)return null;const j=new Date,S=t.filter(z=>{if(a==="all")return!0;const D=new Date(z.date),g=Math.floor((j-D)/(1e3*60*60*24));switch(a){case"30d":return g<=30;case"90d":return g<=90;case"1y":return g<=365;default:return!0}});return{performance:ce(S),trends:de(S),efficiency:oe(S),predictions:xe(S),playerComparison:me(S,d)}},[t,d,a]);return $?e.jsx(_,{message:"Lade erweiterte Analysen..."}):w?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"üî¨ Erweiterte Analysen"}),e.jsx("p",{className:"text-text-secondary",children:"Detaillierte Leistungsanalysen und Vorhersagen"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:a,onChange:j=>l(j.target.value),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-primary text-text-primary",children:[e.jsx("option",{value:"all",children:"Alle Zeiten"}),e.jsx("option",{value:"30d",children:"Letzte 30 Tage"}),e.jsx("option",{value:"90d",children:"Letzte 90 Tage"}),e.jsx("option",{value:"1y",children:"Letztes Jahr"})]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"performance",label:"üìà Leistung",icon:"üìà"},{id:"trends",label:"üìä Trends",icon:"üìä"},{id:"efficiency",label:"‚ö° Effizienz",icon:"‚ö°"},{id:"predictions",label:"üîÆ Vorhersagen",icon:"üîÆ"},{id:"comparison",label:"‚öñÔ∏è Vergleich",icon:"‚öñÔ∏è"}].map(j=>e.jsxs("button",{onClick:()=>n(j.id),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${s===j.id?"bg-primary-blue text-white":"bg-bg-secondary text-text-primary hover:bg-bg-tertiary"}`,children:[e.jsx("span",{children:j.icon}),e.jsx("span",{className:"hidden sm:inline",children:j.label})]},j.id))}),e.jsxs("div",{className:"grid gap-6",children:[s==="performance"&&e.jsx(te,{data:w.performance}),s==="trends"&&e.jsx(ae,{data:w.trends}),s==="efficiency"&&e.jsx(le,{data:w.efficiency}),s==="predictions"&&e.jsx(ne,{data:w.predictions}),s==="comparison"&&e.jsx(ie,{data:w.playerComparison})]})]}):e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nicht gen√ºgend Daten f√ºr erweiterte Analysen verf√ºgbar."})}function te({data:s}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üéØ"})," Trefferquote"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"AEK Athen:"}),e.jsxs("span",{className:"font-semibold text-primary-blue",children:[s.shotAccuracy.aek,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Madrid:"}),e.jsxs("span",{className:"font-semibold text-accent-red",children:[s.shotAccuracy.real,"%"]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üèÉ‚Äç‚ôÇÔ∏è"})," Form-Index"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"AEK Form:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${Z(s.formIndex.aek)}`}),e.jsx("span",{className:"font-semibold",children:s.formIndex.aek.toFixed(1)})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Real Form:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${Z(s.formIndex.real)}`}),e.jsx("span",{className:"font-semibold",children:s.formIndex.real.toFixed(1)})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üí™"})," Leistungs-Rating"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Offensiv:"}),e.jsxs("span",{className:"font-semibold text-primary-green",children:[s.offensiveRating,"/10"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Defensiv:"}),e.jsxs("span",{className:"font-semibold text-primary-blue",children:[s.defensiveRating,"/10"]})]})]})]})]})}function ae({data:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üìà"})," Leistungstrends (letzte 10 Spiele)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-primary-blue",children:"üîµ AEK Athen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore/Spiel Trend:"}),e.jsxs("span",{className:`font-semibold ${s.goalTrend.aek>=0?"text-green-600":"text-red-600"}`,children:[s.goalTrend.aek>=0?"‚ÜóÔ∏è":"‚ÜòÔ∏è"," ",Math.abs(s.goalTrend.aek).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siegesserie:"}),e.jsxs("span",{className:"font-semibold",children:[s.winStreak.aek," Spiele"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Formkurve:"}),e.jsx("span",{className:"font-mono text-sm",children:s.formPattern.aek})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-accent-red",children:"üî¥ Real Madrid"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore/Spiel Trend:"}),e.jsxs("span",{className:`font-semibold ${s.goalTrend.real>=0?"text-green-600":"text-red-600"}`,children:[s.goalTrend.real>=0?"‚ÜóÔ∏è":"‚ÜòÔ∏è"," ",Math.abs(s.goalTrend.real).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siegesserie:"}),e.jsxs("span",{className:"font-semibold",children:[s.winStreak.real," Spiele"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Formkurve:"}),e.jsx("span",{className:"font-mono text-sm",children:s.formPattern.real})]})]})]})]})]})})}function le({data:s}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"‚ö°"})," Offensive Effizienz"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"AEK Effizienz"}),e.jsxs("span",{className:"text-sm font-semibold",children:[s.offensiveEfficiency.aek,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-blue h-2 rounded-full transition-all duration-300",style:{width:`${s.offensiveEfficiency.aek}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"Real Effizienz"}),e.jsxs("span",{className:"text-sm font-semibold",children:[s.offensiveEfficiency.real,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-accent-red h-2 rounded-full transition-all duration-300",style:{width:`${s.offensiveEfficiency.real}%`}})})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üõ°Ô∏è"})," Defensive Stabilit√§t"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gegentore/Spiel:"}),e.jsx("span",{className:"font-semibold",children:s.defensiveStability.goalsAgainstAvg})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsxs("span",{className:"font-semibold",children:[s.defensiveStability.cleanSheets,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Stabilit√§t-Index:"}),e.jsxs("span",{className:"font-semibold text-primary-green",children:[s.defensiveStability.stabilityIndex,"/10"]})]})]})]})]})}function ne({data:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üîÆ"})," N√§chstes Spiel Vorhersage"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-4 bg-primary-blue/10 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-blue",children:[s.nextMatch.aekWinChance,"%"]}),e.jsx("div",{className:"text-sm text-primary-blue",children:"AEK Sieg"})]}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[s.nextMatch.drawChance,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Unentschieden"})]}),e.jsxs("div",{className:"p-4 bg-accent-red/10 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-accent-red",children:[s.nextMatch.realWinChance,"%"]}),e.jsx("div",{className:"text-sm text-accent-red",children:"Real Sieg"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"text-sm text-text-secondary",children:[e.jsx("strong",{children:"Vorhergesagtes Ergebnis:"})," ",s.nextMatch.predictedScore]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[e.jsx("strong",{children:"Konfidenz:"})," ",s.nextMatch.confidence,"%"]})]})]})})}function ie({data:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"‚öñÔ∏è"})," Spieler-Vergleich (Top 5)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-light",children:[e.jsx("th",{className:"text-left py-2",children:"Spieler"}),e.jsx("th",{className:"text-center py-2",children:"Tore"}),e.jsx("th",{className:"text-center py-2",children:"‚åÄ/Spiel"}),e.jsx("th",{className:"text-center py-2",children:"Effizienz"}),e.jsx("th",{className:"text-center py-2",children:"Form"})]})}),e.jsx("tbody",{children:s.topPlayers.map((n,a)=>e.jsxs("tr",{className:"border-b border-border-light/50",children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-bg-secondary rounded-full flex items-center justify-center text-xs font-bold",children:a+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:n.team})]})]})}),e.jsx("td",{className:"text-center py-2 font-semibold",children:n.goals}),e.jsx("td",{className:"text-center py-2",children:n.avgPerGame}),e.jsx("td",{className:"text-center py-2",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs ${re(n.efficiency)}`,children:[n.efficiency,"%"]})}),e.jsx("td",{className:"text-center py-2",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`w-3 h-3 rounded-full ${Z(n.form)}`})})})]},n.id))})]})})]})})}function Z(s){return s>=8?"bg-green-500":s>=6?"bg-yellow-500":s>=4?"bg-orange-500":"bg-red-500"}function re(s){return s>=80?"bg-green-100 text-green-800":s>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}function ce(s){const n=s.reduce((t,i)=>t+(i.goalsa||0),0),a=s.reduce((t,i)=>t+(i.goalsb||0),0),l=s.length;return{shotAccuracy:{aek:l>0?Math.round(n/l*10):0,real:l>0?Math.round(a/l*10):0},formIndex:{aek:q(s,"AEK"),real:q(s,"Real")},offensiveRating:Math.min(10,Math.round((n+a)/l*2)),defensiveRating:Math.min(10,Math.round(10-(n+a)/l))}}function de(s){const n=s.slice(-10);return{goalTrend:{aek:J(n,"AEK"),real:J(n,"Real")},winStreak:{aek:Q(s,"AEK"),real:Q(s,"Real")},formPattern:{aek:Y(n,"AEK"),real:Y(n,"Real")}}}function oe(s){const n=s.length,a=s.reduce((l,t)=>l+(t.goalsa||0)+(t.goalsb||0),0);return{offensiveEfficiency:{aek:Math.round(s.reduce((l,t)=>l+(t.goalsa||0),0)/a*100),real:Math.round(s.reduce((l,t)=>l+(t.goalsb||0),0)/a*100)},defensiveStability:{goalsAgainstAvg:(a/n).toFixed(2),cleanSheets:Math.round(s.filter(l=>l.goalsa===0||l.goalsb===0).length/n*100),stabilityIndex:Math.min(10,Math.round(10-a/n))}}}function xe(s){const n=s.filter(i=>(i.goalsa||0)>(i.goalsb||0)).length,a=s.filter(i=>(i.goalsb||0)>(i.goalsa||0)).length,l=s.filter(i=>(i.goalsa||0)===(i.goalsb||0)).length,t=s.length;return{nextMatch:{aekWinChance:Math.round(n/t*100),realWinChance:Math.round(a/t*100),drawChance:Math.round(l/t*100),predictedScore:`${Math.round(s.reduce((i,d)=>i+(d.goalsa||0),0)/t)}-${Math.round(s.reduce((i,d)=>i+(d.goalsb||0),0)/t)}`,confidence:Math.min(95,60+Math.round(t/5))}}}function me(s,n){return{topPlayers:n.map(a=>({...a,avgPerGame:s.length>0?((a.goals||0)/s.length).toFixed(2):"0.00",efficiency:Math.min(100,Math.round((a.goals||0)/Math.max(1,s.length)*30)),form:Math.min(10,5+Math.random()*3)})).sort((a,l)=>(l.goals||0)-(a.goals||0)).slice(0,5)}}function q(s,n){const a=s.slice(-5);let l=0;return a.forEach(t=>{const i=n==="AEK",d=i?t.goalsa||0:t.goalsb||0,p=i?t.goalsb||0:t.goalsa||0;d>p?l+=3:d===p&&(l+=1)}),Math.min(10,l/15*10)}function J(s,n){if(s.length<5)return 0;const a=s.slice(0,Math.floor(s.length/2)),l=s.slice(Math.floor(s.length/2)),t=a.reduce((d,p)=>d+(n==="AEK"?p.goalsa||0:p.goalsb||0),0)/a.length;return l.reduce((d,p)=>d+(n==="AEK"?p.goalsa||0:p.goalsb||0),0)/l.length-t}function Q(s,n){let a=0;for(let l=s.length-1;l>=0;l--){const t=s[l],i=n==="AEK",d=i?t.goalsa||0:t.goalsb||0,p=i?t.goalsb||0:t.goalsa||0;if(d>p)a++;else break}return a}function Y(s,n){return s.slice(-5).map(a=>{const l=n==="AEK",t=l?a.goalsa||0:a.goalsb||0,i=l?a.goalsb||0:a.goalsa||0;return t>i?"W":t<i?"L":"D"}).join("")}function he({limit:s=10,showTitle:n=!0,onNavigate:a}){const[l,t]=F.useState("all"),{data:i,loading:d}=R("matches","*",{order:{column:"date",ascending:!1}}),{data:p,loading:$}=R("players","*"),{data:w,loading:j}=R("bans","*",{order:{column:"id",ascending:!1}}),{data:S,loading:z}=R("transactions","*",{order:{column:"date",ascending:!1}}),D=d||$||j||z,g=F.useMemo(()=>{if(!i||!p||!w||!S)return[];const x=[];i==null||i.slice(0,5).forEach(r=>{const f=new Date(r.date);x.push({id:`match-${r.id}`,type:"match",icon:"‚öΩ",title:`AEK ${r.goalsa||0} - ${r.goalsb||0} Real`,description:r.sds?`‚≠ê SdS: ${r.sds}`:"Spiel gespielt",date:f,dateText:X(f),action:()=>a==null?void 0:a("matches",{highlightMatch:r.id})})}),w==null||w.slice(0,3).forEach(r=>{const f=p.find(K=>K.id===r.player_id),A=(f==null?void 0:f.name)||r.player_name||"Unbekannt",C=(r.totalgames||0)-(r.matchesserved||0);x.push({id:`ban-${r.id}`,type:"ban",icon:"üö´",title:`Sperre: ${A}`,description:`${r.type} ‚Ä¢ ${C>0?`${C} Spiele verbleibend`:"Abgelaufen"}`,date:new Date,dateText:"K√ºrzlich",action:()=>a==null?void 0:a("bans",{highlightBan:r.id})})}),S==null||S.slice(0,5).forEach(r=>{const f=new Date(r.date),A=r.amount||0;x.push({id:`transaction-${r.id}`,type:"transaction",icon:A>0?"üí∞":"üí∏",title:`${A>0?"+":""}${A}‚Ç¨`,description:r.description||r.type||"Transaktion",date:f,dateText:X(f),action:()=>a==null?void 0:a("finanzen",{highlightTransaction:r.id})})});const N=x.sort((r,f)=>f.date-r.date);return(l==="all"?N:N.filter(r=>r.type===l)).slice(0,s)},[i,p,w,S,l,s,a]),k=F.useMemo(()=>{if(!i||!w||!S)return{};const x=new Date,N=new Date(x.getTime()-7*24*60*60*1e3);return{matches:i.filter(E=>new Date(E.date)>=N).length,bans:w.filter(E=>(E.totalgames||0)-(E.matchesserved||0)>0).length,transactions:S.filter(E=>new Date(E.date)>=N).length}},[i,w,S]);return D?e.jsx(_,{message:"Lade Aktivit√§ten..."}):e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[n&&e.jsxs("div",{className:"p-4 border-b border-border-light",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Letzte Aktivit√§ten"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded border border-blue-200",children:[k.matches||0," Spiele (7T)"]}),e.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded border border-red-200",children:[k.bans||0," aktive Sperren"]}),e.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded border border-green-200",children:[k.transactions||0," Transaktionen (7T)"]})]})})]}),e.jsx("div",{className:"flex gap-2 mt-3",children:[{key:"all",label:"Alle",count:g.length},{key:"match",label:"Spiele",count:g.filter(x=>x.type==="match").length},{key:"transaction",label:"Finanzen",count:g.filter(x=>x.type==="transaction").length},{key:"ban",label:"Sperren",count:g.filter(x=>x.type==="ban").length}].map(({key:x,label:N,count:E})=>e.jsxs("button",{onClick:()=>t(x),className:`px-3 py-1.5 rounded-lg text-sm transition-all duration-200 ${l===x?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:[N," ",E>0&&`(${E})`]},x))})]}),e.jsx("div",{className:"divide-y divide-border-light",children:g.length===0?e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"üìä"}),e.jsx("p",{children:"Keine Aktivit√§ten gefunden"}),e.jsx("p",{className:"text-sm mt-1",children:l==="all"?"Beginne Daten hinzuzuf√ºgen":`Keine ${l==="match"?"Spiele":l==="transaction"?"Transaktionen":"Sperren"} gefunden`})]}):g.map(x=>e.jsx("button",{onClick:x.action,className:"w-full p-4 text-left hover:bg-bg-secondary transition-colors duration-200 focus:outline-none focus:bg-bg-secondary",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:x.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-text-primary truncate",children:x.title}),e.jsx("span",{className:"text-xs text-text-secondary whitespace-nowrap ml-2",children:x.dateText})]}),e.jsx("p",{className:"text-sm text-text-secondary truncate",children:x.description})]})]})},x.id))}),g.length>0&&n&&e.jsx("div",{className:"p-3 border-t border-border-light bg-bg-secondary",children:e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>a==null?void 0:a("stats"),className:"text-sm text-primary-green hover:text-primary-green-dark transition-colors duration-200",children:"Alle Statistiken anzeigen ‚Üí"})})})]})}function X(s){const a=Math.floor((new Date-s)/(1e3*60)),l=Math.floor(a/60),t=Math.floor(l/24);return a<1?"Gerade eben":a<60?`vor ${a}m`:l<24?`vor ${l}h`:t<7?`vor ${t}d`:t<30?`vor ${Math.floor(t/7)}w`:s.toLocaleDateString("de-DE",{day:"numeric",month:"short"})}function ge({onNavigate:s}){const[n,a]=F.useState("all"),{data:l,loading:t}=R("matches","*",{order:{column:"date",ascending:!1}}),{data:i,loading:d}=R("players","*"),{data:p,loading:$}=R("bans","*"),{data:w,loading:j}=R("transactions","*",{order:{column:"date",ascending:!1}}),{data:S,loading:z}=R("finances","*"),D=t||d||$||j||z,g=F.useMemo(()=>{if(!l||!i||!p||!w||!S)return null;const k=new Date,x={week:new Date(k.getTime()-7*24*60*60*1e3),month:new Date(k.getTime()-30*24*60*60*1e3),all:new Date(0)},N=x[n]||x.all,E=l.filter(m=>new Date(m.date)>=N),r=w.filter(m=>new Date(m.date)>=N),f={AEK:{wins:0,losses:0,goals:0,goalsAgainst:0},Real:{wins:0,losses:0,goals:0,goalsAgainst:0}};E.forEach(m=>{const u=m.goalsa||0,P=m.goalsb||0;f.AEK.goals+=u,f.AEK.goalsAgainst+=P,f.Real.goals+=P,f.Real.goalsAgainst+=u,u>P?(f.AEK.wins++,f.Real.losses++):P>u&&(f.Real.wins++,f.AEK.losses++)});const A={};i.forEach(m=>{A[m.id]={name:m.name,team:m.team,goals:0,matches:0,value:m.value||0}}),E.forEach(m=>{["goalscorer1a","goalscorer2a","goalscorer3a","goalscorer4a","goalscorer5a"].forEach(u=>{m[u]&&A[m[u]]&&(A[m[u]].goals++,A[m[u]].matches++)}),["goalscorer1b","goalscorer2b","goalscorer3b","goalscorer4b","goalscorer5b"].forEach(u=>{m[u]&&A[m[u]]&&(A[m[u]].goals++,A[m[u]].matches++)})});const C=S.find(m=>m.team==="AEK")||{balance:0},K=S.find(m=>m.team==="Real")||{balance:0},W=r.filter(m=>m.amount>0).reduce((m,u)=>m+u.amount,0),H=r.filter(m=>m.amount<0).reduce((m,u)=>m+Math.abs(u.amount),0),V=p.filter(m=>(m.totalgames||0)-(m.matchesserved||0)>0),B={AEK:V.filter(m=>{const u=i.find(P=>P.id===m.player_id);return(u==null?void 0:u.team)==="AEK"}).length,Real:V.filter(m=>{const u=i.find(P=>P.id===m.player_id);return(u==null?void 0:u.team)==="Real"}).length},I=Object.values(A).filter(m=>m.goals>0).sort((m,u)=>u.goals-m.goals).slice(0,5);return{teamRecords:f,playerStats:I,finances:{aek:C.balance||0,real:K.balance||0,income:W,expenses:H,net:W-H},bans:{active:V.length,aek:B.AEK,real:B.Real},totals:{matches:E.length,players:i.length,transactions:r.length}}},[l,i,p,w,S,n]);return D?e.jsx(_,{message:"Lade Dashboard..."}):g?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Dashboard"}),e.jsx("div",{className:"flex gap-2",children:[{key:"week",label:"Woche"},{key:"month",label:"Monat"},{key:"all",label:"Gesamt"}].map(({key:k,label:x})=>e.jsx("button",{onClick:()=>a(k),className:`px-3 py-2 rounded-lg text-sm transition-all duration-200 ${n===k?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:x},k))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(O,{icon:"‚öΩ",title:"Spiele",value:g.totals.matches,subtitle:n==="all"?"Gesamt":"Im Zeitraum",color:"blue",onClick:()=>s==null?void 0:s("matches")}),e.jsx(O,{icon:"üë•",title:"Spieler",value:g.totals.players,subtitle:"Aktive Spieler",color:"green",onClick:()=>s==null?void 0:s("squad")}),e.jsx(O,{icon:"‚öΩ",title:"Tore",value:g.teamRecords.AEK.goals+g.teamRecords.Real.goals,subtitle:n==="all"?"Gesamt":"Im Zeitraum",color:"green",onClick:()=>s==null?void 0:s("matches")}),e.jsx(O,{icon:"üö´",title:"Sperren",value:g.bans.active,subtitle:"Aktive Sperren",color:"red",onClick:()=>s==null?void 0:s("bans")})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Team-Vergleich"})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"üîµ"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-blue-900",children:"AEK"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[g.teamRecords.AEK.wins,"S / ",g.teamRecords.AEK.losses,"N"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-blue-900",children:[g.teamRecords.AEK.goals,":",g.teamRecords.AEK.goalsAgainst]}),e.jsxs("div",{className:"text-sm text-blue-700",children:[g.bans.aek," Sperren"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"üî¥"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-red-900",children:"Real"}),e.jsxs("div",{className:"text-sm text-red-700",children:[g.teamRecords.Real.wins,"S / ",g.teamRecords.Real.losses,"N"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-red-900",children:[g.teamRecords.Real.goals,":",g.teamRecords.Real.goalsAgainst]}),e.jsxs("div",{className:"text-sm text-red-700",children:[g.bans.real," Sperren"]})]})]})]})})]}),e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Top Torsch√ºtzen"})}),e.jsx("div",{className:"p-4",children:g.playerStats.length===0?e.jsxs("div",{className:"text-center text-text-secondary py-4",children:[e.jsx("div",{className:"text-2xl mb-2","aria-hidden":"true",children:"‚öΩ"}),e.jsx("p",{children:"Keine Tore im Zeitraum"})]}):e.jsx("div",{className:"space-y-3",children:g.playerStats.map((k,x)=>{var N;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-primary-green text-white text-xs flex items-center justify-center font-bold",children:x+1}),e.jsx("span",{className:k.team==="AEK"?"text-blue-600":"text-red-600",children:k.team==="AEK"?"üîµ":"üî¥"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:k.name}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[(N=k.value)==null?void 0:N.toFixed(1),"M ‚Ç¨"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-text-primary",children:[k.goals," Tore"]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[k.matches," Spiele"]})]})]},k.name)})})})]})]}),e.jsx(he,{onNavigate:s,limit:5})]}):e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"üìä"}),e.jsx("p",{children:"Keine Daten verf√ºgbar"})]})}function O({icon:s,title:n,value:a,subtitle:l,color:t="gray",onClick:i}){const d={blue:"bg-blue-50 border-blue-200 text-blue-900",green:"bg-green-50 border-green-200 text-green-900",red:"bg-red-50 border-red-200 text-red-900",gray:"bg-gray-50 border-gray-200 text-gray-900"};return e.jsx("button",{onClick:i,className:`p-4 rounded-lg border transition-all duration-200 hover:shadow-md ${d[t]} ${i?"hover:scale-105 cursor-pointer":"cursor-default"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:s}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-2xl font-bold",children:a}),e.jsx("div",{className:"text-sm opacity-75",children:n}),e.jsx("div",{className:"text-xs opacity-60",children:l})]})]})})}class fe{constructor(n,a,l,t){this.matches=n||[],this.players=a||[],this.bans=l||[],this.spielerDesSpiels=t||[],this.aekPlayers=(a||[]).filter(i=>i.team==="AEK"),this.realPlayers=(a||[]).filter(i=>i.team==="Real")}calculateTeamRecords(){const n={wins:0,losses:0},a={wins:0,losses:0};return this.matches.forEach(l=>{const t=l.goalsa||0,i=l.goalsb||0;t>i?(n.wins++,a.losses++):i>t&&(a.wins++,n.losses++)}),{aek:n,real:a}}calculateRecentForm(n=5){const a=this.matches.slice(-n),l=[],t=[];return a.forEach(i=>{const d=i.goalsa||0,p=i.goalsb||0;d>p?(l.push("W"),t.push("L")):p>d&&(l.push("L"),t.push("W"))}),{aek:l,real:t}}calculatePlayerStats(){return this.players.map(n=>{const a=this.countPlayerMatches(),l=this.bans.filter(d=>d.player_id===n.id),t=this.spielerDesSpiels.find(d=>d.name===n.name&&d.team===n.team),i=t&&t.count||0;return{...n,goals:n.goals||0,matchesPlayed:a,sdsCount:i,goalsPerGame:a>0?((n.goals||0)/a).toFixed(2):"0.00",totalBans:l.length,disciplinaryScore:this.calculateDisciplinaryScore(l)}}).sort((n,a)=>(a.goals||0)-(n.goals||0))}countPlayerGoalsFromMatches(n,a){let l=0;return this.matches.forEach(t=>{a==="AEK"&&t.goalslista&&(Array.isArray(t.goalslista)?t.goalslista:typeof t.goalslista=="string"?JSON.parse(t.goalslista):[]).forEach(d=>{const p=typeof d=="string"?d:d.player,$=typeof d=="string"?1:d.count||1;p===n&&(l+=$)}),a==="Real"&&t.goalslistb&&(Array.isArray(t.goalslistb)?t.goalslistb:typeof t.goalslistb=="string"?JSON.parse(t.goalslistb):[]).forEach(d=>{const p=typeof d=="string"?d:d.player,$=typeof d=="string"?1:d.count||1;p===n&&(l+=$)})}),l}countPlayerMatches(){return this.matches.length}calculateDisciplinaryScore(n){let a=0;return n.forEach(l=>{switch(l.type){case"Gelb-Rote Karte":a+=3;break;case"Rote Karte":a+=5;break;case"Verletzung":a+=1;break;default:a+=1}}),a}calculateAdvancedStats(){const n=this.matches.length,a=this.matches.reduce((l,t)=>l+(t.goalsa||0)+(t.goalsb||0),0);return{avgGoalsPerMatch:n>0?(a/n).toFixed(2):"0.00",totalMatches:n,totalGoals:a,aekTotalGoals:this.matches.reduce((l,t)=>l+(t.goalsa||0),0),realTotalGoals:this.matches.reduce((l,t)=>l+(t.goalsb||0),0),highestScoringMatch:n>0?Math.max(...this.matches.map(l=>(l.goalsa||0)+(l.goalsb||0))):0,cleanSheets:{aek:this.matches.filter(l=>l.goalsb===0).length,real:this.matches.filter(l=>l.goalsa===0).length}}}calculatePerformanceTrends(){const n={};return this.matches.forEach(a=>{const l=new Date(a.date),t=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`;n[t]||(n[t]={month:t,aekWins:0,realWins:0,totalGoals:0,matchCount:0});const i=a.goalsa||0,d=a.goalsb||0;n[t].totalGoals+=i+d,n[t].matchCount++,i>d?n[t].aekWins++:d>i&&n[t].realWins++}),n}calculateHeadToHead(){const n={totalMatches:this.matches.length,aekWins:0,realWins:0,aekGoals:0,realGoals:0,biggestAekWin:{diff:0,score:"",date:"",opponent:"Real Madrid"},biggestRealWin:{diff:0,score:"",date:"",opponent:"AEK Athen"}};return this.matches.forEach(a=>{const l=a.goalsa||0,t=a.goalsb||0,i=Math.abs(l-t);n.aekGoals+=l,n.realGoals+=t,l>t?(n.aekWins++,i>n.biggestAekWin.diff&&(n.biggestAekWin={diff:i,score:`${l}:${t}`,date:a.date||"",opponent:"Real Madrid"})):t>l&&(n.realWins++,i>n.biggestRealWin.diff&&(n.biggestRealWin={diff:i,score:`${t}:${l}`,date:a.date||"",opponent:"AEK Athen"}))}),n}}function ue({onNavigate:s,showHints:n=!1}){const[a,l]=F.useState("dashboard"),{data:t,loading:i}=R("matches","*"),{data:d,loading:p}=R("players","*"),{data:$,loading:w}=R("spieler_des_spiels","*"),{data:j,loading:S}=R("bans","*"),z=i||p||w||S,D=new fe(t,d,j,$),g=D.calculateTeamRecords(),k=D.calculateRecentForm(5),x=D.calculatePlayerStats(),N=D.calculateAdvancedStats(),E=D.calculatePerformanceTrends(),r=D.calculateHeadToHead(),f=(t==null?void 0:t.length)||0,A=(d==null?void 0:d.filter(o=>o.team==="AEK"))||[],C=(d==null?void 0:d.filter(o=>o.team==="Real"))||[],K=g.aek.wins,W=g.real.wins,H=o=>o.map((T,G)=>e.jsx("span",{className:`inline-block w-6 h-6 text-xs font-bold rounded-full text-center leading-6 mx-0.5 ${T==="W"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:T},G)),V=o=>`${(o||0).toFixed(1)}M ‚Ç¨`,B=[{id:"dashboard",label:"Dashboard",icon:"üéØ"},{id:"overview",label:"√úbersicht",icon:"üìä"},{id:"players",label:"Spieler",icon:"üë•"},{id:"teams",label:"Teams",icon:"üèÜ"},{id:"trends",label:"Trends",icon:"üìà"},{id:"advanced",label:"Erweitert",icon:"üî¨"}];if(z)return e.jsx(_,{message:"Lade Statistiken..."});const I=()=>{const o=x.length>0?x[0]:null,T=x.filter(c=>c.sdsCount>0).sort((c,h)=>h.sdsCount-c.sdsCount)[0],G=t==null?void 0:t.reduce((c,h)=>{const b=y=>{if(!y)return[];try{return typeof y=="string"?JSON.parse(y):y}catch{return[]}},v=b(h.goalslista),M=b(h.goalslistb);return[...v,...M].forEach(y=>{const L=typeof y=="object"?y.player:y,U=typeof y=="object"?y.count:1;U>c.count&&(c={player:L,count:U,match:h})}),c},{player:null,count:0,match:null});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:f}),e.jsx("div",{className:"text-sm text-text-muted",children:"Spiele gespielt"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:N.totalGoals}),e.jsx("div",{className:"text-sm text-text-muted",children:"Tore insgesamt"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["‚åÄ ",f>0?(N.totalGoals/f).toFixed(1):"0.0","/Spiel"]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary-green",children:o?o.name:"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["ü•á Topscorer (",o?o.goals:0," Tore)"]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:o&&o.matchesPlayed>0?`‚åÄ ${(o.goals/o.matchesPlayed).toFixed(2)}/Spiel`:"‚åÄ 0.00/Spiel"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary-green",children:T?T.name:"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["‚≠ê Top SdS (",T?T.sdsCount:0,"x)"]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:T&&T.matchesPlayed>0?`${(T.sdsCount/T.matchesPlayed*100).toFixed(1)}% Quote`:"0.0% Quote"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:r.biggestAekWin.diff>0?r.biggestAekWin.score:"‚Äì"}),e.jsx("div",{className:"text-sm text-text-muted",children:"üîµ Gr√∂√üter AEK Sieg"}),r.biggestAekWin.diff>0&&e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["vs ",r.biggestAekWin.opponent,e.jsx("br",{}),new Date(r.biggestAekWin.date).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:r.biggestRealWin.diff>0?r.biggestRealWin.score:"‚Äì"}),e.jsx("div",{className:"text-sm text-text-muted",children:"üî¥ Gr√∂√üter Real Sieg"}),r.biggestRealWin.diff>0&&e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["vs ",r.biggestRealWin.opponent,e.jsx("br",{}),new Date(r.biggestRealWin.date).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-accent-blue",children:(G==null?void 0:G.player)||"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["‚öΩ Meiste Tore (",(G==null?void 0:G.count)||0," in einem Spiel)"]}),(G==null?void 0:G.match)&&e.jsx("div",{className:"text-xs text-text-muted mt-1",children:new Date(G.match.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-accent-red",children:(()=>{const c={};j==null||j.forEach(b=>{const v=d==null?void 0:d.find(y=>y.id===b.player_id),M=(v==null?void 0:v.name)||"Unbekannt";c[M]=(c[M]||0)+1});const h=Object.entries(c).sort((b,v)=>v[1]-b[1])[0];return h?h[0]:"Keine Daten"})()}),e.jsxs("div",{className:"text-sm text-text-muted",children:["üü• Meiste Sperren (",(()=>{const c={};j==null||j.forEach(b=>{const v=d==null?void 0:d.find(y=>y.id===b.player_id),M=(v==null?void 0:v.name)||"Unbekannt";c[M]=(c[M]||0)+1});const h=Object.entries(c).sort((b,v)=>v[1]-b[1])[0];return h?h[1]:0})(),"x)"]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìä Erweiterte Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-primary-green",children:(()=>{const c=(j==null?void 0:j.reduce((b,v)=>{const M=new Date(v.start_date),y=new Date(v.end_date),L=Math.ceil((y-M)/(1e3*60*60*24));return b+(L>0?L:0)},0))||0;return`${(j==null?void 0:j.length)>0?(c/j.length).toFixed(1):"0.0"} Tage`})()}),e.jsx("div",{className:"text-sm text-text-muted",children:"‚åÄ Sperrenl√§nge"})]}),e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-accent-blue",children:x.filter(c=>c.goals>0).length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Aktive Torsch√ºtzen"})]}),e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-accent-red",children:(j==null?void 0:j.length)||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Sperren"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üí° Besondere Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:(()=>{let c=0,h=0,b=0;return t==null||t.forEach(v=>{const M=v.goalsa||0,y=v.goalsb||0;M>y?(h++,b=0,h>c&&(c=h)):y>M&&(b++,h=0,b>c&&(c=b))}),c})()}),e.jsx("div",{className:"text-sm text-green-700",children:"üî• L√§ngste Siegesserie"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:(()=>{let c=0,h=0,b=0,v="";return t==null||t.forEach(M=>{const y=M.goalsa||0,L=M.goalsb||0;y>L?(h++,b=0,h>c&&(c=h,v="AEK")):L>y&&(b++,h=0,b>c&&(c=b,v="Real"))}),v||"Keine"})()})]}),e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-xl font-bold text-yellow-600",children:(()=>{let c=0;return x.forEach(h=>{if(h.matchesPlayed>0){const b=h.goals/h.matchesPlayed;b>c&&(c=b)}}),c.toFixed(2)})()}),e.jsx("div",{className:"text-sm text-yellow-700",children:"‚ö° H√∂chste Effizienz"}),e.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:(()=>{let c=0,h=null;return x.forEach(b=>{if(b.matchesPlayed>0){const v=b.goals/b.matchesPlayed;v>c&&(c=v,h=b.name)}}),h||"Keine Daten"})()})]}),e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:(()=>{const c=g.aek.wins,h=g.real.wins;return c+h===0?"100%":`${(Math.min(c,h)/Math.max(c,h)*100).toFixed(0)}%`})()}),e.jsx("div",{className:"text-sm text-blue-700",children:"‚öñÔ∏è Team-Balance"}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Ausgeglichenheit (",g.aek.wins,":",g.real.wins,")"]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card border-l-4 border-blue-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-blue-600",children:"AEK Athen"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-semibold text-green-600",children:K})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-semibold text-red-600",children:g.aek.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null:"}),e.jsx("span",{className:"font-semibold",children:N.cleanSheets.aek})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm text-text-muted mb-1",children:"Form (letzte 5):"}),e.jsx("div",{className:"flex",children:H(k.aek)})]})]})]}),e.jsxs("div",{className:"modern-card border-l-4 border-red-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-red-600",children:"Real Madrid"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-semibold text-green-600",children:W})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-semibold text-red-600",children:g.real.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null:"}),e.jsx("span",{className:"font-semibold",children:N.cleanSheets.real})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm text-text-muted mb-1",children:"Form (letzte 5):"}),e.jsx("div",{className:"flex",children:H(k.real)})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üèÜ Top-Torsch√ºtzen"}),e.jsx("div",{className:"space-y-2",children:x.slice(0,5).map((c,h)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${h===0?"bg-yellow-500 text-white":h===1?"bg-gray-400 text-white":h===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:h+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.name}),e.jsx("div",{className:"text-sm text-text-muted",children:c.team})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:[c.goals," Tore"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[c.goalsPerGame," ‚åÄ"]})]})]},c.id))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"‚≠ê Top-Spieler des Spiels"}),e.jsx("div",{className:"space-y-2",children:x.filter(c=>c.sdsCount>0).sort((c,h)=>h.sdsCount-c.sdsCount).slice(0,5).map((c,h)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${h===0?"bg-yellow-500 text-white":h===1?"bg-gray-400 text-white":h===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:h+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.name}),e.jsx("div",{className:"text-sm text-text-muted",children:c.team})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:[c.sdsCount,"x SdS"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[c.matchesPlayed>0?(c.sdsCount/c.matchesPlayed*100).toFixed(1):"0.0","% Quote"]})]})]},c.id))}),x.filter(c=>c.sdsCount>0).length===0&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Spieler des Spiels Auszeichnungen vergeben"})]})]})},m=()=>e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìä Spielerstatistiken"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-light",children:[e.jsx("th",{className:"text-left py-2",children:"Spieler"}),e.jsx("th",{className:"text-left py-2",children:"Team"}),e.jsx("th",{className:"text-center py-2",children:"Tore"}),e.jsx("th",{className:"text-center py-2",children:"‚åÄ/Spiel"}),e.jsx("th",{className:"text-center py-2",children:"SdS"}),e.jsx("th",{className:"text-center py-2",children:"Sperren"}),e.jsx("th",{className:"text-right py-2",children:"Marktwert"})]})}),e.jsx("tbody",{children:x.map(o=>e.jsxs("tr",{className:"border-b border-border-light hover:bg-bg-secondary",children:[e.jsx("td",{className:"py-2 font-medium",children:o.name}),e.jsx("td",{className:"py-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${o.team==="AEK"?"bg-blue-100 text-blue-800":o.team==="Ehemalige"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:o.team})}),e.jsx("td",{className:"py-2 text-center font-bold",children:o.goals}),e.jsx("td",{className:"py-2 text-center",children:o.goalsPerGame}),e.jsx("td",{className:"py-2 text-center",children:o.sdsCount}),e.jsx("td",{className:"py-2 text-center",children:o.totalBans}),e.jsx("td",{className:"py-2 text-right",children:V(o.value)})]},o.id))})]})})]}),u=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"‚öñÔ∏è Team-Vergleich"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-blue-600",children:"AEK Athen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:A.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:K})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-medium",children:g.aek.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsx("span",{className:"font-medium",children:N.cleanSheets.aek})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-red-600",children:"Real Madrid"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:C.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:W})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-medium",children:g.real.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsx("span",{className:"font-medium",children:N.cleanSheets.real})]})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìà Erweiterte Statistiken"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Diese Statistiken bieten tiefere Einblicke in die Team-Performance und wichtige Kennzahlen."}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:N.highestScoringMatch}),e.jsx("div",{className:"text-sm text-text-muted",children:"H√∂chste Toranzahl"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"in einem einzelnen Spiel"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:Math.abs(K-W)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Siegesdifferenz"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"zwischen den Teams"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-blue",children:f>0?(N.totalGoals/f).toFixed(1):"0.0"}),e.jsx("div",{className:"text-sm text-text-muted",children:"‚åÄ Tore pro Spiel"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Durchschnittswert"})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:"üéØ Offensive Highlights"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Torreichstes Team:"}),e.jsxs("span",{className:"font-medium",children:[N.aekTotalGoals>=N.realTotalGoals?"AEK Athen":"Real Madrid","(",Math.max(N.aekTotalGoals,N.realTotalGoals)," Tore)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"H√∂chste Einzelspiel-Toranzahl:"}),e.jsxs("span",{className:"font-medium",children:[N.highestScoringMatch," Tore"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktivster Torsch√ºtze:"}),e.jsx("span",{className:"font-medium",children:x.length>0?`${x[0].name} (${x[0].goals} Tore)`:"Keine Daten"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:"‚öñÔ∏è Team-Balance"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Kader-Unterschied:"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(A.length-C.length)," Spieler"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Marktwert-Verh√§ltnis:"}),e.jsx("span",{className:"font-medium",children:A.reduce((o,T)=>o+(T.value||0),0)>C.reduce((o,T)=>o+(T.value||0),0)?"AEK f√ºhrt":"Real f√ºhrt"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Dominanteres Team:"}),e.jsx("span",{className:"font-medium",children:K>W?"AEK Athen":W>K?"Real Madrid":"Ausgeglichen"})]})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"‚öîÔ∏è Head-to-Head Bilanz"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Direkter Vergleich zwischen AEK Athen und Real Madrid √ºber alle Spiele."}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.aekWins}),e.jsx("div",{className:"text-sm text-blue-700",children:"AEK Siege"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:r.totalMatches>0?`${(r.aekWins/r.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.realWins}),e.jsx("div",{className:"text-sm text-red-700",children:"Real Siege"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:r.totalMatches>0?`${(r.realWins/r.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.aekGoals+r.realGoals}),e.jsx("div",{className:"text-sm text-green-700",children:"Tore gesamt"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:r.totalMatches>0?`‚åÄ ${((r.aekGoals+r.realGoals)/r.totalMatches).toFixed(1)} pro Spiel`:"‚åÄ 0 pro Spiel"})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"üîµ Gr√∂√üter AEK Sieg"}),r.biggestAekWin.diff>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:r.biggestAekWin.score}),e.jsxs("div",{className:"text-sm text-blue-700",children:["Unterschied: ",r.biggestAekWin.diff," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(r.biggestAekWin.date).toLocaleDateString("de-DE")})]}):e.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"üî¥ Gr√∂√üter Real Sieg"}),r.biggestRealWin.diff>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 mb-1",children:r.biggestRealWin.score}),e.jsxs("div",{className:"text-sm text-red-700",children:["Unterschied: ",r.biggestRealWin.diff," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(r.biggestRealWin.date).toLocaleDateString("de-DE")})]}):e.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üî¨ Detailanalyse"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Erweiterte Metriken f√ºr eine tiefgreifende Team-Analyse."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-red-600",children:"üé≤ Spielstatistiken"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Spiele gespielt:"}),e.jsx("span",{className:"font-medium",children:f})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"L√§ngste Serie:"}),e.jsxs("span",{className:"font-medium",children:[K>=W?"AEK":"Real"," (",Math.max(K,W)," Siege)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Torreichstes Spiel:"}),e.jsxs("span",{className:"font-medium",children:[N.highestScoringMatch," Tore"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-purple-600",children:"üèÜ Leistungs-Metriken"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:A.length+C.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Torsch√ºtzen:"}),e.jsxs("span",{className:"font-medium",children:[x.filter(o=>o.goals>0).length," Spieler"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Erfolgsquote AEK:"}),e.jsx("span",{className:"font-medium",children:f>0?`${(K/f*100).toFixed(0)}%`:"0%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Erfolgsquote Real:"}),e.jsx("span",{className:"font-medium",children:f>0?`${(W/f*100).toFixed(0)}%`:"0%"})]})]})]})]})]})]}),P=()=>e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìà Performance-Trends"}),e.jsx("div",{className:"space-y-4",children:Object.values(E).reverse().map(o=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border-light last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:o.month}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-blue-600 font-medium",children:["AEK: ",o.aekWins]}),e.jsx("span",{className:"mx-2",children:"vs"}),e.jsxs("span",{className:"text-red-600 font-medium",children:["Real: ",o.realWins]})]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[o.matchCount," Spiele, ",o.totalGoals," Tore"]}),e.jsxs("div",{className:"text-sm font-medium",children:["‚åÄ ",(o.totalGoals/o.matchCount).toFixed(1)," Tore/Spiel"]})]})]},o.month))})]}),ee=()=>{switch(a){case"dashboard":return e.jsx(ge,{onNavigate:s});case"players":return m();case"teams":return u();case"trends":return P();case"advanced":return e.jsx(se,{});default:return I()}};return e.jsxs("div",{className:"p-4 pb-24 mobile-safe-bottom",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"üìä Statistiken"}),e.jsx("p",{className:"text-text-muted",children:"Umfassende Analyse von Spielen, Spielern und Teams"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"icon-only-nav flex overflow-x-auto space-x-2 pb-2 scroll-indicator-container",children:B.map(o=>e.jsxs("button",{onClick:()=>l(o.id),className:`stats-nav-button flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${a===o.id?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary"}`,title:o.label,"aria-label":o.label,children:[e.jsx("span",{children:o.icon}),e.jsx("span",{className:"font-medium hidden sm:inline",children:o.label})]},o.id))}),e.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 w-4 h-8 bg-gradient-to-r from-bg-primary to-transparent pointer-events-none opacity-50 md:hidden"}),e.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-4 h-8 bg-gradient-to-l from-bg-primary to-transparent pointer-events-none opacity-50 md:hidden"})]}),e.jsx("div",{className:"form-container",children:ee()})]})}export{ue as default};
