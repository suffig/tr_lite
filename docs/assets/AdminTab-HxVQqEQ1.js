const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/matches-C1XFu919.js","assets/dataManager-C8rOmH55.js"])))=>i.map(i=>d[i]);
import{s as F,_ as Y,u as _,r as A,j as e,z as K,a as J,L as oe}from"./main-DMgVH-ko.js";import{B as H}from"./banTypes-DuNOJEIt.js";import{d as Q}from"./dataManager-C8rOmH55.js";const me="alcoholCalculatorValues",X="1.0",Z=()=>({aekPlayer:"",realPlayer:"",aekGoals:0,realGoals:0,mode:"manual",gameDay:new Date().toISOString().split("T")[0],beerCount:{aek:0,real:0},alexanderShots:{cl40:0,cl20:0},philipShots:{cl40:0,cl20:0},cumulativeShots:{aek:0,real:0,total:0,lastMatchId:null,lastUpdated:null},lastUpdated:new Date().toISOString(),drinkingStartTime:null,version:X}),re=()=>{try{const d=localStorage.getItem(me);if(!d)return Z();const n=JSON.parse(d);if(!n.version||n.version!==X)return console.log("Alcohol calculator: Version mismatch, using defaults"),Z();const a=Z();return{...a,...n,beerCount:{...a.beerCount,...n.beerCount||{}},alexanderShots:{...a.alexanderShots,...n.alexanderShots||{}},philipShots:{...a.philipShots,...n.philipShots||{}},cumulativeShots:{...a.cumulativeShots,...n.cumulativeShots||{}}}}catch(d){return console.error("Error loading alcohol calculator values:",d),Z()}},pe=d=>{try{const n={...d,lastUpdated:new Date().toISOString(),version:X};return localStorage.setItem(me,JSON.stringify(n)),typeof window<"u"&&window.dispatchEvent(new CustomEvent("alcoholCalculatorValuesChanged",{detail:n})),!0}catch(n){return console.error("Error saving alcohol calculator values:",n),!1}},fe=(d,n)=>{const a={...n,...d,lastUpdated:new Date().toISOString()};return d.beerCount&&(a.beerCount={...n.beerCount,...d.beerCount}),d.cumulativeShots&&(a.cumulativeShots={...n.cumulativeShots,...d.cumulativeShots}),pe(a),a},ue=(d,n=null)=>{try{const a=n||re();if(!d||typeof d!="object")return console.warn("Invalid match object provided to addShotsFromNewMatch"),a;const s=d.goalsa||0,i=d.goalsb||0,m=Math.floor(i/2)*2,g=Math.floor(s/2)*2;return fe({cumulativeShots:{aek:a.cumulativeShots.aek+m,real:a.cumulativeShots.real+g,total:a.cumulativeShots.total+m+g,lastMatchId:d.id,lastUpdated:new Date().toISOString()}},a)}catch(a){return console.error("Error adding shots from new match:",a),n||re()}};typeof window<"u"&&(window.updateAlcoholCalculatorFromMatch=d=>{try{ue(d)}catch(n){console.warn("Failed to update alcohol calculator from match:",n)}});class le{static async submitMatch(n){const{date:a,teama:s="AEK",teamb:i="Real",goalsa:m,goalsb:g,goalslista:p=[],goalslistb:w=[],ownGoalsA:u=0,ownGoalsB:r=0,yellowa:b=0,reda:N=0,yellowb:T=0,redb:o=0,manofthematch:k,editId:C=null}=n;try{const{prizeaek:z,prizereal:v,winner:t,loser:f}=this.calculatePrizeMoney(m,g,b,N,T,o);C&&await this.deleteMatchTransactions(C);const l=[...p],x=[...w];u>0&&x.push({count:u,player:"Eigentore_AEK"}),r>0&&l.push({count:r,player:"Eigentore_Real"});const S={date:a,teama:s,teamb:i,goalsa:parseInt(m)||0,goalsb:parseInt(g)||0,goalslista:p,goalslistb:w,yellowa:parseInt(b)||0,reda:parseInt(N)||0,yellowb:parseInt(T)||0,redb:parseInt(o)||0,manofthematch:k||null,prizeaek:z,prizereal:v},D=await F.insert("matches",S);if(D.error)throw new Error(`Match insert failed: ${D.error.message}`);const M=D.data.id,B=new Date().toISOString().slice(0,10);if(l.length>0){const G=l.filter(R=>typeof R=="object"&&R.player?!R.player.startsWith("Eigentore_"):!R.startsWith("Eigentore_"));await this.updatePlayersGoals(G,"AEK")}if(x.length>0){const G=x.filter(R=>typeof R=="object"&&R.player?!R.player.startsWith("Eigentore_"):!R.startsWith("Eigentore_"));await this.updatePlayersGoals(G,"Real")}k&&await this.updatePlayerOfTheMatchStats(k),await this.processFinancialTransactions({matchId:M,date:B,prizeaek:z,prizereal:v,manofthematch:k,winner:t,loser:f}),await this.decrementBansAfterMatch();try{ue({id:M,goalsa:parseInt(m)||0,goalsb:parseInt(g)||0,date:a})}catch(G){console.warn("Failed to update alcohol calculator:",G)}return{success:!0,matchId:M,message:`Match ${s} vs ${i} (${m}:${g}) erfolgreich hinzugefÃ¼gt`}}catch(z){throw console.error("Error in submitMatch:",z),new Error(`Fehler beim Speichern des Matches: ${z.message}`)}}static calculatePrizeMoney(n,a,s,i,m,g){let p=0,w=0,u=null,r=null;return n>a?(u="AEK",r="Real"):n<a&&(u="Real",r="AEK"),u&&r&&(u==="AEK"?(p=1e6-a*5e4-s*2e4-i*5e4,w=-(5e5+n*5e4+m*2e4+g*5e4)):(w=1e6-n*5e4-m*2e4-g*5e4,p=-(5e5+a*5e4+s*2e4+i*5e4))),{prizeaek:p,prizereal:w,winner:u,loser:r}}static async updatePlayersGoals(n,a){const s={};if(n.length>0&&typeof n[0]=="object"&&n[0].player!==void 0)n.forEach(i=>{i.player&&!i.player.startsWith("Eigentore_")&&(s[i.player]=(s[i.player]||0)+(i.count||1))});else for(const i of n)!i||!i.trim()||i.startsWith("Eigentore_")||(s[i]=(s[i]||0)+1);for(const[i,m]of Object.entries(s))try{const g=await F.select("players","id, goals",{eq:{name:i,team:a}});if(g.data&&g.data.length>0){const p=g.data[0],w=(p.goals||0)+m;await F.update("players",{goals:w},p.id)}}catch(g){console.warn(`Failed to update goals for player ${i}:`,g)}}static async updatePlayerOfTheMatchStats(n){try{const a=await F.select("players","team",{eq:{name:n}});if(!a.data||a.data.length===0){console.warn(`Player ${n} not found for SdS stats`);return}const s=a.data[0].team,i=await F.select("spieler_des_spiels","*",{eq:{name:n,team:s}});if(i.data&&i.data.length>0){const m=i.data[0];await F.update("spieler_des_spiels",{count:m.count+1},m.id)}else await F.insert("spieler_des_spiels",{name:n,team:s,count:1})}catch(a){console.warn(`Failed to update SdS stats for ${n}:`,a)}}static async processFinancialTransactions({matchId:n,date:a,prizeaek:s,prizereal:i,manofthematch:m,winner:g,loser:p}){const w=await this.getTeamFinance("AEK"),u=await this.getTeamFinance("Real");let r=w.balance||0,b=u.balance||0;const N=m?await this.getSdSBonus(m,"AEK"):0,T=m?await this.getSdSBonus(m,"Real"):0;N>0&&(r+=N,await this.insertTransaction({date:a,type:"SdS Bonus",team:"AEK",amount:N,match_id:n,info:"SdS Bonus"}),await this.updateTeamBalance("AEK",r)),T>0&&(b+=T,await this.insertTransaction({date:a,type:"SdS Bonus",team:"Real",amount:T,match_id:n,info:"SdS Bonus"}),await this.updateTeamBalance("Real",b)),s!==0&&(r+=s,r<0&&(r=0),await this.insertTransaction({date:a,type:"Preisgeld",team:"AEK",amount:s,match_id:n,info:"Preisgeld"}),await this.updateTeamBalance("AEK",r)),i!==0&&(b+=i,b<0&&(b=0),await this.insertTransaction({date:a,type:"Preisgeld",team:"Real",amount:i,match_id:n,info:"Preisgeld"}),await this.updateTeamBalance("Real",b)),g&&p&&await this.processEchtgeldAusgleich({date:a,matchId:n,winner:g,loser:p,aekBalance:r,realBalance:b,prizeaek:s,prizereal:i,sdsBonusAek:N>0?1:0,sdsBonusReal:T>0?1:0,manofthematch:m})}static async getTeamFinance(n){const a=await F.select("finances","*",{eq:{team:n}});return a.data&&a.data.length>0?a.data[0]:{balance:0,debt:0}}static async getSdSBonus(n,a){const s=await F.select("players","team",{eq:{name:n}});return s.data&&s.data.length>0&&s.data[0].team===a?1e5:0}static async insertTransaction(n){return await F.insert("transactions",n)}static async updateTeamBalance(n,a){const s=await F.select("finances","id",{eq:{team:n}});return s.data&&s.data.length>0?await F.update("finances",{balance:a},s.data[0].id):await F.insert("finances",{team:n,balance:a,debt:0})}static async processEchtgeldAusgleich({date:n,matchId:a,winner:s,loser:i,aekBalance:m,realBalance:g,prizeaek:p,prizereal:w,sdsBonusAek:u,sdsBonusReal:r,manofthematch:b}){const N=await this.getTeamFinance("AEK"),T=await this.getTeamFinance("Real"),o={AEK:N.debt||0,Real:T.debt||0},k=(B,G,R)=>{let P=B;R&&(P+=1e5);let O=(Math.abs(G)-P)/1e5;return O<0&&(O=0),5+Math.round(O)},C=k(m,p,u),z=k(g,w,r),v=i==="AEK"?C:z,t=o[s],f=o[i],l=Math.min(t,v*1),x=Math.max(0,t-l),S=v*1-l,D=f+Math.max(0,S),M=await F.select("finances","id",{eq:{team:s}});if(M.data&&M.data.length>0&&await F.update("finances",{debt:x},M.data[0].id),S>0){await this.insertTransaction({date:n,type:"Echtgeld-Ausgleich",team:i,amount:Math.max(0,S),match_id:a,info:"Echtgeld-Ausgleich"});const B=await F.select("finances","id",{eq:{team:i}});B.data&&B.data.length>0&&await F.update("finances",{debt:D},B.data[0].id)}l>0&&await this.insertTransaction({date:n,type:"Echtgeld-Ausgleich (getilgt)",team:s,amount:-l,match_id:a,info:"Echtgeld-Ausgleich (getilgt)"})}static async deleteMatchTransactions(n){try{const{deleteMatch:a}=await Y(async()=>{const{deleteMatch:s}=await import("./matches-C1XFu919.js");return{deleteMatch:s}},__vite__mapDeps([0,1]));await a(n)}catch(a){throw console.error(`Failed to delete match ${n} comprehensively:`,a),a}}static async decrementBansAfterMatch(){try{const n=await F.select("bans","*");if(!n.data)return;for(const a of n.data)if(a.matchesserved<a.totalgames){const s=a.matchesserved+1;await F.update("bans",{matchesserved:s},a.id)}}catch(n){console.warn("Failed to decrement bans:",n)}}}function je(){const{data:d}=_("players","*"),[n,a]=A.useState(!1),[s,i]=A.useState({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),[m,g]=A.useState(!1),p=(t,f,l)=>t.reduce((S,D)=>S+D.count,0)+l,w=t=>{i(f=>{const l={...f,...t};l.goalsa=p(l.goalslista,l.ownGoalsA,l.ownGoalsB),l.goalsb=p(l.goalslistb,l.ownGoalsB,l.ownGoalsA);const{prizeaek:x,prizereal:S}=le.calculatePrizeMoney(l.goalsa,l.goalsb,l.yellowa,l.reda,l.yellowb,l.redb);return l.prizeaek=x,l.prizereal=S,l})},u=(t,f)=>{w({[t]:f})},r=async t=>{t.preventDefault(),g(!0);try{const f=await le.submitMatch({date:s.date,teama:s.teama.trim(),teamb:s.teamb.trim(),goalsa:s.goalsa,goalsb:s.goalsb,goalslista:s.goalslista,goalslistb:s.goalslistb,ownGoalsA:s.ownGoalsA,ownGoalsB:s.ownGoalsB,yellowa:parseInt(s.yellowa)||0,reda:parseInt(s.reda)||0,yellowb:parseInt(s.yellowb)||0,redb:parseInt(s.redb)||0,manofthematch:s.manofthematch||null});i({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),a(!1),K.success(f.message)}catch(f){console.error("Match submission error:",f),K.error(f.message||"Fehler beim HinzufÃ¼gen des Spiels")}finally{g(!1)}},b=()=>!(!s.date||s.goalsa===s.goalsb||!s.manofthematch||s.manofthematch.trim()===""),N=t=>d?d.filter(f=>f.team===t):[],T=()=>d?s.motmTeamFilter==="all"?d:d.filter(t=>t.team===s.motmTeamFilter):[],o=(t,f)=>{const l=t==="AEK"?"goalslista":"goalslistb";w({[l]:s[l].map(x=>x.player===f?{...x,count:x.count+1}:x).concat(s[l].find(x=>x.player===f)?[]:[{player:f,count:1}])})},k=(t,f)=>{const l=t==="AEK"?"goalslista":"goalslistb";w({[l]:s[l].map(x=>x.player===f?{...x,count:Math.max(0,x.count-1)}:x).filter(x=>x.count>0)})},C=(t,f)=>{const l=t==="AEK"?"ownGoalsA":"ownGoalsB",x=Math.max(0,s[l]+f);w({[l]:x})},z=(t,f)=>{if(!f)return;const l=t==="AEK"?"goalslista":"goalslistb",x=s[l].find(S=>S.player===f);w(x?{[l]:s[l].map(S=>S.player===f?{...S,count:S.count+1}:S)}:{[l]:[...s[l],{player:f,count:1}]})},v=(t,f)=>{const l=t==="AEK"?"goalslista":"goalslistb";w({[l]:s[l].filter(x=>x.player!==f)})};return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neues Spiel hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"FÃ¼gen Sie ein neues Spiel zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"âš½"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Spiel hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um ein neues Spiel zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neues Spiel erfassen"]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-2 sm:p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg w-full max-w-lg modal-content match-modal-content",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neues Spiel"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:m,children:"Ã—"})]}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"âš½ Spielpaarung"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium",children:"AEK Athen"}),e.jsx("div",{className:"text-gray-500 font-bold text-xl",children:"vs"}),e.jsx("div",{className:"bg-red-100 text-red-800 px-4 py-2 rounded-lg font-medium",children:"Real Madrid"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:s.date,onChange:t=>u("date",t.target.value),className:"form-input",required:!0,disabled:m})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"âš½ Live Torwertung"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-700",children:[s.goalsa," : ",s.goalsb]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["AEK Athen ",s.goalsa," - ",s.goalsb," Real Madrid"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-blue-600 mb-3",children:"âš½ AEK Athen TorschÃ¼tzen"})}),e.jsx("div",{className:"space-y-2",children:s.goalslista.map((t,f)=>e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:t.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.count," Tor",t.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>k("AEK",t.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:m,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.count}),e.jsx("button",{type:"button",onClick:()=>o("AEK",t.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:m,children:"+"}),e.jsx("button",{type:"button",onClick:()=>v("AEK",t.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:m,title:"TorschÃ¼tze entfernen",children:"âœ•"})]})]},`aek-${t.player}-${f}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:t=>{t.target.value&&(z("AEK",t.target.value),t.target.value="")},className:"w-full form-input bg-blue-100 border-blue-300 text-blue-800",disabled:m,children:[e.jsx("option",{value:"",children:"+ TorschÃ¼tze hinzufÃ¼gen"}),N("AEK").map(t=>e.jsxs("option",{value:t.name,children:[t.name," (",t.position,")"]},t.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"ZÃ¤hlen fÃ¼r Real Madrid"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>C("AEK",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:m||s.ownGoalsA===0,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:s.ownGoalsA}),e.jsx("button",{type:"button",onClick:()=>C("AEK",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:m,children:"+"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-red-600 mb-3",children:"âš½ Real Madrid TorschÃ¼tzen"})}),e.jsx("div",{className:"space-y-2",children:s.goalslistb.map((t,f)=>e.jsxs("div",{className:"flex items-center justify-between bg-red-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:t.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.count," Tor",t.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>k("Real",t.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:m,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.count}),e.jsx("button",{type:"button",onClick:()=>o("Real",t.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:m,children:"+"}),e.jsx("button",{type:"button",onClick:()=>v("Real",t.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:m,title:"TorschÃ¼tze entfernen",children:"âœ•"})]})]},`real-${t.player}-${f}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:t=>{t.target.value&&(z("Real",t.target.value),t.target.value="")},className:"w-full form-input bg-red-100 border-red-300 text-red-800",disabled:m,children:[e.jsx("option",{value:"",children:"+ TorschÃ¼tze hinzufÃ¼gen"}),N("Real").map(t=>e.jsxs("option",{value:t.name,children:[t.name," (",t.position,")"]},t.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"ZÃ¤hlen fÃ¼r AEK Athen"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>C("Real",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:m||s.ownGoalsB===0,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:s.ownGoalsB}),e.jsx("button",{type:"button",onClick:()=>C("Real",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:m,children:"+"})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"ðŸŸ¨ðŸŸ¥ Karten"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Heimteam"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¨ Gelbe Karten"}),e.jsx("input",{type:"number",min:"0",value:s.yellowa,onChange:t=>u("yellowa",t.target.value),onFocus:t=>t.target.select(),className:"form-input",disabled:m})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¥ Rote Karten"}),e.jsx("input",{type:"number",min:"0",value:s.reda,onChange:t=>u("reda",t.target.value),onFocus:t=>t.target.select(),className:"form-input",disabled:m})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Gastteam"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¨ Gelbe Karten"}),e.jsx("input",{type:"number",min:"0",value:s.yellowb,onChange:t=>u("yellowb",t.target.value),onFocus:t=>t.target.select(),className:"form-input",disabled:m})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¥ Rote Karten"}),e.jsx("input",{type:"number",min:"0",value:s.redb,onChange:t=>u("redb",t.target.value),onFocus:t=>t.target.select(),className:"form-input",disabled:m})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"â­ Spieler des Spiels"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-text-muted mb-2",children:"Team Filter:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>u("motmTeamFilter","all"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${s.motmTeamFilter==="all"?"bg-gray-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:m,children:"Alle"}),e.jsx("button",{type:"button",onClick:()=>u("motmTeamFilter","AEK"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${s.motmTeamFilter==="AEK"?"bg-blue-600 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,disabled:m,children:"AEK"}),e.jsx("button",{type:"button",onClick:()=>u("motmTeamFilter","Real"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${s.motmTeamFilter==="Real"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,disabled:m,children:"Real"})]})]}),e.jsxs("select",{value:s.manofthematch,onChange:t=>u("manofthematch",t.target.value),className:"form-input",disabled:m,children:[e.jsx("option",{value:"",children:"Keinen Spieler auswÃ¤hlen"}),T().map(t=>e.jsxs("option",{value:t.name,children:[t.name," (",t.team," - ",t.position,")"]},t.id))]}),!d||d.length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler verfÃ¼gbar. Bitte fÃ¼gen Sie erst Spieler hinzu."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"ðŸ’° Preisgelder (automatisch berechnet)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld AEK (â‚¬)"}),e.jsx("input",{type:"number",value:s.prizeaek,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld Real (â‚¬)"}),e.jsx("input",{type:"number",value:s.prizereal,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Basierend auf Ergebnis und Karten: Gewinner 1Mâ‚¬ - (Verlierer-Tore Ã— 50kâ‚¬) - (Karten Ã— 20kâ‚¬/50kâ‚¬)"})]}),s.goalsa===s.goalsb&&(s.goalsa>0||s.goalsb>0)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-600 mr-2",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-800",children:"Unentschieden nicht erlaubt"}),e.jsx("p",{className:"text-sm text-red-700",children:"Ein Team muss gewinnen. Unentschieden sind in dieser App nicht mÃ¶glich."})]})]})}),!s.manofthematch&&(s.goalsa>0||s.goalsb>0)&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-yellow-600 mr-2",children:"â­"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-yellow-800",children:"Spieler des Spiels erforderlich"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Bitte wÃ¤hlen Sie einen Spieler des Spiels aus, bevor Sie das Match speichern."})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:m,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!b()||m,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})})]})}const I=[{value:"AEK",label:"AEK Athen",color:"blue",icon:"ðŸ”µ"},{value:"Real",label:"Real Madrid",color:"red",icon:"ðŸ”´"},{value:"Ehemalige",label:"Ehemalige",color:"gray",icon:"âš«"}],q=d=>{const n=I.find(a=>a.value===d);return n?`${n.icon} ${n.label}`:d};function ye(){const{data:d}=_("players","*"),[n,a]=A.useState(!1),[s,i]=A.useState(""),[m,g]=A.useState({player_id:"",type:"",reason:"",customDuration:1}),[p,w]=A.useState(!1),u=(o,k)=>{g(C=>({...C,[o]:k})),o==="team"&&g(C=>({...C,player_id:""}))},r=()=>!d||!s?[]:d.filter(o=>o.team===s),b=async o=>{var k;o.preventDefault(),w(!0);try{const C=d==null?void 0:d.find(x=>x.id===parseInt(m.player_id)),z=H.find(x=>x.value===m.type);if(!C)throw new Error("Spieler nicht gefunden");if(!z)throw new Error("Sperrart nicht gefunden");const t=(k=(await F.select("bans","*",{eq:{player_id:C.id}})).data)==null?void 0:k.find(x=>(x.matchesserved||0)<(x.totalgames||0));if(t)throw new Error(`Spieler "${C.name}" ist bereits gesperrt (${t.totalgames-t.matchesserved} Spiele verbleibend)`);const f=z.fixedDuration?z.duration:m.customDuration,l=await F.insert("bans",{player_id:C.id,team:C.team,type:z.value,totalgames:f,matchesserved:0,reason:m.reason||z.value});if(l.error)throw new Error(`Ban insert failed: ${l.error.message}`);g({player_id:"",type:"",reason:"",customDuration:1}),i(""),a(!1),K.success(`Sperre fÃ¼r "${C.name}" erfolgreich hinzugefÃ¼gt!`)}catch(C){console.error("Ban submission error:",C),K.error(C.message||"Fehler beim HinzufÃ¼gen der Sperre")}finally{w(!1)}},N=s&&m.player_id&&m.type,T=H.find(o=>o.value===m.type);return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Sperre hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erstellen Sie eine neue Spielersperre in der Datenbank."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸš«"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Sperre hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Spielersperre zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Sperre erfassen"]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Sperre"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:p,children:"Ã—"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:s,onChange:o=>{i(o.target.value),g(k=>({...k,player_id:""}))},className:"form-input",required:!0,disabled:p,children:[e.jsx("option",{value:"",children:"Team wÃ¤hlen"}),I.filter(o=>o.value!=="Ehemalige").map(o=>e.jsx("option",{value:o.value,children:q(o.value)},o.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spieler *"}),e.jsxs("select",{value:m.player_id,onChange:o=>u("player_id",o.target.value),className:"form-input",required:!0,disabled:p||!s,children:[e.jsx("option",{value:"",children:s?"Spieler wÃ¤hlen":"Bitte zuerst Team wÃ¤hlen"}),r().map(o=>e.jsxs("option",{value:o.id,children:[o.name," (",o.position,")"]},o.id))]}),s&&r().length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler im gewÃ¤hlten Team verfÃ¼gbar."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Sperrart *"}),e.jsxs("select",{value:m.type,onChange:o=>u("type",o.target.value),className:"form-input",required:!0,disabled:p,children:[e.jsx("option",{value:"",children:"Sperrart wÃ¤hlen"}),H.map(o=>e.jsxs("option",{value:o.value,children:[o.icon," ",o.label,o.fixedDuration?` (${o.duration} Spiel${o.duration!==1?"e":""})`:` (1-${o.maxDuration} Spiele)`]},o.value))]})]}),T&&!T.fixedDuration&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Spiele *"}),e.jsx("select",{value:m.customDuration,onChange:o=>u("customDuration",parseInt(o.target.value)),className:"form-input",required:!0,disabled:p,children:Array.from({length:T.maxDuration},(o,k)=>k+1).map(o=>e.jsxs("option",{value:o,children:[o," Spiel",o!==1?"e":""]},o))}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["WÃ¤hlen Sie zwischen ",T.minDuration," und ",T.maxDuration," Spielen"]})]}),T&&T.fixedDuration&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"Gelb-Rote Karten haben immer eine feste Sperre von 1 Spiel."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"ZusÃ¤tzlicher Grund (optional)"}),e.jsx("input",{type:"text",value:m.reason,onChange:o=>u("reason",o.target.value),className:"form-input",placeholder:"Weitere Details zur Sperre...",disabled:p})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:p,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!N||p||!d||d.length===0,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:p?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Sperrarten"}),e.jsx("div",{className:"space-y-2",children:H.map(o=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:o.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:o.label})]}),e.jsx("span",{className:"text-sm text-text-muted",children:o.fixedDuration?`${o.duration} Spiel${o.duration!==1?"e":""} (fest)`:`1-${o.maxDuration} Spiele (variabel)`})]},o.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-yellow-50 border-yellow-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-yellow-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Nach dem HinzufÃ¼gen kÃ¶nnen Sie die Sperre in der Sperren-Ãœbersicht einsehen und verwalten."})]})]})})]})}const ne=[{value:"TH",label:"Torwart (TH)"},{value:"IV",label:"Innenverteidiger (IV)"},{value:"AV",label:"AuÃŸenverteidiger (AV)"},{value:"ZM",label:"Zentrales Mittelfeld (ZM)"},{value:"OM",label:"Offensives Mittelfeld (OM)"},{value:"ST",label:"StÃ¼rmer (ST)"}];function ve(){const[d,n]=A.useState(!1),[a,s]=A.useState({name:"",team:"",position:"",goals:0,value:0}),[i,m]=A.useState(!1),g=(u,r)=>{s(b=>({...b,[u]:r}))},p=async u=>{u.preventDefault(),m(!0);try{const r=await F.select("players","*",{eq:{name:a.name.trim(),team:a.team.trim()}});if(r.data&&r.data.length>0)throw new Error(`Spieler "${a.name}" existiert bereits im Team "${a.team}"`);const b=await F.insert("players",{name:a.name.trim(),team:a.team.trim(),position:a.position.trim().toUpperCase(),goals:parseInt(a.goals)||0,value:parseFloat(a.value)||0});if(b.error)throw new Error(`Player insert failed: ${b.error.message}`);s({name:"",team:"",position:"",goals:0,value:0}),n(!1),K.success(`Spieler "${a.name}" erfolgreich hinzugefÃ¼gt!`)}catch(r){console.error("Player submission error:",r),K.error(r.message||"Fehler beim HinzufÃ¼gen des Spielers")}finally{m(!1)}},w=a.name&&a.team&&a.position&&a.value!=="";return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neuen Spieler hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"FÃ¼gen Sie einen neuen Spieler zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ‘¤"}),e.jsxs("h4",{className:"text-lg font-medium text-text-primary mb-2",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"Spieler hinzufÃ¼gen"]}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um einen neuen Spieler zu erfassen."}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neuen Spieler erfassen"]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neuer Spieler"}),e.jsx("button",{onClick:()=>n(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:i,children:"Ã—"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spielername *"}),e.jsx("input",{type:"text",value:a.name,onChange:u=>g("name",u.target.value),className:"form-input",placeholder:"z.B. Max Mustermann",required:!0,disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:a.team,onChange:u=>g("team",u.target.value),className:"form-input",required:!0,disabled:i,children:[e.jsx("option",{value:"",children:"Team wÃ¤hlen"}),I.map(u=>e.jsx("option",{value:u.value,children:q(u.value)},u.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Position *"}),e.jsxs("select",{value:a.position,onChange:u=>g("position",u.target.value),className:"form-input",required:!0,disabled:i,children:[e.jsx("option",{value:"",children:"Position wÃ¤hlen"}),ne.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Marktwert (Millionen â‚¬) *"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:a.value,onChange:u=>g("value",u.target.value),onFocus:u=>u.target.select(),className:"form-input",placeholder:"0.0",disabled:i}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Marktwert in Millionen Euro (z.B. 1.5 fÃ¼r 1.5M â‚¬)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Tore"}),e.jsx("input",{type:"number",min:"0",value:a.goals,onChange:u=>g("goals",u.target.value),onFocus:u=>u.target.select(),className:"form-input",placeholder:"0",disabled:i})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:i,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!w||i,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Teams"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:I.map(u=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("span",{className:`font-medium ${u.color==="blue"?"text-blue-600":u.color==="red"?"text-red-600":"text-gray-600"}`,children:q(u.value)}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",u.value,")"]})]},u.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Positionen"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:ne.map(u=>e.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:e.jsx("span",{className:"font-medium text-text-primary text-sm",children:u.label})},u.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-green-50 border-green-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-green-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-green-700 text-sm",children:"Nach dem HinzufÃ¼gen kÃ¶nnen Sie den Spieler in der Kader-Ãœbersicht einsehen und verwalten."})]})]})})]})}const ie=[{value:"Preisgeld",label:"Preisgeld",icon:"ðŸ†"},{value:"Strafe",label:"Strafe",icon:"ðŸ“‰"},{value:"Spielerkauf",label:"Spielerkauf",icon:"ðŸ‘¤"},{value:"Spielerverkauf",label:"Spielerverkauf",icon:"ðŸ’°"},{value:"Echtgeld-Ausgleich",label:"Echtgeld-Ausgleich",icon:"ðŸ’³"},{value:"SdS Bonus",label:"Spieler des Spiels Bonus",icon:"â­"},{value:"Sonstiges",label:"Sonstiges",icon:"ðŸ“ˆ"}];function Ne(){const[d,n]=A.useState(!1),[a,s]=A.useState({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),[i,m]=A.useState(!1),g=(r,b)=>{s(N=>({...N,[r]:b}))},p=async r=>{r.preventDefault(),m(!0);try{const b=parseFloat(a.amount),N=await F.insert("transactions",{date:a.date,type:a.type.trim(),team:a.team.trim(),amount:b,info:a.info.trim(),match_id:null});if(N.error)throw new Error(`Transaction insert failed: ${N.error.message}`);await w(a.team.trim(),a.type.trim(),b),s({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),n(!1),K.success("Transaktion erfolgreich hinzugefÃ¼gt!")}catch(b){console.error("Transaction submission error:",b),K.error(b.message||"Fehler beim HinzufÃ¼gen der Transaktion")}finally{m(!1)}},w=async(r,b,N)=>{try{const T=await F.select("finances","*",{eq:{team:r}});let o=T.data&&T.data.length>0?T.data[0]:{team:r,balance:0,debt:0},k={};if(b==="Echtgeld-Ausgleich")k.debt=(o.debt||0)+N;else{let C=(o.balance||0)+N;C<0&&(C=0),k.balance=C}o.id?await F.update("finances",k,o.id):await F.insert("finances",{team:r,balance:k.balance||0,debt:k.debt||0})}catch(T){console.warn("Failed to update finances:",T)}},u=a.team&&a.type&&a.amount&&a.date;return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Transaktion hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erfassen Sie eine neue finanzielle Transaktion."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ’°"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Transaktion hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Transaktion zu erfassen."}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Transaktion erfassen"]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Transaktion"}),e.jsx("button",{onClick:()=>n(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:i,children:"Ã—"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:a.team,onChange:r=>g("team",r.target.value),className:"form-input",required:!0,disabled:i,children:[e.jsx("option",{value:"",children:"Team wÃ¤hlen"}),I.filter(r=>r.value!=="Ehemalige").map(r=>e.jsx("option",{value:r.value,children:q(r.value)},r.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Transaktionsart *"}),e.jsxs("select",{value:a.type,onChange:r=>g("type",r.target.value),className:"form-input",required:!0,disabled:i,children:[e.jsx("option",{value:"",children:"Typ wÃ¤hlen"}),ie.map(r=>e.jsxs("option",{value:r.value,children:[r.icon," ",r.label]},r.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Betrag (â‚¬) *"}),e.jsx("input",{type:"number",step:"0.01",value:a.amount,onChange:r=>g("amount",r.target.value),onFocus:r=>r.target.select(),className:"form-input",placeholder:"0.00",required:!0,disabled:i}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Negative Werte fÃ¼r Ausgaben, positive fÃ¼r Einnahmen"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Beschreibung"}),e.jsx("input",{type:"text",value:a.info,onChange:r=>g("info",r.target.value),className:"form-input",placeholder:"ZusÃ¤tzliche Informationen...",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:a.date,onChange:r=>g("date",r.target.value),className:"form-input",required:!0,disabled:i})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:i,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!u||i,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Transaktionsarten"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ie.map(r=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:r.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:r.label})]},r.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Teams"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:I.filter(r=>r.value!=="Ehemalige").map(r=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("span",{className:`font-medium ${r.color==="blue"?"text-blue-600":"text-red-600"}`,children:q(r.value)}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",r.value,")"]})]},r.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Nach dem HinzufÃ¼gen kÃ¶nnen Sie die Transaktion in der Finanzen-Ãœbersicht einsehen."})]})]})})]})}function we(){var ae;const[d,n]=A.useState("players"),[a,s]=A.useState(!1),[i,m]=A.useState(""),[g,p]=A.useState(new Set),{data:w,refetch:u}=_("players","*",{order:{column:"id",ascending:!1}}),{data:r,refetch:b}=_("matches","*",{order:{column:"date",ascending:!1}}),{data:N,refetch:T}=_("bans","*",{order:{column:"id",ascending:!1}}),{data:o,refetch:k}=_("transactions","*",{order:{column:"date",ascending:!1}}),{remove:C}=J("players"),{remove:z}=J("bans"),{remove:v}=J("transactions"),t=[{id:"players",label:"Spieler lÃ¶schen",icon:"fas fa-users"},{id:"matches",label:"Spiele lÃ¶schen (Einzel & Bulk)",icon:"fas fa-futbol"},{id:"bans",label:"Sperren lÃ¶schen",icon:"fas fa-ban"},{id:"transactions",label:"Transaktionen lÃ¶schen",icon:"fas fa-euro-sign"}],f=c=>{n(c),m(""),p(new Set)},l=(c,j)=>{const y=new Set(g);j?y.add(c):y.delete(c),p(y)},x=c=>{const j=W(c);g.size===j.length?p(new Set):p(new Set(j.map(y=>y.id)))},S=async()=>{if(g.size===0){K.error("Keine Spiele ausgewÃ¤hlt");return}const j=((r==null?void 0:r.filter($=>g.has($.id)))||[]).reduce(($,L)=>$+((o==null?void 0:o.filter(V=>V.match_id===L.id).length)||0),0);let y=`Sind Sie sicher, dass Sie ${g.size} ausgewÃ¤hlte Spiele lÃ¶schen mÃ¶chten?`;if(j>0&&(y+=`

Achtung: ${j} zugehÃ¶rige Transaktion(en) werden ebenfalls gelÃ¶scht.`),y+=`

Dieser Vorgang kann nicht rÃ¼ckgÃ¤ngig gemacht werden!`,!confirm(y))return;s(!0);let h=0,E=0;try{const{deleteMatch:$}=await Y(async()=>{const{deleteMatch:L}=await import("./matches-C1XFu919.js");return{deleteMatch:L}},__vite__mapDeps([0,1]));for(const L of g)try{console.log(`Deleting match ${L}`),await $(L),h++}catch(V){console.error(`Failed to delete match ${L}:`,V),E++}p(new Set),h>0&&E===0?K.success(`Alle ${h} Spiele erfolgreich gelÃ¶scht`):h>0&&E>0?K.success(`${h} Spiele gelÃ¶scht, ${E} fehlgeschlagen`):K.error(`Alle ${E} LÃ¶schvorgÃ¤nge fehlgeschlagen`),b(),k(),setTimeout(()=>{b(),k()},1e3)}catch($){console.error("Bulk delete error:",$),K.error("Fehler beim Bulk-LÃ¶schen: "+$.message),p(new Set)}finally{s(!1)}},D=()=>{switch(d){case"players":return{total:(w==null?void 0:w.length)||0,filtered:O(w).length};case"matches":return{total:(r==null?void 0:r.length)||0,filtered:W(r).length};case"bans":return{total:(N==null?void 0:N.length)||0,filtered:ee(N).length};case"transactions":return{total:(o==null?void 0:o.length)||0,filtered:te(o).length};default:return{total:0,filtered:0}}},M=async c=>{const j=(N==null?void 0:N.filter(h=>h.player_id===c.id||h.player_name===c.name))||[];let y=`Sind Sie sicher, dass Sie ${c.name} (${c.team}) lÃ¶schen mÃ¶chten?`;if(j.length>0&&(y+=`

Achtung: ${j.length} zugehÃ¶rige Sperre(n) werden ebenfalls gelÃ¶scht.`),c.goals&&c.goals>0&&(y+=`
Der Spieler hat ${c.goals} Tor(e) erzielt.`),!!confirm(y)){s(!0);try{await C(c.id),K.success(`Spieler ${c.name} erfolgreich gelÃ¶scht`),u(),j.length>0&&T()}catch(h){K.error("Fehler beim LÃ¶schen des Spielers: "+h.message)}finally{s(!1)}}},B=async c=>{const j=(o==null?void 0:o.filter(E=>E.match_id===c.id))||[],y=`AEK ${c.goalsa||0} - ${c.goalsb||0} Real`;let h=`Sind Sie sicher, dass Sie das Spiel vom ${new Date(c.date).toLocaleDateString("de-DE")} (${y}) lÃ¶schen mÃ¶chten?`;if(j.length>0&&(h+=`

Achtung: ${j.length} zugehÃ¶rige Transaktion(en) werden ebenfalls gelÃ¶scht.`),c.manofthematch&&(h+=`
Spieler des Spiels: ${c.manofthematch}`),!!confirm(h)){s(!0);try{const{deleteMatch:E}=await Y(async()=>{const{deleteMatch:$}=await import("./matches-C1XFu919.js");return{deleteMatch:$}},__vite__mapDeps([0,1]));console.log(`Attempting to delete match ${c.id}`),await E(c.id),console.log(`Successfully deleted match ${c.id}`),K.success("Spiel erfolgreich gelÃ¶scht"),b(),k(),setTimeout(()=>{b(),k()},1e3)}catch(E){console.error("Error deleting match:",E);let $="Fehler beim LÃ¶schen des Spiels: ";E.message.includes("not found")?$+=`Spiel mit ID ${c.id} wurde nicht in der Datenbank gefunden. MÃ¶glicherweise wurde es bereits gelÃ¶scht.`:E.message.includes("Invalid match ID")?$+=`UngÃ¼ltige Spiel-ID: ${c.id}`:E.message.includes("fetch failed")||E.message.includes("network")?$+="Netzwerkfehler. Bitte Ã¼berprÃ¼fen Sie Ihre Internetverbindung.":$+=E.message,K.error($)}finally{s(!1)}}},G=async c=>{var E;const j=c.player_name||(c.player_id&&w?(E=w.find($=>$.id===c.player_id))==null?void 0:E.name:"Unbekannter Spieler"),y=Math.max(0,(c.totalgames||0)-(c.matchesserved||0));let h=`Sind Sie sicher, dass Sie die Sperre fÃ¼r ${j} lÃ¶schen mÃ¶chten?`;if(h+=`
Sperrtyp: ${c.type}`,y>0?h+=`
Noch ${y} Spiel(e) verbleibend`:h+=`
Sperre bereits abgesessen`,c.reason&&(h+=`
Grund: ${c.reason}`),!!confirm(h)){s(!0);try{await z(c.id),K.success(`Sperre fÃ¼r ${j} erfolgreich gelÃ¶scht`),T()}catch($){K.error("Fehler beim LÃ¶schen der Sperre: "+$.message)}finally{s(!1)}}},R=async c=>{const j=c.match_id&&r?r.find(h=>h.id===c.match_id):null;let y=`Sind Sie sicher, dass Sie die Transaktion "${c.type}" lÃ¶schen mÃ¶chten?`;if(y+=`
Betrag: ${c.amount>0?"+":""}${c.amount}M â‚¬ (${c.team})`,c.date&&(y+=`
Datum: ${new Date(c.date).toLocaleDateString("de-DE")}`),c.info&&(y+=`
Info: ${c.info}`),j&&(y+=`
ZugehÃ¶riges Spiel: ${new Date(j.date).toLocaleDateString("de-DE")} (AEK ${j.goalsa||0} - ${j.goalsb||0} Real)`),!!confirm(y)){s(!0);try{await v(c.id),K.success("Transaktion erfolgreich gelÃ¶scht"),k()}catch(h){K.error("Fehler beim LÃ¶schen der Transaktion: "+h.message)}finally{s(!1)}}},P=c=>{const j=I.find(y=>y.value===c);return j?j.icon:"âš«"},O=c=>i?(c||[]).filter(j=>{var y,h,E;return((y=j.name)==null?void 0:y.toLowerCase().includes(i.toLowerCase()))||((h=j.team)==null?void 0:h.toLowerCase().includes(i.toLowerCase()))||((E=j.position)==null?void 0:E.toLowerCase().includes(i.toLowerCase()))}):c||[],W=c=>i?(c||[]).filter(j=>{var y;return new Date(j.date).toLocaleDateString("de-DE").includes(i)||((y=j.manofthematch)==null?void 0:y.toLowerCase().includes(i.toLowerCase()))}):c||[],ee=c=>i?(c||[]).filter(j=>{var h,E,$,L;const y=j.player_name||(j.player_id&&w?(h=w.find(V=>V.id===j.player_id))==null?void 0:h.name:"");return(y==null?void 0:y.toLowerCase().includes(i.toLowerCase()))||((E=j.type)==null?void 0:E.toLowerCase().includes(i.toLowerCase()))||(($=j.team)==null?void 0:$.toLowerCase().includes(i.toLowerCase()))||((L=j.reason)==null?void 0:L.toLowerCase().includes(i.toLowerCase()))}):c||[],te=c=>i?(c||[]).filter(j=>{var y,h,E,$;return((y=j.type)==null?void 0:y.toLowerCase().includes(i.toLowerCase()))||((h=j.team)==null?void 0:h.toLowerCase().includes(i.toLowerCase()))||((E=j.info)==null?void 0:E.toLowerCase().includes(i.toLowerCase()))||(($=j.amount)==null?void 0:$.toString().includes(i))}):c||[],se=()=>{const c=O(w);return!c||c.length===0?e.jsx("p",{className:"text-text-muted text-center py-4",children:i?"Keine Spieler gefunden":"Keine Spieler vorhanden"}):e.jsx("div",{className:"space-y-2",children:c.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:P(j.team)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:j.name}),e.jsxs("p",{className:"text-sm text-text-muted",children:[j.team," â€¢ ",j.position,j.goals!==void 0&&e.jsxs("span",{className:"ml-2",children:["â€¢ ",j.goals," Tore"]})]})]})]}),e.jsxs("button",{onClick:()=>M(j),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"LÃ¶schen"]})]},j.id))})},xe=()=>{const c=W(r);if(!c||c.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:i?"Keine Spiele gefunden":"Keine Spiele vorhanden"});const j=c.length>0&&c.every(h=>g.has(h.id)),y=g.size>0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:()=>x(r),className:"w-4 h-4 text-accent-primary focus:ring-accent-primary border-gray-300 rounded"}),e.jsxs("span",{className:"text-sm text-text-primary",children:[j?"Alle abwÃ¤hlen":"Alle auswÃ¤hlen"," (",c.length,")"]})]}),g.size>0&&e.jsxs("span",{className:"text-sm text-accent-primary font-medium",children:[g.size," ausgewÃ¤hlt"]})]}),y&&e.jsxs("button",{onClick:S,disabled:a,className:"btn-primary btn-sm bg-red-600 hover:bg-red-700 text-white disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),g.size," Spiele lÃ¶schen"]})]}),e.jsx("div",{className:"space-y-2",children:c.map(h=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-bg-tertiary rounded-lg",children:[e.jsx("label",{className:"flex items-center cursor-pointer",children:e.jsx("input",{type:"checkbox",checked:g.has(h.id),onChange:E=>l(h.id,E.target.checked),className:"w-4 h-4 text-accent-primary focus:ring-accent-primary border-gray-300 rounded"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-text-primary",children:["ID ",h.id," â€¢ ",new Date(h.date).toLocaleDateString("de-DE")]}),e.jsxs("p",{className:"text-sm text-text-muted",children:["AEK ",h.goalsa||0," - ",h.goalsb||0," Real"]}),h.manofthematch&&e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:[e.jsx("i",{className:"fas fa-star mr-1"}),"SdS: ",h.manofthematch]})]}),e.jsxs("button",{onClick:()=>B(h),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Einzeln lÃ¶schen"]})]})})]},h.id))})]})},he=()=>{const c=ee(N);if(!c||c.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:i?"Keine Sperren gefunden":"Keine Sperren vorhanden"});const j=h=>{if(h.player_name)return h.player_name;if(h.player_id&&w){const E=w.find($=>$.id===h.player_id);return E?E.name:"Unbekannter Spieler"}return"Unbekannter Spieler"},y=h=>{const E=(h.totalgames||0)-(h.matchesserved||0);return Math.max(0,E)};return e.jsx("div",{className:"space-y-2",children:c.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:P(h.team)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:j(h)}),e.jsxs("p",{className:"text-sm text-text-muted",children:[h.type," â€¢ ",h.totalgames||0," Spiele",y(h)>0?` (${y(h)} verbleibend)`:" (abgesessen)"]}),h.reason&&e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Grund: ",h.reason]})]})]}),e.jsxs("button",{onClick:()=>G(h),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"LÃ¶schen"]})]},h.id))})},ge=()=>{const c=te(o);if(!c||c.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:i?"Keine Transaktionen gefunden":"Keine Transaktionen vorhanden"});const j=y=>{if(!y.match_id||!r)return null;const h=r.find(E=>E.id===y.match_id);return h?`Match: ${new Date(h.date).toLocaleDateString("de-DE")} (AEK ${h.goalsa||0} - ${h.goalsb||0} Real)`:null};return e.jsx("div",{className:"space-y-2",children:c.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:P(y.team)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-text-primary",children:y.type}),e.jsxs("p",{className:"text-sm text-text-muted",children:[e.jsxs("span",{className:y.amount>0?"text-green-600":"text-red-600",children:[y.amount>0?"+":"",y.amount,"M â‚¬"]}),y.date&&e.jsxs("span",{className:"ml-2",children:["â€¢ ",new Date(y.date).toLocaleDateString("de-DE")]})]}),y.info&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:y.info}),j(y)&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[e.jsx("i",{className:"fas fa-futbol mr-1"}),j(y)]})]})]}),e.jsxs("button",{onClick:()=>R(y),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"LÃ¶schen"]})]},y.id))})},be=()=>{switch(d){case"players":return se();case"matches":return xe();case"bans":return he();case"transactions":return ge();default:return se()}};return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Daten lÃ¶schen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Verwalten Sie die LÃ¶schung von Spielern, Spielen, Sperren und Transaktionen."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:t.map(c=>e.jsxs("button",{onClick:()=>f(c.id),className:`p-3 rounded-lg text-sm font-medium transition-colors ${d===c.id?"bg-accent-red text-white":"bg-bg-tertiary text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[e.jsx("i",{className:`${c.icon} mr-2`}),c.label]},c.id))}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:`${(ae=t.find(c=>c.id===d))==null?void 0:ae.label.replace(" lÃ¶schen","")} durchsuchen...`,value:i,onChange:c=>m(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent-red focus:border-transparent text-text-primary bg-bg-secondary"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-search text-text-muted"})}),i&&e.jsx("button",{onClick:()=>m(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-text-muted hover:text-text-primary",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[i&&e.jsxs("p",{className:"text-xs text-text-muted",children:[e.jsx("i",{className:"fas fa-filter mr-1"}),"Gefiltert nach: â€œ",i,"â€"]}),e.jsx("p",{className:"text-xs text-text-muted ml-auto",children:(()=>{const c=D();return i?`${c.filtered} von ${c.total} EintrÃ¤gen`:`${c.total} EintrÃ¤ge`})()})]})]}),e.jsxs("div",{className:"modern-card",children:[a&&e.jsx(oe,{message:"LÃ¶sche..."}),!a&&be()]}),e.jsx("div",{className:"mt-6 modern-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-600 mr-3",children:e.jsx("i",{className:"fas fa-exclamation-triangle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-1",children:"Achtung"}),e.jsx("p",{className:"text-red-700 text-sm",children:"Das LÃ¶schen von Daten ist permanent und kann nicht rÃ¼ckgÃ¤ngig gemacht werden. Bitte Ã¼berprÃ¼fen Sie Ihre Auswahl sorgfÃ¤ltig, bevor Sie fortfahren."})]})]})})]})}function Se({data:d=[],searchFields:n=[],filterOptions:a=[],onResults:s,placeholder:i="Suchen...",showCount:m=!0,searchExtractor:g}){const[p,w]=A.useState(""),[u,r]=A.useState({}),[b,N]=A.useState(""),[T,o]=A.useState("asc"),k=A.useRef(null),C=A.useMemo(()=>{let l=[...d];if(p.trim()){const x=p.toLowerCase().trim();l=l.filter(S=>{if(g){const D=g(S);return D&&D.toLowerCase().includes(x)}return n.some(D=>{const M=U(S,D);return M&&M.toString().toLowerCase().includes(x)})})}return Object.entries(u).forEach(([x,S])=>{if(S&&S!=="all"){const D=a.find(M=>M.key===x);D&&D.filterFn?l=l.filter(M=>D.filterFn(M,S)):l=l.filter(M=>U(M,x)===S)}}),b&&l.sort((x,S)=>{const D=U(x,b),M=U(S,b);let B=0;return typeof D=="number"&&typeof M=="number"?B=D-M:D instanceof Date&&M instanceof Date?B=D.getTime()-M.getTime():B=String(D).localeCompare(String(M)),T==="desc"?-B:B}),l},[d,p,u,b,T,n,a,g]);A.useEffect(()=>{s&&JSON.stringify(C)!==k.current&&(k.current=JSON.stringify(C),s(C))},[C,s]);const z=(l,x)=>{r(S=>({...S,[l]:x}))},v=l=>{b===l?o(T==="asc"?"desc":"asc"):(N(l),o("asc"))},t=()=>{w(""),r({}),N(""),o("asc")},f=p||Object.values(u).some(l=>l&&l!=="all")||b;return e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm mb-4",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:e.jsx("span",{className:"text-text-secondary","aria-hidden":"true",children:"ðŸ”"})}),e.jsx("input",{type:"text",value:p,onChange:l=>w(l.target.value),placeholder:`${i} (Strg+K fÃ¼r globale Suche)`,className:"w-full pl-10 pr-20 py-2 bg-bg-secondary border border-border-light rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary-green focus:border-transparent"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center gap-1 pr-3",children:[e.jsx("button",{onClick:()=>{const l=new CustomEvent("global-search-toggle");window.dispatchEvent(l)},className:"text-text-secondary hover:text-primary-green transition-colors p-1 rounded",title:"Globale Suche Ã¶ffnen (Strg+K)",children:e.jsx("span",{"aria-hidden":"true",children:"ðŸŒ"})}),p&&e.jsx("button",{onClick:()=>w(""),className:"text-text-secondary hover:text-text-primary transition-colors p-1 rounded",title:"Suchfeld leeren",children:e.jsx("span",{"aria-hidden":"true",children:"âœ•"})})]})]})}),(a.length>0||b)&&e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.map(l=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-text-primary",children:[l.label,":"]}),e.jsxs("select",{value:u[l.key]||"",onChange:x=>z(l.key,x.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"",children:"Alle"}),l.options.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))]})]},l.key)),n.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Sortieren:"}),e.jsxs("select",{value:b,onChange:l=>N(l.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"",children:"Standard"}),n.map(l=>e.jsx("option",{value:l,children:ce(l)},l))]}),b&&e.jsx("button",{onClick:()=>v(b),className:"px-2 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary hover:bg-bg-tertiary transition-colors duration-200",title:`Sortierung: ${T==="asc"?"Aufsteigend":"Absteigend"}`,children:T==="asc"?"â†‘":"â†“"})]}),f&&e.jsx("button",{onClick:t,className:"px-3 py-1 bg-red-100 text-red-800 border border-red-200 rounded text-sm hover:bg-red-200 transition-colors duration-200",children:"Filter zurÃ¼cksetzen"})]})}),m&&e.jsx("div",{className:"px-4 py-2 bg-bg-secondary border-b border-border-light",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-text-secondary",children:C.length===d.length?`${d.length} EintrÃ¤ge`:`${C.length} von ${d.length} EintrÃ¤gen`}),f&&e.jsxs("div",{className:"flex items-center gap-2",children:[p&&e.jsxs("span",{className:"bg-primary-green bg-opacity-10 text-primary-green px-2 py-1 rounded text-xs",children:['ðŸ” "',p,'"']}),Object.entries(u).filter(([,l])=>l&&l!=="all").map(([l,x])=>{const S=a.find(M=>M.key===l),D=S==null?void 0:S.options.find(M=>M.value===x);return e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:[S==null?void 0:S.label,": ",(D==null?void 0:D.label)||x]},l)}),b&&e.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:["ðŸ“Š ",ce(b)," ",T==="asc"?"â†‘":"â†“"]})]})]})})]})}function U(d,n){return!d||!n?"":n.split(".").reduce((a,s)=>a&&a[s]!==void 0?a[s]:"",d)}function ce(d){return{name:"Name",team:"Team",position:"Position",value:"Wert",date:"Datum",goalsa:"AEK Tore",goalsb:"Real Tore",type:"Typ",amount:"Betrag",description:"Beschreibung",totalgames:"Gesamt Spiele",matchesserved:"Gespielte Spiele"}[d]||d.charAt(0).toUpperCase()+d.slice(1)}function de({onNavigate:d}){const[n,a]=A.useState("players"),[s,i]=A.useState([]),{data:m,loading:g}=_("players","*"),{data:p,loading:w}=_("matches","*",{order:{column:"date",ascending:!1}}),{data:u,loading:r}=_("transactions","*",{order:{column:"date",ascending:!1}}),{data:b,loading:N}=_("bans","*",{order:{column:"id",ascending:!1}}),T=g||w||r||N,o=[{id:"players",label:"Spieler",icon:"fas fa-users",data:m||[],searchFields:["name","position","team","value"],filterOptions:[{key:"team",label:"Team",options:[{value:"AEK",label:"AEK Athen"},{value:"Real",label:"Real Madrid"},{value:"Ehemalige",label:"Ehemalige"}]},{key:"position",label:"Position",options:[{value:"TH",label:"Torwart"},{value:"IV",label:"Innenverteidiger"},{value:"LV",label:"Linksverteidiger"},{value:"RV",label:"Rechtsverteidiger"},{value:"ZDM",label:"Defensives Mittelfeld"},{value:"ZM",label:"Zentrales Mittelfeld"},{value:"ZOM",label:"Offensives Mittelfeld"},{value:"LM",label:"Linkes Mittelfeld"},{value:"RM",label:"Rechtes Mittelfeld"},{value:"LF",label:"Linker FlÃ¼gel"},{value:"RF",label:"Rechter FlÃ¼gel"},{value:"ST",label:"StÃ¼rmer"}]}]},{id:"matches",label:"Spiele",icon:"fas fa-futbol",data:p||[],searchFields:["date","goalsa","goalsb","goalscorers","manofthematch","teama","teamb"],filterOptions:[],searchExtractor:v=>{const t=[];if(v.date&&t.push(new Date(v.date).toLocaleDateString("de-DE")),v.teama&&t.push(v.teama),v.teamb&&t.push(v.teamb),v.goalsa!==void 0&&t.push(v.goalsa.toString()),v.goalsb!==void 0&&t.push(v.goalsb.toString()),v.goalslista)try{const f=typeof v.goalslista=="string"?JSON.parse(v.goalslista):v.goalslista;Array.isArray(f)&&f.forEach(l=>{typeof l=="string"?t.push(l):l&&l.player&&t.push(l.player)})}catch{}if(v.goalslistb)try{const f=typeof v.goalslistb=="string"?JSON.parse(v.goalslistb):v.goalslistb;Array.isArray(f)&&f.forEach(l=>{typeof l=="string"?t.push(l):l&&l.player&&t.push(l.player)})}catch{}return v.manofthematch&&(t.push(v.manofthematch),t.push("Spieler des Spiels"),t.push("SdS")),t.join(" ").toLowerCase()}},{id:"transactions",label:"Transaktionen",icon:"fas fa-euro-sign",data:u||[],searchFields:["type","description","amount","date"],filterOptions:[{key:"type",label:"Typ",options:[{value:"transfer",label:"Transfer"},{value:"preis",label:"Preisgeld"},{value:"strafe",label:"Strafe"},{value:"sonstige",label:"Sonstige"}],filterFn:(v,t)=>{var x,S;const f=((x=v.type)==null?void 0:x.toLowerCase())||"",l=((S=v.description)==null?void 0:S.toLowerCase())||"";switch(t){case"transfer":return f.includes("transfer")||l.includes("transfer");case"preis":return f.includes("preis")||l.includes("preis")||v.amount>0;case"strafe":return f.includes("strafe")||l.includes("strafe");case"sonstige":return!f.includes("transfer")&&!f.includes("preis")&&!f.includes("strafe");default:return!0}}}]},{id:"bans",label:"Sperren",icon:"fas fa-ban",data:b||[],searchFields:["player_name","team","type","reason"],filterOptions:[{key:"team",label:"Team",options:[{value:"AEK",label:"AEK Athen"},{value:"Real",label:"Real Madrid"}]},{key:"type",label:"Typ",options:[{value:"Gelbe Karte",label:"Gelbe Karte"},{value:"Gelb-Rote Karte",label:"Gelb-Rote Karte"},{value:"Rote Karte",label:"Rote Karte"},{value:"Verletzung",label:"Verletzung"}]}]}],k=o.find(v=>v.id===n),C=(v,t)=>{switch(t){case"players":d==null||d("squad");break;case"matches":d==null||d("matches");break;case"transactions":d==null||d("finances");break;case"bans":d==null||d("bans");break}},z=()=>{const v=s.length>0?s:k.data;return v.length===0?e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("i",{className:`${k.icon} text-4xl mb-2`}),e.jsxs("p",{children:["Keine ",k.label.toLowerCase()," gefunden"]})]}):e.jsx("div",{className:"divide-y divide-border-light",children:v.map(t=>e.jsxs("button",{onClick:()=>C(t,n),className:"w-full p-4 hover:bg-bg-secondary transition-colors text-left focus:outline-none focus:ring-2 focus:ring-primary-green focus:ring-inset",children:[n==="players"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:t.name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[t.position," â€¢ ",t.team," â€¢ ",t.value||0,"M â‚¬"]}),(t.goals||0)>0&&e.jsxs("p",{className:"text-xs text-primary-green",children:["âš½ ",t.goals||0," Tore"]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[t.value||0,"M â‚¬"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zum Spieler â†’"})]})]}),n==="matches"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:new Date(t.date).toLocaleDateString("de-DE")}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[t.teama||"AEK"," ",t.goalsa||0," - ",t.goalsb||0," ",t.teamb||"Real"]}),(()=>{const f=[];try{if(t.goalslista){const l=typeof t.goalslista=="string"?JSON.parse(t.goalslista):t.goalslista;Array.isArray(l)&&l.forEach(x=>{const S=typeof x=="string"?x:x==null?void 0:x.player;S&&f.push(`${S} (AEK)`)})}if(t.goalslistb){const l=typeof t.goalslistb=="string"?JSON.parse(t.goalslistb):t.goalslistb;Array.isArray(l)&&l.forEach(x=>{const S=typeof x=="string"?x:x==null?void 0:x.player;S&&f.push(`${S} (Real)`)})}}catch{}return f.length>0?e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["âš½ ",f.slice(0,3).join(", "),f.length>3?"...":""]}):null})(),t.manofthematch&&e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:["â­ SdS: ",t.manofthematch]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[(t.goalsa||0)+(t.goalsb||0)," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zum Spiel â†’"})]})]}),n==="transactions"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:t.type||"Transaktion"}),e.jsx("p",{className:"text-sm text-text-secondary",children:t.description||"Keine Beschreibung"}),e.jsx("p",{className:"text-xs text-text-secondary",children:new Date(t.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:`text-lg font-bold ${(t.amount||0)>=0?"text-green-600":"text-red-600"}`,children:[(t.amount||0)>0?"+":"",t.amount||0,"â‚¬"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zu Finanzen â†’"})]})]}),n==="bans"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:t.player_name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[t.team," â€¢ ",t.type]}),t.reason&&e.jsx("p",{className:"text-xs text-text-secondary",children:t.reason})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-sm text-accent-red",children:[t.duration||1," Spiel",(t.duration||1)!==1?"e":""]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zu Sperren â†’"})]})]})]},t.id))})};return T?e.jsx(oe,{message:"Lade Daten..."}):e.jsxs("div",{className:"p-4 pb-20 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-1",children:"ðŸ” Globale Suche"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Durchsuche alle Daten zentral an einem Ort"})]}),e.jsx("div",{className:"icon-only-nav flex overflow-x-auto space-x-2 pb-2",children:o.map(v=>e.jsxs("button",{onClick:()=>{a(v.id),i([])},className:`search-nav-button flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${n===v.id?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary"}`,title:v.label,"aria-label":v.label,children:[e.jsx("i",{className:v.icon}),e.jsx("span",{className:"font-medium hidden sm:inline",children:v.label}),e.jsxs("span",{className:"text-xs opacity-75",children:["(",v.data.length,")"]})]},v.id))}),e.jsx(Se,{data:k.data,searchFields:k.searchFields,filterOptions:k.filterOptions,searchExtractor:k.searchExtractor,onResults:i,placeholder:`${k.label} durchsuchen...`}),e.jsxs("div",{className:"modern-card",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("h4",{className:"font-medium text-text-primary",children:[s.length>0?"Suchergebnisse":`Alle ${k.label}`,e.jsxs("span",{className:"text-text-secondary ml-2",children:["(",s.length>0?s.length:k.data.length,")"]})]})}),z()]})]})}function ke(){const[d,n]=A.useState({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),[a,s]=A.useState(!1),[i,m]=A.useState(!0);A.useEffect(()=>{g()},[]);const g=async()=>{try{m(!0);const r=await Q.getManagers();if(r.data&&r.data.length>=2){const b=r.data.find(T=>T.id===1)||{name:"Alexander",gewicht:110},N=r.data.find(T=>T.id===2)||{name:"Philip",gewicht:105};n({aek:{name:b.name,age:30,weight:b.gewicht},real:{name:N.name,age:30,weight:N.gewicht}})}}catch(r){console.error("Error loading manager settings from database:",r)}finally{m(!1)}},p=(r,b,N)=>{n(T=>({...T,[r]:{...T[r],[b]:b==="name"?N:parseInt(N)||0}})),s(!0)},w=async()=>{try{m(!0);const r={name:d.aek.name,gewicht:d.aek.weight},b={name:d.real.name,gewicht:d.real.weight};await Q.update("managers",r,1),await Q.update("managers",b,2),s(!1),window.dispatchEvent(new CustomEvent("managerSettingsChanged"));const N=document.createElement("div");N.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",N.textContent="Manager-Einstellungen gespeichert!",document.body.appendChild(N),setTimeout(()=>{document.body.contains(N)&&document.body.removeChild(N)},3e3)}catch(r){console.error("Error saving manager settings:",r);const b=document.createElement("div");b.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",b.textContent="Fehler beim Speichern!",document.body.appendChild(b),setTimeout(()=>{document.body.contains(b)&&document.body.removeChild(b)},3e3)}finally{m(!1)}},u=()=>{n({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),s(!0)};return e.jsx("div",{className:"p-4 space-y-6",children:i?e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-green"}),e.jsx("span",{className:"ml-2 text-text-muted",children:"Lade Manager-Einstellungen..."})]})}):e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"ðŸ† Team-Manager Einstellungen"}),a&&e.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Ungespeicherte Ã„nderungen"})]}),e.jsx("div",{className:"text-sm text-text-muted mb-6",children:"Hier kÃ¶nnen Sie die Daten der Team-Manager fÃ¼r die BAK-Berechnung anpassen."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("h4",{className:"font-medium text-blue-800 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded mr-2"}),"AEK Manager"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:d.aek.name,onChange:r=>p("aek","name",r.target.value),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Manager Name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alter"}),e.jsx("input",{type:"number",min:"18",max:"80",value:d.aek.age,onChange:r=>p("aek","age",r.target.value),onFocus:r=>r.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:d.aek.weight,onChange:r=>p("aek","weight",r.target.value),onFocus:r=>r.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border border-red-200 rounded-lg bg-red-50",children:[e.jsxs("h4",{className:"font-medium text-red-800 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-red-600 rounded mr-2"}),"Real Manager"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:d.real.name,onChange:r=>p("real","name",r.target.value),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Manager Name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alter"}),e.jsx("input",{type:"number",min:"18",max:"80",value:d.real.age,onChange:r=>p("real","age",r.target.value),onFocus:r=>r.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:d.real.weight,onChange:r=>p("real","weight",r.target.value),onFocus:r=>r.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-border-light",children:[e.jsx("button",{onClick:u,className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors",children:"Standardwerte wiederherstellen"}),e.jsx("button",{onClick:w,disabled:!a||i,className:`px-4 py-2 text-sm rounded-lg transition-colors ${a&&!i?"bg-primary-green text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i?"Speichern...":"Einstellungen speichern"})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Hinweis:"})," Diese Einstellungen werden fÃ¼r die BAK-Berechnung in der Statistik verwendet. Die Werte werden in der Datenbank gespeichert."]})})]})})}function Ae({onLogout:d,onNavigate:n,showHints:a=!1}){const[s,i]=A.useState("search"),m=[{id:"search",label:"Globale Suche",icon:"fas fa-search"},{id:"matches",label:"Spiele hinzufÃ¼gen",icon:"fas fa-futbol"},{id:"bans",label:"Sperren hinzufÃ¼gen",icon:"fas fa-ban"},{id:"players",label:"Spieler hinzufÃ¼gen",icon:"fas fa-users"},{id:"transactions",label:"Transaktionen hinzufÃ¼gen",icon:"fas fa-euro-sign"},{id:"settings",label:"Team-Einstellungen",icon:"fas fa-cog"},{id:"delete",label:"Daten lÃ¶schen",icon:"fas fa-trash"}],g=()=>{switch(s){case"search":return e.jsx(de,{onNavigate:n});case"matches":return e.jsx(je,{});case"bans":return e.jsx(ye,{});case"players":return e.jsx(ve,{});case"transactions":return e.jsx(Ne,{});case"settings":return e.jsx(ke,{});case"delete":return e.jsx(we,{});default:return e.jsx(de,{onNavigate:n})}};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 bg-bg-secondary border-b border-border-light flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-1",children:"Verwaltung"}),e.jsx("p",{className:"text-text-muted text-sm",children:"HinzufÃ¼gen und verwalten von Daten"})]}),e.jsxs("button",{onClick:d,className:"flex items-center px-3 py-2 bg-accent-red text-white rounded-lg hover:bg-red-600 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50","aria-label":"Abmelden",children:[e.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),e.jsx("span",{className:"text-sm",children:"Logout"})]})]}),e.jsx("div",{className:"bg-bg-secondary border-b border-border-light",children:e.jsx("div",{className:"flex overflow-x-auto",children:m.map(p=>e.jsxs("button",{onClick:()=>i(p.id),className:`flex-shrink-0 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${s===p.id?"text-primary-green border-b-2 border-primary-green bg-bg-primary":"text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[e.jsx("i",{className:`${p.icon} mr-2`}),p.label]},p.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:g()})]})}export{Ae as default};
