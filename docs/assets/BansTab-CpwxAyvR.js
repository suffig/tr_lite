import{r as f,u as x,j as e,L as b}from"./main-C8HGAIpn.js";import{B as o,g as y,a as k}from"./banTypes-DuNOJEIt.js";function T({onNavigate:S,showHints:h=!1}){const[l,p]=f.useState("active"),{data:r,loading:u}=x("bans","*"),{data:n,loading:g}=x("players","*"),v=u||g,j=t=>{if(!n)return"Unbekannt";const s=n.find(a=>a.id===t);return(s==null?void 0:s.name)||"Unbekannt"},N=t=>{if(!n)return"Unbekannt";const s=n.find(a=>a.id===t);return(s==null?void 0:s.team)||"Unbekannt"},i=(r||[]).filter(s=>l==="all"?!0:l==="active"?s.totalgames-s.matchesserved>0:l==="completed"?s.totalgames-s.matchesserved===0:s.type===l),c=(r==null?void 0:r.filter(t=>t.totalgames-t.matchesserved>0))||[],m=(r==null?void 0:r.filter(t=>t.totalgames-t.matchesserved===0))||[];return v?e.jsx(b,{message:"Lade Sperren..."}):e.jsxs("div",{className:"p-4 pb-24 mobile-safe-bottom",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"Sperren-Ãœbersicht"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{key:"all",label:"Alle",count:(r==null?void 0:r.length)||0},{key:"active",label:"Aktiv",count:c.length},{key:"completed",label:"Beendet",count:m.length},...o.map(t=>({key:t.value,label:t.label,count:(r==null?void 0:r.filter(s=>s.type===t.value).length)||0}))].map(t=>e.jsxs("button",{onClick:()=>p(t.key),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${l===t.key?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary border border-border-light"}`,children:[t.label," (",t.count,")"]},t.key))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-red",children:c.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Aktive Sperren"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:m.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Beendete Sperren"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:(r==null?void 0:r.length)||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Sperren"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-blue",children:o.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Sperr-Arten"})]})]}),i.length>0?e.jsx("div",{className:"space-y-4",children:i.map(t=>{const s=(t.totalgames||0)-(t.matchesserved||0),a=(t.totalgames||0)>0?(t.matchesserved||0)/(t.totalgames||0)*100:0,d=s>0;return e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:"text-2xl",children:y(t.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-text-primary",children:j(t.player_id)}),e.jsxs("span",{className:"text-sm text-text-muted",children:["(",N(t.player_id),")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium border ${k(t.type)}`,children:t.type}),d?e.jsxs("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 border border-red-200",children:["ðŸ”´ Aktiv - ",s," Spiel",s!==1?"e":""," verbleibend"]}):e.jsx("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:"âœ… Beendet"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-text-muted mb-1",children:[e.jsxs("span",{children:["Fortschritt: ",t.matchesserved||0," / ",t.totalgames||0," Spiele"]}),e.jsxs("span",{children:[Math.round(a),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${d?"bg-red-500":"bg-green-500"}`,style:{width:`${Math.min(a,100)}%`}})})]}),t.reason&&e.jsxs("p",{className:"text-sm text-text-muted",children:["Grund: ",t.reason]})]})]}),d&&e.jsxs("div",{className:"text-center ml-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s}),e.jsx("div",{className:"text-xs text-red-600 uppercase font-medium",children:"Verbleibend"})]})]})},t.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸš«"}),e.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:l==="all"?"Keine Sperren gefunden":`Keine ${l==="active"?"aktiven":l==="completed"?"beendeten":l} Sperren`}),e.jsx("p",{className:"text-text-muted",children:l==="all"?"Es wurden noch keine Sperren erstellt.":"Versuche einen anderen Filter oder erstelle neue Sperren."})]}),h&&e.jsx("div",{className:"mt-6 modern-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-red-700 text-sm",children:"Um neue Sperren hinzuzufÃ¼gen oder zu verwalten, nutzen Sie den Verwaltungsbereich."})]})]})})]})}export{T as default};
