import{r as y,u as C,j as e,L as A}from"./index-DehMR87y.js";import{l as M,u as D,a as k,g as T}from"./alcoholCalculatorPersistence-CHcP9tBr.js";function R({onNavigate:B}){var j,f,v,N;const[l,u]=y.useState({playerWeight:70,playerGender:"male",mode:"automatic",aekGoals:0,realGoals:0,beerCount:{aek:0,real:0},alexanderShots:{cl40:0,cl20:0},philipShots:{cl40:0,cl20:0}}),{data:o,loading:S}=C("matches","*",{order:{column:"date",ascending:!1}});y.useEffect(()=>{const s=M();u(t=>({...t,...s})),o&&D(o)},[o]);const n=(s,t)=>{const a={...l,[s]:t};u(a),k({[s]:t},l)},d=(s,t)=>{const a={...l};a[`${s}Shots`][t]+=1,u(a),k({[`${s}Shots`]:a[`${s}Shots`]},l)},b=s=>{const t=s.cl40*2*.4,a=s.cl20*2*.2;return t+a},i=()=>{const s=new Date,t=new Date;t.setDate(s.getDate()-2);const a=new Date(s.getFullYear(),s.getMonth(),s.getDate());return t.setHours(0,0,0,0),(o==null?void 0:o.filter(r=>{const c=new Date(r.date),m=new Date(c.getFullYear(),c.getMonth(),c.getDate());return m>=t&&m<=a}))||[]},g=()=>{if(l.mode==="automatic"){const t=i().reduce((a,r)=>a+(r.goalsb||0),0);return Math.floor(t/2)*2}return 0},p=()=>{if(l.mode==="automatic"){const t=i().reduce((a,r)=>a+(r.goalsa||0),0);return Math.floor(t/2)*2}return 0},h=()=>l.mode==="automatic"?g()+p():Math.floor((l.aekGoals+l.realGoals)/2)*2,w=(s,t,a=null,r=0)=>{if(!t.weight||s===0&&r===0)return"0.00";let c=s*10*.4*.789;c+=r*.5*1e3*.05*.789;const m=t.gender==="female"?.6:.7;let x=c/(m*t.weight);if(a){const G=T(a)*.15;x=Math.max(0,x-G)}return x.toFixed(2)};return S?e.jsx(A,{message:"Lade Alkohol-Tracker..."}):e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"üç∫ Alkohol-Tracker"}),e.jsx("p",{className:"text-text-muted",children:"Verfolgen Sie den Alkoholkonsum basierend auf den Spielregeln: F√ºr jedes zweite Tor muss der Gegner 2cl Schnaps (40%) trinken."})]}),e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üì± Modus"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"automatic",checked:l.mode==="automatic",onChange:s=>n("mode",s.target.value),className:"w-4 h-4 text-primary-green"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:"ü§ñ Automatisch"}),e.jsx("div",{className:"text-sm text-text-muted",children:"Berechnung basierend auf Spielen der letzten 2 Tage"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"manual",checked:l.mode==="manual",onChange:s=>n("mode",s.target.value),className:"w-4 h-4 text-primary-green"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:"‚úã Manuell"}),e.jsx("div",{className:"text-sm text-text-muted",children:"Manuelle Eingabe der Tor-Anzahl"})]})]})]})]}),l.mode==="manual"&&e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"‚öΩ Tore eingeben"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"üîµ AEK Tore"}),e.jsx("input",{type:"number",min:"0",value:l.aekGoals,onChange:s=>n("aekGoals",parseInt(s.target.value)||0),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"üî¥ Real Tore"}),e.jsx("input",{type:"number",min:"0",value:l.realGoals,onChange:s=>n("realGoals",parseInt(s.target.value)||0),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue"})]})]})]}),e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ü•É Alkohol-Berechnung"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border-l-4 border-blue-400 pl-4",children:[e.jsx("h4",{className:"font-semibold text-blue-600 mb-2",children:"üîµ AEK muss trinken"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[g(),"cl"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:["Durch Real-Tore verursacht (",l.mode==="automatic"?i().reduce((s,t)=>s+(t.goalsb||0),0):l.realGoals," Tore)"]})]}),e.jsxs("div",{className:"border-l-4 border-red-400 pl-4",children:[e.jsx("h4",{className:"font-semibold text-red-600 mb-2",children:"üî¥ Real muss trinken"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600 mb-1",children:[p(),"cl"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:["Durch AEK-Tore verursacht (",l.mode==="automatic"?i().reduce((s,t)=>s+(t.goalsa||0),0):l.aekGoals," Tore)"]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-text-primary",children:["Gesamt: ",h(),"cl Schnaps"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:["Das entspricht ",Math.floor(h()/2)," Shots √† 2cl"]})]})})]}),e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üë®‚Äçüçª Individuelle Schnaps-Tracker"}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-700 mb-3",children:"üîµ Alexander"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsx("button",{onClick:()=>d("alexander","cl40"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors font-medium",children:"+ 2cl (40%)"}),e.jsx("button",{onClick:()=>d("alexander","cl20"),className:"bg-blue-400 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors font-medium",children:"+ 2cl (20%)"})]}),e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsxs("div",{children:["40% Shots: ",l.alexanderShots.cl40," √ó 2cl"]}),e.jsxs("div",{children:["20% Shots: ",l.alexanderShots.cl20," √ó 2cl"]}),e.jsxs("div",{className:"font-semibold mt-1",children:["Gesamt: ",b(l.alexanderShots).toFixed(1),"cl reiner Alkohol"]})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-3",children:"üü¢ Philip"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsx("button",{onClick:()=>d("philip","cl40"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors font-medium",children:"+ 2cl (40%)"}),e.jsx("button",{onClick:()=>d("philip","cl20"),className:"bg-green-400 hover:bg-green-500 text-white px-4 py-2 rounded-lg transition-colors font-medium",children:"+ 2cl (20%)"})]}),e.jsxs("div",{className:"text-sm text-green-700",children:[e.jsxs("div",{children:["40% Shots: ",l.philipShots.cl40," √ó 2cl"]}),e.jsxs("div",{children:["20% Shots: ",l.philipShots.cl20," √ó 2cl"]}),e.jsxs("div",{className:"font-semibold mt-1",children:["Gesamt: ",b(l.philipShots).toFixed(1),"cl reiner Alkohol"]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ü©∏ Blutalkohol-Rechner (BAK)"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"K√∂rpergewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:l.playerWeight,onChange:s=>n("playerWeight",parseInt(s.target.value)||70),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Geschlecht"}),e.jsxs("select",{value:l.playerGender,onChange:s=>n("playerGender",s.target.value),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue",children:[e.jsx("option",{value:"male",children:"M√§nnlich"}),e.jsx("option",{value:"female",children:"Weiblich"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Zus√§tzliche Biere (0,5L)"}),e.jsx("input",{type:"number",min:"0",value:(((j=l.beerCount)==null?void 0:j.aek)||0)+(((f=l.beerCount)==null?void 0:f.real)||0),onChange:s=>{const t=parseInt(s.target.value)||0,a=Math.floor(t/2),r=t%2;n("beerCount",{aek:a+r,real:a})},className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-red-50 to-yellow-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-red-600 mb-2",children:[w(h(),{weight:l.playerWeight,gender:l.playerGender},null,(((v=l.beerCount)==null?void 0:v.aek)||0)+(((N=l.beerCount)==null?void 0:N.real)||0)),"‚Ä∞"]}),e.jsx("div",{className:"text-sm text-red-700 font-medium",children:"Gesch√§tzte Blutalkoholkonzentration"})]})})]})]})}export{R as default};
