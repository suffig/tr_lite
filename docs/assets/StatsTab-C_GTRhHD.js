import{r as H,u as V,j as e,L as se}from"./index-Ck2EU69Q.js";import{l as ve,u as de,g as ye,s as Se,a as ke}from"./alcoholCalculatorPersistence-DVoT4Hbe.js";function we(){const[t,n]=H.useState("performance"),[a,r]=H.useState("all"),{data:s,loading:c}=V("matches","*"),{data:i,loading:w}=V("players","*"),A=c||w,G=H.useMemo(()=>{if(!s||!i)return null;const B=new Date,K=s.filter(E=>{if(a==="all")return!0;const _=new Date(E.date),j=Math.floor((B-_)/(1e3*60*60*24));switch(a){case"30d":return j<=30;case"90d":return j<=90;case"1y":return j<=365;default:return!0}});return{performance:Re(K),trends:Ge(K),efficiency:Ke(K),predictions:Le(K),playerComparison:Fe(K,i)}},[s,i,a]);return A?e.jsx(se,{message:"Lade erweiterte Analysen..."}):G?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"ðŸ”¬ Erweiterte Analysen"}),e.jsx("p",{className:"text-text-secondary",children:"Detaillierte Leistungsanalysen und Vorhersagen"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:a,onChange:B=>r(B.target.value),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-primary text-text-primary",children:[e.jsx("option",{value:"all",children:"Alle Zeiten"}),e.jsx("option",{value:"30d",children:"Letzte 30 Tage"}),e.jsx("option",{value:"90d",children:"Letzte 90 Tage"}),e.jsx("option",{value:"1y",children:"Letztes Jahr"})]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"performance",label:"ðŸ“ˆ Leistung",icon:"ðŸ“ˆ"},{id:"trends",label:"ðŸ“Š Trends",icon:"ðŸ“Š"},{id:"efficiency",label:"âš¡ Effizienz",icon:"âš¡"},{id:"predictions",label:"ðŸ”® Vorhersagen",icon:"ðŸ”®"},{id:"comparison",label:"âš–ï¸ Vergleich",icon:"âš–ï¸"}].map(B=>e.jsxs("button",{onClick:()=>n(B.id),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${t===B.id?"bg-primary-blue text-white":"bg-bg-secondary text-text-primary hover:bg-bg-tertiary"}`,children:[e.jsx("span",{children:B.icon}),e.jsx("span",{className:"hidden sm:inline",children:B.label})]},B.id))}),e.jsxs("div",{className:"grid gap-6",children:[t==="performance"&&e.jsx(Ae,{data:G.performance}),t==="trends"&&e.jsx(Te,{data:G.trends}),t==="efficiency"&&e.jsx(Me,{data:G.efficiency}),t==="predictions"&&e.jsx(De,{data:G.predictions}),t==="comparison"&&e.jsx(Ee,{data:G.playerComparison})]})]}):e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nicht genÃ¼gend Daten fÃ¼r erweiterte Analysen verfÃ¼gbar."})}function Ae({data:t}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŽ¯"})," Trefferquote"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"AEK Athen:"}),e.jsxs("span",{className:"font-semibold text-primary-blue",children:[t.shotAccuracy.aek,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Madrid:"}),e.jsxs("span",{className:"font-semibold text-accent-red",children:[t.shotAccuracy.real,"%"]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸƒâ€â™‚ï¸"})," Form-Index"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"AEK Form:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${ae(t.formIndex.aek)}`}),e.jsx("span",{className:"font-semibold",children:t.formIndex.aek.toFixed(1)})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Real Form:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${ae(t.formIndex.real)}`}),e.jsx("span",{className:"font-semibold",children:t.formIndex.real.toFixed(1)})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ’ª"})," Leistungs-Rating"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Offensiv:"}),e.jsxs("span",{className:"font-semibold text-primary-green",children:[t.offensiveRating,"/10"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Defensiv:"}),e.jsxs("span",{className:"font-semibold text-primary-blue",children:[t.defensiveRating,"/10"]})]})]})]})]})}function Te({data:t}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“ˆ"})," Leistungstrends (letzte 10 Spiele)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-primary-blue",children:"ðŸ”µ AEK Athen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore/Spiel Trend:"}),e.jsxs("span",{className:`font-semibold ${t.goalTrend.aek>=0?"text-green-600":"text-red-600"}`,children:[t.goalTrend.aek>=0?"â†—ï¸":"â†˜ï¸"," ",Math.abs(t.goalTrend.aek).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siegesserie:"}),e.jsxs("span",{className:"font-semibold",children:[t.winStreak.aek," Spiele"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Formkurve:"}),e.jsx("span",{className:"font-mono text-sm",children:t.formPattern.aek})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-accent-red",children:"ðŸ”´ Real Madrid"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore/Spiel Trend:"}),e.jsxs("span",{className:`font-semibold ${t.goalTrend.real>=0?"text-green-600":"text-red-600"}`,children:[t.goalTrend.real>=0?"â†—ï¸":"â†˜ï¸"," ",Math.abs(t.goalTrend.real).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siegesserie:"}),e.jsxs("span",{className:"font-semibold",children:[t.winStreak.real," Spiele"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Formkurve:"}),e.jsx("span",{className:"font-mono text-sm",children:t.formPattern.real})]})]})]})]})]})})}function Me({data:t}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"âš¡"})," Offensive Effizienz"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"AEK Effizienz"}),e.jsxs("span",{className:"text-sm font-semibold",children:[t.offensiveEfficiency.aek,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-blue h-2 rounded-full transition-all duration-300",style:{width:`${t.offensiveEfficiency.aek}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"Real Effizienz"}),e.jsxs("span",{className:"text-sm font-semibold",children:[t.offensiveEfficiency.real,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-accent-red h-2 rounded-full transition-all duration-300",style:{width:`${t.offensiveEfficiency.real}%`}})})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ›¡ï¸"})," Defensive StabilitÃ¤t"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gegentore/Spiel:"}),e.jsx("span",{className:"font-semibold",children:t.defensiveStability.goalsAgainstAvg})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsxs("span",{className:"font-semibold",children:[t.defensiveStability.cleanSheets,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"StabilitÃ¤t-Index:"}),e.jsxs("span",{className:"font-semibold text-primary-green",children:[t.defensiveStability.stabilityIndex,"/10"]})]})]})]})]})}function De({data:t}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”®"})," NÃ¤chstes Spiel Vorhersage"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-4 bg-primary-blue/10 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-blue",children:[t.nextMatch.aekWinChance,"%"]}),e.jsx("div",{className:"text-sm text-primary-blue",children:"AEK Sieg"})]}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[t.nextMatch.drawChance,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Unentschieden"})]}),e.jsxs("div",{className:"p-4 bg-accent-red/10 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-accent-red",children:[t.nextMatch.realWinChance,"%"]}),e.jsx("div",{className:"text-sm text-accent-red",children:"Real Sieg"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"text-sm text-text-secondary",children:[e.jsx("strong",{children:"Vorhergesagtes Ergebnis:"})," ",t.nextMatch.predictedScore]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[e.jsx("strong",{children:"Konfidenz:"})," ",t.nextMatch.confidence,"%"]})]})]})})}function Ee({data:t}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"âš–ï¸"})," Spieler-Vergleich (Top 5)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-light",children:[e.jsx("th",{className:"text-left py-2",children:"Spieler"}),e.jsx("th",{className:"text-center py-2",children:"Tore"}),e.jsx("th",{className:"text-center py-2",children:"âŒ€/Spiel"}),e.jsx("th",{className:"text-center py-2",children:"Effizienz"}),e.jsx("th",{className:"text-center py-2",children:"Form"})]})}),e.jsx("tbody",{children:t.topPlayers.map((n,a)=>e.jsxs("tr",{className:"border-b border-border-light/50",children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-bg-secondary rounded-full flex items-center justify-center text-xs font-bold",children:a+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:n.team})]})]})}),e.jsx("td",{className:"text-center py-2 font-semibold",children:n.goals}),e.jsx("td",{className:"text-center py-2",children:n.avgPerGame}),e.jsx("td",{className:"text-center py-2",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs ${Ce(n.efficiency)}`,children:[n.efficiency,"%"]})}),e.jsx("td",{className:"text-center py-2",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`w-3 h-3 rounded-full ${ae(n.form)}`})})})]},n.id))})]})})]})})}function ae(t){return t>=8?"bg-green-500":t>=6?"bg-yellow-500":t>=4?"bg-orange-500":"bg-red-500"}function Ce(t){return t>=80?"bg-green-100 text-green-800":t>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}function Re(t){const n=t.reduce((s,c)=>s+(c.goalsa||0),0),a=t.reduce((s,c)=>s+(c.goalsb||0),0),r=t.length;return{shotAccuracy:{aek:r>0?Math.round(n/r*10):0,real:r>0?Math.round(a/r*10):0},formIndex:{aek:ce(t,"AEK"),real:ce(t,"Real")},offensiveRating:Math.min(10,Math.round((n+a)/r*2)),defensiveRating:Math.min(10,Math.round(10-(n+a)/r))}}function Ge(t){const n=t.slice(-10);return{goalTrend:{aek:oe(n,"AEK"),real:oe(n,"Real")},winStreak:{aek:xe(t,"AEK"),real:xe(t,"Real")},formPattern:{aek:me(n,"AEK"),real:me(n,"Real")}}}function Ke(t){const n=t.length,a=t.reduce((r,s)=>r+(s.goalsa||0)+(s.goalsb||0),0);return{offensiveEfficiency:{aek:Math.round(t.reduce((r,s)=>r+(s.goalsa||0),0)/a*100),real:Math.round(t.reduce((r,s)=>r+(s.goalsb||0),0)/a*100)},defensiveStability:{goalsAgainstAvg:(a/n).toFixed(2),cleanSheets:Math.round(t.filter(r=>r.goalsa===0||r.goalsb===0).length/n*100),stabilityIndex:Math.min(10,Math.round(10-a/n))}}}function Le(t){const n=t.filter(c=>(c.goalsa||0)>(c.goalsb||0)).length,a=t.filter(c=>(c.goalsb||0)>(c.goalsa||0)).length,r=t.filter(c=>(c.goalsa||0)===(c.goalsb||0)).length,s=t.length;return{nextMatch:{aekWinChance:Math.round(n/s*100),realWinChance:Math.round(a/s*100),drawChance:Math.round(r/s*100),predictedScore:`${Math.round(t.reduce((c,i)=>c+(i.goalsa||0),0)/s)}-${Math.round(t.reduce((c,i)=>c+(i.goalsb||0),0)/s)}`,confidence:Math.min(95,60+Math.round(s/5))}}}function Fe(t,n){return{topPlayers:n.map(a=>({...a,avgPerGame:t.length>0?((a.goals||0)/t.length).toFixed(2):"0.00",efficiency:Math.min(100,Math.round((a.goals||0)/Math.max(1,t.length)*30)),form:Math.min(10,5+Math.random()*3)})).sort((a,r)=>(r.goals||0)-(a.goals||0)).slice(0,5)}}function ce(t,n){const a=t.slice(-5);let r=0;return a.forEach(s=>{const c=n==="AEK",i=c?s.goalsa||0:s.goalsb||0,w=c?s.goalsb||0:s.goalsa||0;i>w?r+=3:i===w&&(r+=1)}),Math.min(10,r/15*10)}function oe(t,n){if(t.length<5)return 0;const a=t.slice(0,Math.floor(t.length/2)),r=t.slice(Math.floor(t.length/2)),s=a.reduce((i,w)=>i+(n==="AEK"?w.goalsa||0:w.goalsb||0),0)/a.length;return r.reduce((i,w)=>i+(n==="AEK"?w.goalsa||0:w.goalsb||0),0)/r.length-s}function xe(t,n){let a=0;for(let r=t.length-1;r>=0;r--){const s=t[r],c=n==="AEK",i=c?s.goalsa||0:s.goalsb||0,w=c?s.goalsb||0:s.goalsa||0;if(i>w)a++;else break}return a}function me(t,n){return t.slice(-5).map(a=>{const r=n==="AEK",s=r?a.goalsa||0:a.goalsb||0,c=r?a.goalsb||0:a.goalsa||0;return s>c?"W":s<c?"L":"D"}).join("")}function ze({limit:t=10,showTitle:n=!0,onNavigate:a}){const[r,s]=H.useState("all"),{data:c,loading:i}=V("matches","*",{order:{column:"date",ascending:!1}}),{data:w,loading:A}=V("players","*"),{data:G,loading:B}=V("bans","*",{order:{column:"id",ascending:!1}}),{data:K,loading:E}=V("transactions","*",{order:{column:"date",ascending:!1}}),_=i||A||B||E,j=H.useMemo(()=>{if(!c||!w||!G||!K)return[];const N=[];c==null||c.slice(0,5).forEach(u=>{const y=new Date(u.date);N.push({id:`match-${u.id}`,type:"match",icon:"âš½",title:`AEK ${u.goalsa||0} - ${u.goalsb||0} Real`,description:u.sds?`â­ SdS: ${u.sds}`:"Spiel gespielt",date:y,dateText:he(y),action:()=>a==null?void 0:a("matches",{highlightMatch:u.id})})}),G==null||G.slice(0,3).forEach(u=>{const y=w.find(W=>W.id===u.player_id),$=(y==null?void 0:y.name)||u.player_name||"Unbekannt",v=(u.totalgames||0)-(u.matchesserved||0);N.push({id:`ban-${u.id}`,type:"ban",icon:"ðŸš«",title:`Sperre: ${$}`,description:`${u.type} â€¢ ${v>0?`${v} Spiele verbleibend`:"Abgelaufen"}`,date:new Date,dateText:"KÃ¼rzlich",action:()=>a==null?void 0:a("bans",{highlightBan:u.id})})}),K==null||K.slice(0,5).forEach(u=>{const y=new Date(u.date),$=u.amount||0;N.push({id:`transaction-${u.id}`,type:"transaction",icon:$>0?"ðŸ’°":"ðŸ’¸",title:`${$>0?"+":""}${$}â‚¬`,description:u.description||u.type||"Transaktion",date:y,dateText:he(y),action:()=>a==null?void 0:a("finanzen",{highlightTransaction:u.id})})});const D=N.sort((u,y)=>y.date-u.date);return(r==="all"?D:D.filter(u=>u.type===r)).slice(0,t)},[c,w,G,K,r,t,a]),L=H.useMemo(()=>{if(!c||!G||!K)return{};const N=new Date,D=new Date(N.getTime()-7*24*60*60*1e3);return{matches:c.filter(z=>new Date(z.date)>=D).length,bans:G.filter(z=>(z.totalgames||0)-(z.matchesserved||0)>0).length,transactions:K.filter(z=>new Date(z.date)>=D).length}},[c,G,K]);return _?e.jsx(se,{message:"Lade AktivitÃ¤ten..."}):e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[n&&e.jsxs("div",{className:"p-4 border-b border-border-light",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Letzte AktivitÃ¤ten"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded border border-blue-200",children:[L.matches||0," Spiele (7T)"]}),e.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded border border-red-200",children:[L.bans||0," aktive Sperren"]}),e.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded border border-green-200",children:[L.transactions||0," Transaktionen (7T)"]})]})})]}),e.jsx("div",{className:"flex gap-2 mt-3",children:[{key:"all",label:"Alle",count:j.length},{key:"match",label:"Spiele",count:j.filter(N=>N.type==="match").length},{key:"transaction",label:"Finanzen",count:j.filter(N=>N.type==="transaction").length},{key:"ban",label:"Sperren",count:j.filter(N=>N.type==="ban").length}].map(({key:N,label:D,count:z})=>e.jsxs("button",{onClick:()=>s(N),className:`px-3 py-1.5 rounded-lg text-sm transition-all duration-200 ${r===N?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:[D," ",z>0&&`(${z})`]},N))})]}),e.jsx("div",{className:"divide-y divide-border-light",children:j.length===0?e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"ðŸ“Š"}),e.jsx("p",{children:"Keine AktivitÃ¤ten gefunden"}),e.jsx("p",{className:"text-sm mt-1",children:r==="all"?"Beginne Daten hinzuzufÃ¼gen":`Keine ${r==="match"?"Spiele":r==="transaction"?"Transaktionen":"Sperren"} gefunden`})]}):j.map(N=>e.jsx("button",{onClick:N.action,className:"w-full p-4 text-left hover:bg-bg-secondary transition-colors duration-200 focus:outline-none focus:bg-bg-secondary",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:N.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-text-primary truncate",children:N.title}),e.jsx("span",{className:"text-xs text-text-secondary whitespace-nowrap ml-2",children:N.dateText})]}),e.jsx("p",{className:"text-sm text-text-secondary truncate",children:N.description})]})]})},N.id))}),j.length>0&&n&&e.jsx("div",{className:"p-3 border-t border-border-light bg-bg-secondary",children:e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>a==null?void 0:a("stats"),className:"text-sm text-primary-green hover:text-primary-green-dark transition-colors duration-200",children:"Alle Statistiken anzeigen â†’"})})})]})}function he(t){const a=Math.floor((new Date-t)/(1e3*60)),r=Math.floor(a/60),s=Math.floor(r/24);return a<1?"Gerade eben":a<60?`vor ${a}m`:r<24?`vor ${r}h`:s<7?`vor ${s}d`:s<30?`vor ${Math.floor(s/7)}w`:t.toLocaleDateString("de-DE",{day:"numeric",month:"short"})}function $e({onNavigate:t}){const[n,a]=H.useState("all"),{data:r,loading:s}=V("matches","*",{order:{column:"date",ascending:!1}}),{data:c,loading:i}=V("players","*"),{data:w,loading:A}=V("bans","*"),{data:G,loading:B}=V("transactions","*",{order:{column:"date",ascending:!1}}),{data:K,loading:E}=V("finances","*"),_=s||i||A||B||E,j=H.useMemo(()=>{if(!r||!c||!w||!G||!K)return null;const L=new Date,N={week:new Date(L.getTime()-7*24*60*60*1e3),month:new Date(L.getTime()-30*24*60*60*1e3),all:new Date(0)},D=N[n]||N.all,z=r.filter(b=>new Date(b.date)>=D),u=G.filter(b=>new Date(b.date)>=D),y={AEK:{wins:0,losses:0,goals:0,goalsAgainst:0},Real:{wins:0,losses:0,goals:0,goalsAgainst:0}};z.forEach(b=>{const k=b.goalsa||0,Z=b.goalsb||0;y.AEK.goals+=k,y.AEK.goalsAgainst+=Z,y.Real.goals+=Z,y.Real.goalsAgainst+=k,k>Z?(y.AEK.wins++,y.Real.losses++):Z>k&&(y.Real.wins++,y.AEK.losses++)});const $={};c.forEach(b=>{$[b.id]={name:b.name,team:b.team,goals:0,matches:0,value:b.value||0}}),z.forEach(b=>{["goalscorer1a","goalscorer2a","goalscorer3a","goalscorer4a","goalscorer5a"].forEach(k=>{b[k]&&$[b[k]]&&($[b[k]].goals++,$[b[k]].matches++)}),["goalscorer1b","goalscorer2b","goalscorer3b","goalscorer4b","goalscorer5b"].forEach(k=>{b[k]&&$[b[k]]&&($[b[k]].goals++,$[b[k]].matches++)})});const v=K.find(b=>b.team==="AEK")||{balance:0},W=K.find(b=>b.team==="Real")||{balance:0},J=u.filter(b=>b.amount>0).reduce((b,k)=>b+k.amount,0),q=u.filter(b=>b.amount<0).reduce((b,k)=>b+Math.abs(k.amount),0),I=w.filter(b=>(b.totalgames||0)-(b.matchesserved||0)>0),O={AEK:I.filter(b=>{const k=c.find(Z=>Z.id===b.player_id);return(k==null?void 0:k.team)==="AEK"}).length,Real:I.filter(b=>{const k=c.find(Z=>Z.id===b.player_id);return(k==null?void 0:k.team)==="Real"}).length},Y=Object.values($).filter(b=>b.goals>0).sort((b,k)=>k.goals-b.goals).slice(0,5);return{teamRecords:y,playerStats:Y,finances:{aek:v.balance||0,real:W.balance||0,income:J,expenses:q,net:J-q},bans:{active:I.length,aek:O.AEK,real:O.Real},totals:{matches:z.length,players:c.length,transactions:u.length}}},[r,c,w,G,K,n]);return _?e.jsx(se,{message:"Lade Dashboard..."}):j?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Dashboard"}),e.jsx("div",{className:"flex gap-2",children:[{key:"week",label:"Woche"},{key:"month",label:"Monat"},{key:"all",label:"Gesamt"}].map(({key:L,label:N})=>e.jsx("button",{onClick:()=>a(L),className:`px-3 py-2 rounded-lg text-sm transition-all duration-200 ${n===L?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:N},L))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(ee,{icon:"âš½",title:"Spiele",value:j.totals.matches,subtitle:n==="all"?"Gesamt":"Im Zeitraum",color:"blue",onClick:()=>t==null?void 0:t("matches")}),e.jsx(ee,{icon:"ðŸ‘¥",title:"Spieler",value:j.totals.players,subtitle:"Aktive Spieler",color:"green",onClick:()=>t==null?void 0:t("squad")}),e.jsx(ee,{icon:"âš½",title:"Tore",value:j.teamRecords.AEK.goals+j.teamRecords.Real.goals,subtitle:n==="all"?"Gesamt":"Im Zeitraum",color:"green",onClick:()=>t==null?void 0:t("matches")}),e.jsx(ee,{icon:"ðŸš«",title:"Sperren",value:j.bans.active,subtitle:"Aktive Sperren",color:"red",onClick:()=>t==null?void 0:t("bans")})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Team-Vergleich"})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"ðŸ”µ"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-blue-900",children:"AEK"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[j.teamRecords.AEK.wins,"S / ",j.teamRecords.AEK.losses,"N"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-blue-900",children:[j.teamRecords.AEK.goals,":",j.teamRecords.AEK.goalsAgainst]}),e.jsxs("div",{className:"text-sm text-blue-700",children:[j.bans.aek," Sperren"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"ðŸ”´"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-red-900",children:"Real"}),e.jsxs("div",{className:"text-sm text-red-700",children:[j.teamRecords.Real.wins,"S / ",j.teamRecords.Real.losses,"N"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-red-900",children:[j.teamRecords.Real.goals,":",j.teamRecords.Real.goalsAgainst]}),e.jsxs("div",{className:"text-sm text-red-700",children:[j.bans.real," Sperren"]})]})]})]})})]}),e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Top TorschÃ¼tzen"})}),e.jsx("div",{className:"p-4",children:j.playerStats.length===0?e.jsxs("div",{className:"text-center text-text-secondary py-4",children:[e.jsx("div",{className:"text-2xl mb-2","aria-hidden":"true",children:"âš½"}),e.jsx("p",{children:"Keine Tore im Zeitraum"})]}):e.jsx("div",{className:"space-y-3",children:j.playerStats.map((L,N)=>{var D;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-primary-green text-white text-xs flex items-center justify-center font-bold",children:N+1}),e.jsx("span",{className:L.team==="AEK"?"text-blue-600":"text-red-600",children:L.team==="AEK"?"ðŸ”µ":"ðŸ”´"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:L.name}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[(D=L.value)==null?void 0:D.toFixed(1),"M â‚¬"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-text-primary",children:[L.goals," Tore"]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[L.matches," Spiele"]})]})]},L.name)})})})]})]}),e.jsx(ze,{onNavigate:t,limit:5})]}):e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"ðŸ“Š"}),e.jsx("p",{children:"Keine Daten verfÃ¼gbar"})]})}function ee({icon:t,title:n,value:a,subtitle:r,color:s="gray",onClick:c}){const i={blue:"bg-blue-50 border-blue-200 text-blue-900",green:"bg-green-50 border-green-200 text-green-900",red:"bg-red-50 border-red-200 text-red-900",gray:"bg-gray-50 border-gray-200 text-gray-900"};return e.jsx("button",{onClick:c,className:`p-4 rounded-lg border transition-all duration-200 hover:shadow-md ${i[s]} ${c?"hover:scale-105 cursor-pointer":"cursor-default"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:t}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-2xl font-bold",children:a}),e.jsx("div",{className:"text-sm opacity-75",children:n}),e.jsx("div",{className:"text-xs opacity-60",children:r})]})]})})}class We{constructor(n,a,r,s){this.matches=n||[],this.players=a||[],this.bans=r||[],this.spielerDesSpiels=s||[],this.aekPlayers=(a||[]).filter(c=>c.team==="AEK"),this.realPlayers=(a||[]).filter(c=>c.team==="Real")}calculateTeamRecords(){const n={wins:0,losses:0},a={wins:0,losses:0};return this.matches.forEach(r=>{const s=r.goalsa||0,c=r.goalsb||0;s>c?(n.wins++,a.losses++):c>s&&(a.wins++,n.losses++)}),{aek:n,real:a}}calculateRecentForm(n=5){const a=this.matches.slice(-n),r=[],s=[];return a.forEach(c=>{const i=c.goalsa||0,w=c.goalsb||0;i>w?(r.push("W"),s.push("L")):w>i&&(r.push("L"),s.push("W"))}),{aek:r,real:s}}calculatePlayerStats(){return this.players.map(n=>{const a=this.countPlayerMatches(),r=this.bans.filter(i=>i.player_id===n.id),s=this.spielerDesSpiels.find(i=>i.name===n.name&&i.team===n.team),c=s&&s.count||0;return{...n,goals:n.goals||0,matchesPlayed:a,sdsCount:c,goalsPerGame:a>0?((n.goals||0)/a).toFixed(2):"0.00",totalBans:r.length,disciplinaryScore:this.calculateDisciplinaryScore(r)}}).sort((n,a)=>(a.goals||0)-(n.goals||0))}countPlayerGoalsFromMatches(n,a){let r=0;return this.matches.forEach(s=>{a==="AEK"&&s.goalslista&&(Array.isArray(s.goalslista)?s.goalslista:typeof s.goalslista=="string"?JSON.parse(s.goalslista):[]).forEach(i=>{const w=typeof i=="string"?i:i.player,A=typeof i=="string"?1:i.count||1;w===n&&(r+=A)}),a==="Real"&&s.goalslistb&&(Array.isArray(s.goalslistb)?s.goalslistb:typeof s.goalslistb=="string"?JSON.parse(s.goalslistb):[]).forEach(i=>{const w=typeof i=="string"?i:i.player,A=typeof i=="string"?1:i.count||1;w===n&&(r+=A)})}),r}countPlayerMatches(){return this.matches.length}calculateDisciplinaryScore(n){let a=0;return n.forEach(r=>{switch(r.type){case"Gelb-Rote Karte":a+=3;break;case"Rote Karte":a+=5;break;case"Verletzung":a+=1;break;default:a+=1}}),a}calculateAdvancedStats(){const n=this.matches.length,a=this.matches.reduce((r,s)=>r+(s.goalsa||0)+(s.goalsb||0),0);return{avgGoalsPerMatch:n>0?(a/n).toFixed(2):"0.00",totalMatches:n,totalGoals:a,aekTotalGoals:this.matches.reduce((r,s)=>r+(s.goalsa||0),0),realTotalGoals:this.matches.reduce((r,s)=>r+(s.goalsb||0),0),highestScoringMatch:n>0?Math.max(...this.matches.map(r=>(r.goalsa||0)+(r.goalsb||0))):0,cleanSheets:{aek:this.matches.filter(r=>r.goalsb===0).length,real:this.matches.filter(r=>r.goalsa===0).length}}}calculatePerformanceTrends(){const n={};return this.matches.forEach(a=>{const r=new Date(a.date),s=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;n[s]||(n[s]={month:s,aekWins:0,realWins:0,totalGoals:0,matchCount:0});const c=a.goalsa||0,i=a.goalsb||0;n[s].totalGoals+=c+i,n[s].matchCount++,c>i?n[s].aekWins++:i>c&&n[s].realWins++}),n}calculateHeadToHead(){const n={totalMatches:this.matches.length,aekWins:0,realWins:0,aekGoals:0,realGoals:0,biggestAekWin:{diff:0,score:"",date:"",opponent:"Real Madrid"},biggestRealWin:{diff:0,score:"",date:"",opponent:"AEK Athen"}};return this.matches.forEach(a=>{const r=a.goalsa||0,s=a.goalsb||0,c=Math.abs(r-s);n.aekGoals+=r,n.realGoals+=s,r>s?(n.aekWins++,c>n.biggestAekWin.diff&&(n.biggestAekWin={diff:c,score:`${r}:${s}`,date:a.date||"",opponent:"Real Madrid"})):s>r&&(n.realWins++,c>n.biggestRealWin.diff&&(n.biggestRealWin={diff:c,score:`${s}:${r}`,date:a.date||"",opponent:"AEK Athen"}))}),n}}const M={clToLiters:t=>(t/100).toFixed(3),clToShots:t=>(t/2).toFixed(0),clToGlasses:t=>(t/20).toFixed(1),formatAlcoholDisplay:t=>({cl:t,liters:(t/100).toFixed(3),shots:Math.floor(t/2),glasses:(t/20).toFixed(1)})};function Ve({onNavigate:t}){const[n,a]=H.useState("dashboard"),r=()=>{var m,o,R,x;try{const h=localStorage.getItem("teamManagers");if(h){const p=JSON.parse(h);return{aekChef:{name:((m=p.aek)==null?void 0:m.name)||"Alexander",weight:((o=p.aek)==null?void 0:o.weight)||100,gender:"male"},realChef:{name:((R=p.real)==null?void 0:R.name)||"Philip",weight:((x=p.real)==null?void 0:x.weight)||105,gender:"male"}}}}catch(h){console.error("Error loading manager settings:",h)}return{aekChef:{name:"Alexander",weight:100,gender:"male"},realChef:{name:"Philip",weight:105,gender:"male"}}},[s,c]=H.useState(()=>({...ve(),playerData:r()})),{data:i,loading:w}=V("matches","*"),{data:A,loading:G}=V("players","*"),{data:B,loading:K}=V("spieler_des_spiels","*"),{data:E,loading:_}=V("bans","*");H.useEffect(()=>{const m=()=>{c(o=>({...o,playerData:r()}))};return window.addEventListener("storage",m),window.addEventListener("managerSettingsChanged",m),()=>{window.removeEventListener("storage",m),window.removeEventListener("managerSettingsChanged",m)}},[]);const j=m=>{c(o=>ke(m,o))};H.useEffect(()=>{if(i&&i.length>0){const m=i.reduce((o,R)=>!o||R.id>o.id?R:o,null);if(m&&(!s.cumulativeShots.lastMatchId||s.cumulativeShots.lastMatchId<m.id||s.cumulativeShots.total===0)){const o=de(i,s);c(o)}}},[i,s]);const L=w||G||K||_,N=new We(i,A,E,B),D=N.calculateTeamRecords(),z=N.calculateRecentForm(5),u=N.calculatePlayerStats(),y=N.calculateAdvancedStats(),$=N.calculatePerformanceTrends(),v=N.calculateHeadToHead(),W=(i==null?void 0:i.length)||0,J=(A==null?void 0:A.filter(m=>m.team==="AEK"))||[],q=(A==null?void 0:A.filter(m=>m.team==="Real"))||[],I=D.aek.wins,O=D.real.wins,Y=m=>m.map((o,R)=>e.jsx("span",{className:`inline-block w-6 h-6 text-xs font-bold rounded-full text-center leading-6 mx-0.5 ${o==="W"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:o},R)),b=m=>`${(m||0).toFixed(1)}M â‚¬`,k=[{id:"dashboard",label:"Dashboard",icon:"ðŸŽ¯"},{id:"overview",label:"Ãœbersicht",icon:"ðŸ“Š"},{id:"players",label:"Spieler",icon:"ðŸ‘¥"},{id:"teams",label:"Teams",icon:"ðŸ†"},{id:"trends",label:"Trends",icon:"ðŸ“ˆ"},{id:"alkohol",label:"Alkohol",icon:"ðŸº"},{id:"advanced",label:"Erweitert",icon:"ðŸ”¬"}];if(L)return e.jsx(se,{message:"Lade Statistiken..."});const Z=()=>{const m=u.length>0?u[0]:null,o=u.filter(x=>x.sdsCount>0).sort((x,h)=>h.sdsCount-x.sdsCount)[0],R=i==null?void 0:i.reduce((x,h)=>{const p=T=>{if(!T)return[];try{return typeof T=="string"?JSON.parse(T):T}catch{return[]}},S=p(h.goalslista),F=p(h.goalslistb);return[...S,...F].forEach(T=>{const l=typeof T=="object"?T.player:T,d=typeof T=="object"?T.count:1;d>x.count&&(x={player:l,count:d,match:h})}),x},{player:null,count:0,match:null});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:W}),e.jsx("div",{className:"text-sm text-text-muted",children:"Spiele gespielt"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:y.totalGoals}),e.jsx("div",{className:"text-sm text-text-muted",children:"Tore insgesamt"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["âŒ€ ",W>0?(y.totalGoals/W).toFixed(1):"0.0","/Spiel"]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary-green",children:m?m.name:"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["ðŸ¥‡ Topscorer (",m?m.goals:0," Tore)"]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:m&&m.matchesPlayed>0?`âŒ€ ${(m.goals/m.matchesPlayed).toFixed(2)}/Spiel`:"âŒ€ 0.00/Spiel"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary-green",children:o?o.name:"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["â­ Top SdS (",o?o.sdsCount:0,"x)"]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:o&&o.matchesPlayed>0?`${(o.sdsCount/o.matchesPlayed*100).toFixed(1)}% Quote`:"0.0% Quote"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:v.biggestAekWin.diff>0?v.biggestAekWin.score:"â€“"}),e.jsx("div",{className:"text-sm text-text-muted",children:"ðŸ”µ GrÃ¶ÃŸter AEK Sieg"}),v.biggestAekWin.diff>0&&e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["vs ",v.biggestAekWin.opponent,e.jsx("br",{}),new Date(v.biggestAekWin.date).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:v.biggestRealWin.diff>0?v.biggestRealWin.score:"â€“"}),e.jsx("div",{className:"text-sm text-text-muted",children:"ðŸ”´ GrÃ¶ÃŸter Real Sieg"}),v.biggestRealWin.diff>0&&e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["vs ",v.biggestRealWin.opponent,e.jsx("br",{}),new Date(v.biggestRealWin.date).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-accent-blue",children:(R==null?void 0:R.player)||"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["âš½ Meiste Tore (",(R==null?void 0:R.count)||0," in einem Spiel)"]}),(R==null?void 0:R.match)&&e.jsx("div",{className:"text-xs text-text-muted mt-1",children:new Date(R.match.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-accent-red",children:(()=>{const x={};E==null||E.forEach(p=>{const S=A==null?void 0:A.find(T=>T.id===p.player_id),F=(S==null?void 0:S.name)||"Unbekannt";x[F]=(x[F]||0)+1});const h=Object.entries(x).sort((p,S)=>S[1]-p[1])[0];return h?h[0]:"Keine Daten"})()}),e.jsxs("div",{className:"text-sm text-text-muted",children:["ðŸŸ¥ Meiste Sperren (",(()=>{const x={};E==null||E.forEach(p=>{const S=A==null?void 0:A.find(T=>T.id===p.player_id),F=(S==null?void 0:S.name)||"Unbekannt";x[F]=(x[F]||0)+1});const h=Object.entries(x).sort((p,S)=>S[1]-p[1])[0];return h?h[1]:0})(),"x)"]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ðŸ“Š Erweiterte Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-primary-green",children:(()=>{const x=(E==null?void 0:E.reduce((p,S)=>{const F=new Date(S.start_date),T=new Date(S.end_date),l=Math.ceil((T-F)/(1e3*60*60*24));return p+(l>0?l:0)},0))||0;return`${(E==null?void 0:E.length)>0?(x/E.length).toFixed(1):"0.0"} Tage`})()}),e.jsx("div",{className:"text-sm text-text-muted",children:"âŒ€ SperrenlÃ¤nge"})]}),e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-accent-blue",children:u.filter(x=>x.goals>0).length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Aktive TorschÃ¼tzen"})]}),e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-accent-red",children:(E==null?void 0:E.length)||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Sperren"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ðŸ’¡ Besondere Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:(()=>{let x=0,h=0,p=0;return i==null||i.forEach(S=>{const F=S.goalsa||0,T=S.goalsb||0;F>T?(h++,p=0,h>x&&(x=h)):T>F&&(p++,h=0,p>x&&(x=p))}),x})()}),e.jsx("div",{className:"text-sm text-green-700",children:"ðŸ”¥ LÃ¤ngste Siegesserie"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:(()=>{let x=0,h=0,p=0,S="";return i==null||i.forEach(F=>{const T=F.goalsa||0,l=F.goalsb||0;T>l?(h++,p=0,h>x&&(x=h,S="AEK")):l>T&&(p++,h=0,p>x&&(x=p,S="Real"))}),S||"Keine"})()})]}),e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-xl font-bold text-yellow-600",children:(()=>{let x=0;return u.forEach(h=>{if(h.matchesPlayed>0){const p=h.goals/h.matchesPlayed;p>x&&(x=p)}}),x.toFixed(2)})()}),e.jsx("div",{className:"text-sm text-yellow-700",children:"âš¡ HÃ¶chste Effizienz"}),e.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:(()=>{let x=0,h=null;return u.forEach(p=>{if(p.matchesPlayed>0){const S=p.goals/p.matchesPlayed;S>x&&(x=S,h=p.name)}}),h||"Keine Daten"})()})]}),e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:(()=>{const x=D.aek.wins,h=D.real.wins;return x+h===0?"100%":`${(Math.min(x,h)/Math.max(x,h)*100).toFixed(0)}%`})()}),e.jsx("div",{className:"text-sm text-blue-700",children:"âš–ï¸ Team-Balance"}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Ausgeglichenheit (",D.aek.wins,":",D.real.wins,")"]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card border-l-4 border-blue-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-blue-600",children:"AEK Athen"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-semibold text-green-600",children:I})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-semibold text-red-600",children:D.aek.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null:"}),e.jsx("span",{className:"font-semibold",children:y.cleanSheets.aek})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm text-text-muted mb-1",children:"Form (letzte 5):"}),e.jsx("div",{className:"flex",children:Y(z.aek)})]})]})]}),e.jsxs("div",{className:"modern-card border-l-4 border-red-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-red-600",children:"Real Madrid"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-semibold text-green-600",children:O})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-semibold text-red-600",children:D.real.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null:"}),e.jsx("span",{className:"font-semibold",children:y.cleanSheets.real})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm text-text-muted mb-1",children:"Form (letzte 5):"}),e.jsx("div",{className:"flex",children:Y(z.real)})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ðŸ† Top-TorschÃ¼tzen"}),e.jsx("div",{className:"space-y-2",children:u.slice(0,5).map((x,h)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${h===0?"bg-yellow-500 text-white":h===1?"bg-gray-400 text-white":h===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:h+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.name}),e.jsx("div",{className:"text-sm text-text-muted",children:x.team})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:[x.goals," Tore"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[x.goalsPerGame," âŒ€"]})]})]},x.id))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"â­ Top-Spieler des Spiels"}),e.jsx("div",{className:"space-y-2",children:u.filter(x=>x.sdsCount>0).sort((x,h)=>h.sdsCount-x.sdsCount).slice(0,5).map((x,h)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${h===0?"bg-yellow-500 text-white":h===1?"bg-gray-400 text-white":h===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:h+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.name}),e.jsx("div",{className:"text-sm text-text-muted",children:x.team})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:[x.sdsCount,"x SdS"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[x.matchesPlayed>0?(x.sdsCount/x.matchesPlayed*100).toFixed(1):"0.0","% Quote"]})]})]},x.id))}),u.filter(x=>x.sdsCount>0).length===0&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Spieler des Spiels Auszeichnungen vergeben"})]})]})},ge=()=>e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ðŸ“Š Spielerstatistiken"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-light",children:[e.jsx("th",{className:"text-left py-2",children:"Spieler"}),e.jsx("th",{className:"text-left py-2",children:"Team"}),e.jsx("th",{className:"text-center py-2",children:"Tore"}),e.jsx("th",{className:"text-center py-2",children:"âŒ€/Spiel"}),e.jsx("th",{className:"text-center py-2",children:"SdS"}),e.jsx("th",{className:"text-center py-2",children:"Sperren"}),e.jsx("th",{className:"text-right py-2",children:"Marktwert"})]})}),e.jsx("tbody",{children:u.map(m=>e.jsxs("tr",{className:"border-b border-border-light hover:bg-bg-secondary",children:[e.jsx("td",{className:"py-2 font-medium",children:m.name}),e.jsx("td",{className:"py-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${m.team==="AEK"?"bg-blue-100 text-blue-800":m.team==="Ehemalige"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:m.team})}),e.jsx("td",{className:"py-2 text-center font-bold",children:m.goals}),e.jsx("td",{className:"py-2 text-center",children:m.goalsPerGame}),e.jsx("td",{className:"py-2 text-center",children:m.sdsCount}),e.jsx("td",{className:"py-2 text-center",children:m.totalBans}),e.jsx("td",{className:"py-2 text-right",children:b(m.value)})]},m.id))})]})})]}),ue=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"âš–ï¸ Team-Vergleich"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-blue-600",children:"AEK Athen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:J.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:I})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-medium",children:D.aek.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsx("span",{className:"font-medium",children:y.cleanSheets.aek})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-red-600",children:"Real Madrid"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:q.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:O})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-medium",children:D.real.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsx("span",{className:"font-medium",children:y.cleanSheets.real})]})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ðŸ“ˆ Erweiterte Statistiken"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Diese Statistiken bieten tiefere Einblicke in die Team-Performance und wichtige Kennzahlen."}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:y.highestScoringMatch}),e.jsx("div",{className:"text-sm text-text-muted",children:"HÃ¶chste Toranzahl"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"in einem einzelnen Spiel"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:Math.abs(I-O)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Siegesdifferenz"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"zwischen den Teams"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-blue",children:W>0?(y.totalGoals/W).toFixed(1):"0.0"}),e.jsx("div",{className:"text-sm text-text-muted",children:"âŒ€ Tore pro Spiel"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Durchschnittswert"})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:"ðŸŽ¯ Offensive Highlights"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Torreichstes Team:"}),e.jsxs("span",{className:"font-medium",children:[y.aekTotalGoals>=y.realTotalGoals?"AEK Athen":"Real Madrid","(",Math.max(y.aekTotalGoals,y.realTotalGoals)," Tore)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"HÃ¶chste Einzelspiel-Toranzahl:"}),e.jsxs("span",{className:"font-medium",children:[y.highestScoringMatch," Tore"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktivster TorschÃ¼tze:"}),e.jsx("span",{className:"font-medium",children:u.length>0?`${u[0].name} (${u[0].goals} Tore)`:"Keine Daten"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:"âš–ï¸ Team-Balance"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Kader-Unterschied:"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(J.length-q.length)," Spieler"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Marktwert-VerhÃ¤ltnis:"}),e.jsx("span",{className:"font-medium",children:J.reduce((m,o)=>m+(o.value||0),0)>q.reduce((m,o)=>m+(o.value||0),0)?"AEK fÃ¼hrt":"Real fÃ¼hrt"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Dominanteres Team:"}),e.jsx("span",{className:"font-medium",children:I>O?"AEK Athen":O>I?"Real Madrid":"Ausgeglichen"})]})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"âš”ï¸ Head-to-Head Bilanz"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Direkter Vergleich zwischen AEK Athen und Real Madrid Ã¼ber alle Spiele."}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:v.aekWins}),e.jsx("div",{className:"text-sm text-blue-700",children:"AEK Siege"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:v.totalMatches>0?`${(v.aekWins/v.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:v.realWins}),e.jsx("div",{className:"text-sm text-red-700",children:"Real Siege"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:v.totalMatches>0?`${(v.realWins/v.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.aekGoals+v.realGoals}),e.jsx("div",{className:"text-sm text-green-700",children:"Tore gesamt"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:v.totalMatches>0?`âŒ€ ${((v.aekGoals+v.realGoals)/v.totalMatches).toFixed(1)} pro Spiel`:"âŒ€ 0 pro Spiel"})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"ðŸ”µ GrÃ¶ÃŸter AEK Sieg"}),v.biggestAekWin.diff>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:v.biggestAekWin.score}),e.jsxs("div",{className:"text-sm text-blue-700",children:["Unterschied: ",v.biggestAekWin.diff," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(v.biggestAekWin.date).toLocaleDateString("de-DE")})]}):e.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"ðŸ”´ GrÃ¶ÃŸter Real Sieg"}),v.biggestRealWin.diff>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 mb-1",children:v.biggestRealWin.score}),e.jsxs("div",{className:"text-sm text-red-700",children:["Unterschied: ",v.biggestRealWin.diff," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(v.biggestRealWin.date).toLocaleDateString("de-DE")})]}):e.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ðŸ”¬ Detailanalyse"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Erweiterte Metriken fÃ¼r eine tiefgreifende Team-Analyse."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-red-600",children:"ðŸŽ² Spielstatistiken"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Spiele gespielt:"}),e.jsx("span",{className:"font-medium",children:W})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"LÃ¤ngste Serie:"}),e.jsxs("span",{className:"font-medium",children:[I>=O?"AEK":"Real"," (",Math.max(I,O)," Siege)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Torreichstes Spiel:"}),e.jsxs("span",{className:"font-medium",children:[y.highestScoringMatch," Tore"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-purple-600",children:"ðŸ† Leistungs-Metriken"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:J.length+q.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"TorschÃ¼tzen:"}),e.jsxs("span",{className:"font-medium",children:[u.filter(m=>m.goals>0).length," Spieler"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Erfolgsquote AEK:"}),e.jsx("span",{className:"font-medium",children:W>0?`${(I/W*100).toFixed(0)}%`:"0%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Erfolgsquote Real:"}),e.jsx("span",{className:"font-medium",children:W>0?`${(O/W*100).toFixed(0)}%`:"0%"})]})]})]})]})]})]}),be=()=>e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ðŸ“ˆ Performance-Trends"}),e.jsx("div",{className:"space-y-4",children:Object.values($).reverse().map(m=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border-light last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:m.month}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-blue-600 font-medium",children:["AEK: ",m.aekWins]}),e.jsx("span",{className:"mx-2",children:"vs"}),e.jsxs("span",{className:"text-red-600 font-medium",children:["Real: ",m.realWins]})]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[m.matchCount," Spiele, ",m.totalGoals," Tore"]}),e.jsxs("div",{className:"text-sm font-medium",children:["âŒ€ ",(m.totalGoals/m.matchCount).toFixed(1)," Tore/Spiel"]})]})]},m.month))})]}),je=()=>{const o=(()=>{const l={totalShots:0,aekShots:0,realShots:0,playerShots:{}};if(s.cumulativeShots&&s.cumulativeShots.total>0)l.totalShots=s.cumulativeShots.total,l.aekShots=s.cumulativeShots.aek,l.realShots=s.cumulativeShots.real;else{const d=(i==null?void 0:i.slice().sort((f,C)=>{const P=new Date(f.date||0),U=new Date(C.date||0);return P-U}))||[],g={};d.forEach(f=>{const P=new Date(f.date||0).toDateString();g[P]||(g[P]=[]),g[P].push(f)}),Object.keys(g).forEach(f=>{const C=g[f];let P=0,U=0,Q=0,te=0;C.forEach(X=>{const pe=X.goalsa||0,Ne=X.goalsb||0;P+=pe,U+=Ne;const le=Math.floor(U/2),re=Math.floor(P/2),ne=(le-Q)*2,ie=(re-te)*2;l.aekShots+=ne,l.realShots+=ie,l.totalShots+=ne+ie,Q=le,te=re})})}return A==null||A.forEach(d=>{d.goals>0&&(l.playerShots[d.name]||(l.playerShots[d.name]={totalGoals:0,alcoholCaused:0}),l.playerShots[d.name].totalGoals=d.goals,l.playerShots[d.name].alcoholCaused=Math.floor(d.goals/2)*2)}),l})(),R=Object.entries(o.playerShots).sort(([,l],[,d])=>d.alcoholCaused-l.alcoholCaused).slice(0,10),x=()=>{const l=new Date,d=new Date(l.getFullYear(),l.getMonth(),l.getDate()),g=new Date(d);return g.setDate(g.getDate()-1),(i==null?void 0:i.filter(f=>{const C=new Date(f.date),P=new Date(C.getFullYear(),C.getMonth(),C.getDate());return P>=g&&P<=d}))||[]},h=()=>{if(s.mode==="automatic"){const d=x().reduce((g,f)=>g+(f.goalsb||0),0);return Math.floor(d/2)*2}return Math.floor(s.realGoals/2)*2},p=()=>{if(s.mode==="automatic"){const d=x().reduce((g,f)=>g+(f.goalsa||0),0);return Math.floor(d/2)*2}return Math.floor(s.aekGoals/2)*2},S=()=>{if(s.mode==="automatic"){const d=x().reduce((g,f)=>g+(f.goalsa||0)+(f.goalsb||0),0);return Math.floor(d/2)*2}else return Math.floor((s.aekGoals+s.realGoals)/2)*2},F=(l,d,g=null,f=0)=>{if(!d.weight||l===0&&f===0)return"0.00";let C=l*10*.4*.789;C+=f*.5*1e3*.05*.789;const P=d.gender==="female"?.6:.7;let U=C/(d.weight*P);const Q=g||s.drinkingStartTime;if(Q){const X=(new Date-new Date(Q))/(1e3*60*60);U=Math.max(0,U-X*.15)}return U.toFixed(2)},T=l=>{const d=parseFloat(l);return d===0?{status:"NÃ¼chtern",color:"text-green-600",bg:"bg-green-50",border:"border-green-200"}:d<.5?{status:"Gering beeintrÃ¤chtigt",color:"text-yellow-600",bg:"bg-yellow-50",border:"border-yellow-200"}:d<1.1?{status:"FahruntÃ¼chtig",color:"text-orange-600",bg:"bg-orange-50",border:"border-orange-200"}:d<2?{status:"Stark beeintrÃ¤chtigt",color:"text-red-600",bg:"bg-red-50",border:"border-red-200"}:{status:"LebensgefÃ¤hrlich",color:"text-red-800",bg:"bg-red-100",border:"border-red-400"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸº"}),e.jsxs("div",{className:"text-2xl font-bold text-primary-green",children:[o.totalShots,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Schnaps"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["â‰ˆ ",M.clToLiters(o.totalShots),"L"]}),e.jsxs("div",{children:["â‰ˆ ",M.clToShots(o.totalShots)," Shots"]}),e.jsxs("div",{children:["â‰ˆ ",M.clToGlasses(o.totalShots)," GlÃ¤ser"]})]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”µ"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[o.aekShots,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"AEK getrunken"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["â‰ˆ ",M.clToLiters(o.aekShots),"L"]}),e.jsxs("div",{children:["â‰ˆ ",M.clToShots(o.aekShots)," Shots"]}),e.jsxs("div",{children:[o.totalShots>0?(o.aekShots/o.totalShots*100).toFixed(1):0,"% vom Gesamt"]})]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”´"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[o.realShots,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Real getrunken"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["â‰ˆ ",M.clToLiters(o.realShots),"L"]}),e.jsxs("div",{children:["â‰ˆ ",M.clToShots(o.realShots)," Shots"]}),e.jsxs("div",{children:[o.totalShots>0?(o.realShots/o.totalShots*100).toFixed(1):0,"% vom Gesamt"]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ðŸ» Top Alkohol-Verursacher"}),e.jsx("div",{className:"text-sm text-text-muted mb-4",children:"Spieler, die mit ihren Toren am meisten Alkohol fÃ¼r den Gegner verursacht haben"}),e.jsxs("div",{className:"space-y-3",children:[R.map(([l,d],g)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${g===0?"bg-yellow-500 text-white":g===1?"bg-gray-400 text-white":g===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:g+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l}),e.jsxs("div",{className:"text-sm text-text-muted space-x-2",children:[e.jsxs("span",{children:[d.totalGoals," Tore"]}),e.jsxs("span",{children:["â‰ˆ ",M.clToLiters(d.alcoholCaused),"L"]}),e.jsxs("span",{children:["â‰ˆ ",M.clToShots(d.alcoholCaused)," Shots"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[d.alcoholCaused,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"verursacht"})]})]},l)),R.length===0&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Tore geschossen - noch kein Alkohol verursacht!"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ðŸ“‹ Spiele & Alkohol-Ãœbersicht"}),e.jsx("div",{className:"text-sm text-text-muted mb-4",children:"Ãœbersicht Ã¼ber alle Spiele und den dabei konsumierten Alkohol"}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[i==null?void 0:i.slice().reverse().map((l,d)=>{const g=l.goalsa||0,f=l.goalsb||0,C=Math.floor((g+f)/2)*2,P=Math.floor(f/2)*2,U=Math.floor(g/2)*2;return e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg border border-border-light",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-lg",children:[g,":",f,e.jsxs("span",{className:"text-sm text-text-muted ml-2",children:["(",l.date||"Kein Datum",")"]})]}),e.jsx("div",{className:"text-sm text-text-muted",children:"AEK vs Real Madrid"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[C,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[M.clToLiters(C),"L | ",M.clToShots(C)," Shots"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[e.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-600",children:[P,"cl"]}),e.jsx("div",{className:"text-xs text-blue-700",children:"AEK trinkt"})]}),e.jsxs("div",{className:"text-center p-2 bg-red-50 rounded",children:[e.jsxs("div",{className:"text-sm font-bold text-red-600",children:[U,"cl"]}),e.jsx("div",{className:"text-xs text-red-700",children:"Real trinkt"})]})]})]},l.id||d)}),(!i||i.length===0)&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Spiele vorhanden"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ðŸ§® Erweiterte Alkohol-Rechner"}),e.jsx("div",{className:"text-sm text-text-muted mb-6",children:"Berechne Alkoholkonsum fÃ¼r Spiele und Spieltage inklusive Bier-Konsum und Blutalkohol"}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"ðŸ“Š Automatische Schnaps-Verfolgung"}),e.jsx("div",{className:"text-sm text-blue-700 mb-3",children:"Shots werden automatisch bei jedem neuen Spiel hinzugefÃ¼gt und permanent gespeichert."}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center p-2 bg-white rounded border border-blue-200",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[s.cumulativeShots.total,"cl"]}),e.jsx("div",{className:"text-xs text-blue-700",children:"Gesamt Schnaps"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded border border-blue-200",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[s.cumulativeShots.aek,"cl"]}),e.jsx("div",{className:"text-xs text-blue-700",children:"AEK getrunken"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded border border-blue-200",children:[e.jsxs("div",{className:"text-lg font-bold text-red-600",children:[s.cumulativeShots.real,"cl"]}),e.jsx("div",{className:"text-xs text-red-700",children:"Real getrunken"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded border border-blue-200",children:[e.jsx("div",{className:"text-xs font-bold text-gray-600",children:s.cumulativeShots.lastUpdated?new Date(s.cumulativeShots.lastUpdated).toLocaleDateString("de-DE"):"Noch nicht aktualisiert"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Letzte Aktualisierung"})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-blue-600",children:["ðŸ’¡ Diese Werte werden automatisch aktualisiert, wenn neue Spiele hinzugefÃ¼gt werden. Letztes verarbeitetes Spiel: Match ID ",s.cumulativeShots.lastMatchId||"Keins"]}),e.jsx("div",{className:"mt-3 flex justify-center",children:e.jsx("button",{onClick:()=>{const l=de(i,s);c(l)},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"ðŸ”„ Shots neu berechnen"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"âš½ Spiel-Rechner"}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Berechnungsmodus"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"calculatorMode",value:"manual",checked:s.mode==="manual",onChange:l=>j({mode:l.target.value}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Manuell"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"calculatorMode",value:"automatic",checked:s.mode==="automatic",onChange:l=>j({mode:l.target.value}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Automatisch (letzten 2 Spieltage)"})]})]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:s.mode==="manual"?"Geben Sie Tore manuell ein":"Berechnet automatisch aus Spielen der letzten zwei Tage (heute + gestern)"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 alcohol-calculator-grid",children:[e.jsxs("div",{className:"space-y-4",children:[s.mode==="manual"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"alcohol-input-group",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"AEK Tore"}),e.jsx("input",{type:"number",min:"0",max:"20",value:s.aekGoals,onChange:l=>j({aekGoals:parseInt(l.target.value)||0}),onFocus:l=>l.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green"})]}),e.jsxs("div",{className:"alcohol-input-group",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Real Tore"}),e.jsx("input",{type:"number",min:"0",max:"20",value:s.realGoals,onChange:l=>j({realGoals:parseInt(l.target.value)||0}),onFocus:l=>l.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green"})]})]}),s.mode==="automatic"&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"ðŸ“Š Automatische Berechnung"}),e.jsx("div",{className:"text-sm text-blue-700 space-y-1",children:(()=>{const l=x(),d=l.reduce((g,f)=>g+(f.goalsa||0)+(f.goalsb||0),0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Spiele (letzte 2 Tage): ",l.length]}),e.jsxs("div",{children:["Gesamt-Tore: ",d]}),e.jsxs("div",{children:["Daraus resultierend: ",S(),"cl Schnaps"]})]})})()})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-bg-secondary rounded-lg alcohol-display-card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ¥ƒ"}),e.jsxs("div",{className:"text-2xl font-bold text-primary-green",children:[S(),"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Schnaps"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["â‰ˆ ",M.clToLiters(S()),"L"]}),e.jsxs("div",{children:["â‰ˆ ",M.clToShots(S())," Shots"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[h(),"cl"]}),e.jsx("div",{className:"text-sm text-blue-700",children:"AEK trinkt"}),e.jsxs("div",{className:"text-xs text-blue-700",children:[M.clToShots(h())," Shots"]})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-red-600",children:[p(),"cl"]}),e.jsx("div",{className:"text-sm text-red-700",children:"Real trinkt"}),e.jsxs("div",{className:"text-xs text-red-700",children:[M.clToShots(p())," Shots"]})]})]})]})]})]}),e.jsxs("div",{className:"mb-6 border-t pt-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"ðŸ“… Spieltag-Rechner"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Spieltag (Datum)"}),e.jsx("input",{type:"date",value:s.gameDay,onChange:l=>j({gameDay:l.target.value}),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bier-Anzahl (0,5L je)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-blue-600 mb-1",children:"ðŸ”µ AEK Bier"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"0",max:"20",value:s.beerCount.aek,onChange:l=>j({beerCount:{aek:parseInt(l.target.value)||0}}),onFocus:l=>l.target.select(),className:"flex-1 px-2 py-1 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsx("button",{onClick:()=>j({beerCount:{aek:s.beerCount.aek+1}}),className:"beer-counter-button px-2 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",title:"0,5L Bier (5% Alkohol) fÃ¼r AEK hinzufÃ¼gen",children:"ðŸº +0,5L"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-red-600 mb-1",children:"ðŸ”´ Real Bier"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"0",max:"20",value:s.beerCount.real,onChange:l=>j({beerCount:{real:parseInt(l.target.value)||0}}),onFocus:l=>l.target.select(),className:"flex-1 px-2 py-1 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsx("button",{onClick:()=>j({beerCount:{real:s.beerCount.real+1}}),className:"beer-counter-button px-2 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",title:"0,5L Bier (5% Alkohol) fÃ¼r Real hinzufÃ¼gen",children:"ðŸº +0,5L"})]})]})]}),e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("button",{onClick:()=>j({beerCount:{aek:s.beerCount.aek+1,real:s.beerCount.real+1}}),className:"beer-counter-button px-3 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors text-sm",title:"0,5L Bier (5% Alkohol) fÃ¼r beide Teams hinzufÃ¼gen",children:"ðŸºðŸº Beide +0,5L"})}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["AEK: ",(s.beerCount.aek*.5).toFixed(1),"L | Real: ",(s.beerCount.real*.5).toFixed(1),"L Bier (5% Alkohol)"]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-bg-secondary rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Spieltag-Alkohol"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Schnaps: ",S(),"cl (40% Alkohol)"]}),e.jsxs("div",{children:["AEK Bier: ",(s.beerCount.aek*.5*5).toFixed(1),"cl reiner Alkohol"]}),e.jsxs("div",{children:["Real Bier: ",(s.beerCount.real*.5*5).toFixed(1),"cl reiner Alkohol"]}),e.jsxs("div",{className:"border-t pt-1 font-semibold",children:["Gesamt: ",(S()*.4+(s.beerCount.aek+s.beerCount.real)*.5*.05).toFixed(1),"cl reiner Alkohol"]})]})]})})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"ðŸ‘¥ Spieler-Daten & Blutalkohol"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-blue-600 mb-2",children:"ðŸ”µ Chef AEK"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Name",value:s.playerData.aekChef.name,onChange:l=>c(d=>({...d,playerData:{...d.playerData,aekChef:{...d.playerData.aekChef,name:l.target.value}}})),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",placeholder:"Gewicht (kg)",min:"40",max:"150",value:s.playerData.aekChef.weight,onChange:l=>c(d=>({...d,playerData:{...d.playerData,aekChef:{...d.playerData.aekChef,weight:parseInt(l.target.value)||70}}})),onFocus:l=>l.target.select(),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("select",{value:s.playerData.aekChef.gender,onChange:l=>c(d=>({...d,playerData:{...d.playerData,aekChef:{...d.playerData.aekChef,gender:l.target.value}}})),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"male",children:"MÃ¤nnlich"}),e.jsx("option",{value:"female",children:"Weiblich"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-600 mb-2",children:"ðŸ”´ Chef Real"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Name",value:s.playerData.realChef.name,onChange:l=>c(d=>({...d,playerData:{...d.playerData,realChef:{...d.playerData.realChef,name:l.target.value}}})),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",placeholder:"Gewicht (kg)",min:"40",max:"150",value:s.playerData.realChef.weight,onChange:l=>c(d=>({...d,playerData:{...d.playerData,realChef:{...d.playerData.realChef,weight:parseInt(l.target.value)||70}}})),onFocus:l=>l.target.select(),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("select",{value:s.playerData.realChef.gender,onChange:l=>c(d=>({...d,playerData:{...d.playerData,realChef:{...d.playerData.realChef,gender:l.target.value}}})),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"male",children:"MÃ¤nnlich"}),e.jsx("option",{value:"female",children:"Weiblich"})]})]})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-bg-secondary rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-3",children:"ðŸ§ª Blutalkohol-Rechnung"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-blue-600",children:[s.playerData.aekChef.name||"Chef AEK"," trinkt: ",h(),"cl"]}),(()=>{const l=s.mode==="automatic"?(()=>{const g=x(),f=g.length>0?g[g.length-1]:null;return F(h(),s.playerData.aekChef,f==null?void 0:f.date,s.beerCount.aek)})():F(Math.floor(s.realGoals/2)*2,s.playerData.aekChef,null,s.beerCount.aek),d=T(l);return e.jsxs("div",{className:`text-sm mt-2 p-2 rounded ${d.bg} ${d.border} border`,children:[e.jsxs("div",{className:`font-bold ${d.color}`,children:["BAK: ",l,"â€°"]}),e.jsx("div",{className:`text-xs ${d.color}`,children:d.status})]})})()]}),e.jsxs("div",{className:"p-3 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-red-600",children:[s.playerData.realChef.name||"Chef Real"," trinkt: ",p(),"cl"]}),(()=>{const l=s.mode==="automatic"?(()=>{const g=x(),f=g.length>0?g[g.length-1]:null;return F(p(),s.playerData.realChef,f==null?void 0:f.date,s.beerCount.real)})():F(Math.floor(s.aekGoals/2)*2,s.playerData.realChef,null,s.beerCount.real),d=T(l);return e.jsxs("div",{className:`text-sm mt-2 p-2 rounded ${d.bg} ${d.border} border`,children:[e.jsxs("div",{className:`font-bold ${d.color}`,children:["BAK: ",l,"â€°"]}),e.jsx("div",{className:`text-xs ${d.color}`,children:d.status})]})})()]})]}),e.jsxs("div",{className:"text-xs text-text-muted mt-3",children:[e.jsx("strong",{children:"Hinweis:"})," BAK-Berechnung ist eine NÃ¤herung (Widmark-Formel) mit Alkoholabbau (~0.15â€°/h). Exakte Werte kÃ¶nnen abweichen. Automatischer Modus berÃ¼cksichtigt Zeit seit letztem Spiel."]})]})})]})]}),e.jsx("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Regeln:"})," FÃ¼r jedes zweite Tor muss der Gegner 2cl Schnaps (40%) trinken. 0,5L Bier (5% Alkohol) entspricht 2,5cl reinem Alkohol."]})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-bold text-lg text-blue-800",children:"â±ï¸ Zeit-Tracking fÃ¼r BAK-Abbau"}),s.drinkingStartTime&&e.jsxs("div",{className:"text-sm text-blue-700",children:["Gestartet: ",new Date(s.drinkingStartTime).toLocaleString("de-DE")]})]}),e.jsxs("div",{className:"text-sm text-blue-700 mb-4",children:["Aktivieren Sie das Zeit-Tracking, um den Alkoholabbau Ã¼ber die Zeit korrekt zu berechnen.",s.drinkingStartTime?` Seit Start: ${ye(s).toFixed(1)} Stunden.`:" Dies startet die Uhr fÃ¼r die BAK-Abbau-Berechnung."]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{const l=Se(s);c(l)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"ðŸº Trinken starten/neu starten"}),s.drinkingStartTime&&e.jsx("button",{onClick:()=>j({drinkingStartTime:null}),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"â¹ï¸ Zeit-Tracking stoppen"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-lg mb-3 text-gray-800",children:"ðŸ“Š BAK-Referenztabelle"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 bg-green-100 border border-green-200 rounded text-center",children:[e.jsx("div",{className:"font-semibold text-green-800",children:"0.0â€°"}),e.jsx("div",{className:"text-xs text-green-700",children:"NÃ¼chtern"})]}),e.jsxs("div",{className:"p-2 bg-yellow-100 border border-yellow-200 rounded text-center",children:[e.jsx("div",{className:"font-semibold text-yellow-800",children:"0.3-0.5â€°"}),e.jsx("div",{className:"text-xs text-yellow-700",children:"Leicht beeintrÃ¤chtigt"})]}),e.jsxs("div",{className:"p-2 bg-orange-100 border border-orange-200 rounded text-center",children:[e.jsx("div",{className:"font-semibold text-orange-800",children:"0.5-1.1â€°"}),e.jsx("div",{className:"text-xs text-orange-700",children:"FahruntÃ¼chtig"})]}),e.jsxs("div",{className:"p-2 bg-red-100 border border-red-200 rounded text-center",children:[e.jsx("div",{className:"font-semibold text-red-800",children:"1.1-2.0â€°"}),e.jsx("div",{className:"text-xs text-red-700",children:"Stark beeintrÃ¤chtigt"})]}),e.jsxs("div",{className:"p-2 bg-red-200 border border-red-400 rounded text-center",children:[e.jsx("div",{className:"font-semibold text-red-900",children:"2.0+â€°"}),e.jsx("div",{className:"text-xs text-red-800",children:"LebensgefÃ¤hrlich"})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:[e.jsx("strong",{children:"Wichtig:"})," Dies ist nur eine grobe Orientierung. Individuelle Faktoren kÃ¶nnen stark abweichen. Bei hohen Werten bitte medizinische Hilfe suchen!"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card border-l-4 border-blue-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-blue-600",children:"ðŸ”µ AEK Alkohol-Bilanz"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Getrunken (durch Real Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-red-600",children:[o.aekShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[M.clToLiters(o.aekShots),"L | ",M.clToShots(o.aekShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Verursacht (durch AEK Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-green-600",children:[o.realShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[M.clToLiters(o.realShots),"L | ",M.clToShots(o.realShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"font-medium",children:"Alkohol-Bilanz:"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold ${o.realShots>o.aekShots?"text-green-600":"text-red-600"}`,children:[o.realShots>o.aekShots?"+":"",o.realShots-o.aekShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[M.clToShots(Math.abs(o.realShots-o.aekShots))," Shots Differenz"]})]})]}),e.jsx("div",{className:"text-xs text-text-muted",children:o.realShots>o.aekShots?"AEK verursacht mehr als getrunken":"AEK trinkt mehr als verursacht"})]})]}),e.jsxs("div",{className:"modern-card border-l-4 border-red-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-red-600",children:"ðŸ”´ Real Alkohol-Bilanz"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Getrunken (durch AEK Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-red-600",children:[o.realShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[M.clToLiters(o.realShots),"L | ",M.clToShots(o.realShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Verursacht (durch Real Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-green-600",children:[o.aekShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[M.clToLiters(o.aekShots),"L | ",M.clToShots(o.aekShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"font-medium",children:"Alkohol-Bilanz:"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold ${o.aekShots>o.realShots?"text-green-600":"text-red-600"}`,children:[o.aekShots>o.realShots?"+":"",o.aekShots-o.realShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[M.clToShots(Math.abs(o.aekShots-o.realShots))," Shots Differenz"]})]})]}),e.jsx("div",{className:"text-xs text-text-muted",children:o.aekShots>o.realShots?"Real verursacht mehr als getrunken":"Real trinkt mehr als verursacht"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"ðŸ“ˆ ZusÃ¤tzliche Alkohol-Statistiken"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[W>0?(o.totalShots/W).toFixed(1):"0.0","cl"]}),e.jsx("div",{className:"text-sm text-purple-700",children:"âŒ€ Alkohol pro Spiel"}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Durchschnittlicher Schnaps-Konsum"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-red-50 rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[(i==null?void 0:i.reduce((d,g)=>{const f=(g.goalsa||0)+(g.goalsb||0),C=Math.floor(f/2)*2;return C>d?C:d},0))||0,"cl"]}),e.jsx("div",{className:"text-sm text-orange-700",children:"ðŸ”¥ HÃ¶chster Alkohol-Verbrauch"}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"In einem einzelnen Spiel"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(()=>{const l=(i==null?void 0:i.filter(g=>{const f=(g.goalsa||0)+(g.goalsb||0);return Math.floor(f/2)*2===0}).length)||0,d=(i==null?void 0:i.filter(g=>{const f=(g.goalsa||0)+(g.goalsb||0),C=Math.floor(f/2)*2;return C>0&&C<=4}).length)||0;return`${l}/${d}`})()}),e.jsx("div",{className:"text-sm text-green-700",children:"ðŸš« NÃ¼chterne/Wenig-Alkohol Spiele"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Alkoholfrei / Wenig Alkohol (â‰¤4cl)"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-yellow-50 to-amber-50 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:(()=>{const l=(i==null?void 0:i.filter(f=>{const C=(f.goalsa||0)+(f.goalsb||0);return Math.floor(C/2)*2>=10}).length)||0,d=(i==null?void 0:i.length)||0,g=d>0?(l/d*100).toFixed(0):0;return`${l} (${g}%)`})()}),e.jsx("div",{className:"text-sm text-amber-700",children:"ðŸ» Starke Alkohol-Spiele"}),e.jsx("div",{className:"text-xs text-amber-600 mt-1",children:"Spiele mit â‰¥10cl Alkohol"})]})]})]})]})},fe=()=>{switch(n){case"dashboard":return e.jsx($e,{onNavigate:t});case"players":return ge();case"teams":return ue();case"trends":return be();case"alkohol":return je();case"advanced":return e.jsx(we,{});default:return Z()}};return e.jsxs("div",{className:"p-4 pb-24 mobile-safe-bottom",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"ðŸ“Š Statistiken"}),e.jsx("p",{className:"text-text-muted",children:"Umfassende Analyse von Spielen, Spielern und Teams"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"icon-only-nav flex overflow-x-auto space-x-2 pb-2 scroll-indicator-container",children:k.map(m=>e.jsxs("button",{onClick:()=>a(m.id),className:`stats-nav-button flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${n===m.id?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary"}`,title:m.label,"aria-label":m.label,children:[e.jsx("span",{children:m.icon}),e.jsx("span",{className:"font-medium hidden sm:inline",children:m.label})]},m.id))}),e.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 w-4 h-8 bg-gradient-to-r from-bg-primary to-transparent pointer-events-none opacity-50 md:hidden"}),e.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-4 h-8 bg-gradient-to-l from-bg-primary to-transparent pointer-events-none opacity-50 md:hidden"})]}),e.jsx("div",{className:"form-container",children:fe()})]})}export{Ve as default};
